<ons-page id="segment-edit-map-page">
    <div id="segment-edit-container">
        <div class="segment-edit-header">
            <ons-back-button>Segment edit</ons-back-button>
            <span id="segment-edit-map-page-h1"></span>
        </div>

        <ons-progress-bar id="loading-bar-segment-edit" value="0"></ons-progress-bar>
        <canvas id="segment-edit-map"></canvas>
    </div>

    <div class="map-page-buttons">
        <ons-fab ripple id="segment-edit-add-split-line" class="hidden">
            <ons-icon icon="fa-arrows-h"></ons-icon>
        </ons-fab>
        <ons-fab ripple id="segment-edit-split" class="hidden">
            <ons-icon icon="fa-cut"></ons-icon>
        </ons-fab>
        <ons-fab ripple id="segment-edit-join" class="hidden">
            <ons-icon icon="fa-object-group"></ons-icon>
        </ons-fab>
        <ons-fab ripple id="segment-rename" class="hidden">
            <ons-icon icon="fa-i-cursor"></ons-icon>
        </ons-fab>
    </div>

    <ons-dialog id="segment-rename-dialog" cancelable>
        <ons-list-title>Edit segment name</ons-list-title>
        <ons-list>
            <ons-list-item>
                <div class="left">
                    Name:
                </div>
                <label class="right" style="width:75%">
                    <ons-input id="segment-rename-input-name" float placeholder="Room 1" style="width:100%"></ons-input>
                </label>
            </ons-list-item>
        </ons-list>
        <ons-list-item>
            <ons-button class="button" id="segment-rename-dialog-cancel-button" style="width:45%; margin-right:5%;" modifier="outline">
                Cancel
            </ons-button>
            <ons-button class="button" id="segment-rename-dialog-update-button" style="width:45%;">
                <ons-icon icon="fa-pencil" class="ons-icon fa-pencil fa"></ons-icon>
                Update
            </ons-button>
        </ons-list-item>
    </ons-dialog>

    <script>
      {
        let s = document.createElement('script');
        s.src = "segment-edit-map.js";
        s.type = "module";
        s.crossOrigin = "use-credentials";
        ons.getScriptPage().appendChild(s);
        s.onreadystatechange = s.onload = () => { window.segmentConfigInit(); };
      }
    </script>
    <style>
        #segment-edit-container {
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: auto auto 1fr;

            height: 100%;
            width: 100%;
        }

        #segment-edit-map {
            touch-action: none;
            height: 100%;
            width: 100%;
        }

        #segment-edit-map-page-h1 {
            flex-grow: 1;
            text-align: center;
        }

        .segment-edit-header {
            display: flex;
            align-items: center;
        }

        .segment-edit-buttons {
            position: absolute;
            right: 1.5em;
            bottom: 1.5em;
            display: grid;
            grid-template-columns: auto;
            grid-template-rows: auto;
            grid-gap: 0.5em;
        }

        ons-fab.hidden {
            display: none;
        }

    </style>
</ons-page>
