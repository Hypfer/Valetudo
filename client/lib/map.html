<ons-page id="map-page">
    <div class="map-page-container">
        <ons-progress-bar id="loading-bar-map" value="0" indeterminate="indeterminate"></ons-progress-bar>

        <canvas id="map-canvas"></canvas>
    </div>

    <div class="map-page-buttons">
        <ons-fab ripple id="add_zone">
            <ons-icon icon="fa-plus"></ons-icon>
        </ons-fab>
        <ons-fab ripple id="start_zoned_or_section_cleanup">
            <ons-icon icon="fa-play"></ons-icon>
        </ons-fab>
        <ons-fab ripple id="goto">
            <ons-icon icon="fa-map-marker"></ons-icon>
        </ons-fab>
    </div>

    <script>
      {
        let s = document.createElement('script');
        s.src = "map.js";
        s.type = "module";
        s.crossOrigin = "use-credentials";
        ons.getScriptPage().appendChild(s);
      }
    </script>
    <script defer>
        // Somehow getScriptPage returns null inside the type=module script tag
        ons.getScriptPage().onShow = function () {
            window.fn.updateMapPage();
        };
        ons.getScriptPage().onHide = function () {
            window.fn.cancelUpdateMap();

        };
    </script>
</ons-page>
