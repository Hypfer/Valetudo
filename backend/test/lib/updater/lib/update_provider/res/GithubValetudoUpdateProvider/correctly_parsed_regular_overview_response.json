[
  {
    "version": "2022.08.0",
    "releaseTimestamp": "2022-08-02T19:20:05.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2022.08.0</h2></p>\r\n</div>\r\n\r\nNew firmwares for dreame robots and some bugfixes\r\n\r\n## New dreame firmwares\r\n\r\n[<img src=\"https://user-images.githubusercontent.com/974410/182454333-356ba835-4f69-4041-a720-7c2d97eb3209.png\" width=350>](https://user-images.githubusercontent.com/974410/182454333-356ba835-4f69-4041-a720-7c2d97eb3209.png)\r\n\r\nIt took quite a lot of time and work, but now we're proud to announce that we've managed to get newer dreame firmwares\r\nto work rooted and with Valetudo. A big thank you to everyone who helped during the beta test!\r\n\r\n**Important**: That does **not** mean that these newer firmwares have become rootable.\r\nYou will need to have an already rooted robot to install these latest rooted firmwares.\r\n\r\nTo update, head over to the dustbuilder at [https://builder.dontvacuum.me/](https://builder.dontvacuum.me/) to build and install a new image.\r\nMake sure to update Valetudo **before** updating the firmware.\r\n\r\n## Other dreame news\r\n\r\n[<img src=\"https://user-images.githubusercontent.com/974410/182454516-57ef159d-d97e-458a-815d-97a60db689ba.png\" width=350>](https://user-images.githubusercontent.com/974410/182454516-57ef159d-d97e-458a-815d-97a60db689ba.png)\r\n\r\nStarting today, every firmware image built with the dustbuilder will contain a fix for the vanishing Valetudo issue,\r\nwhich occasionally left people with a rooted robot but no Valetudo.\r\n\r\n[<img src=\"https://user-images.githubusercontent.com/974410/182454599-cab62e88-6179-43da-b907-6ac7236c7d17.png\" width=350>](https://user-images.githubusercontent.com/974410/182454599-cab62e88-6179-43da-b907-6ac7236c7d17.png)\r\n\r\nIf a user starts a new mapping pass, the fresh map should now appear instantly.\r\nFurthermore, issues with frozen maps either during cleanups or when editing segments were fixed as well.\r\n\r\n## Robot Coverage View\r\n\r\n[<img src=\"https://user-images.githubusercontent.com/974410/182455081-879226c5-aa14-4160-bc2f-f9c0f2a2d3d3.png\" width=300>](https://user-images.githubusercontent.com/974410/182455081-879226c5-aa14-4160-bc2f-f9c0f2a2d3d3.png)\r\n\r\n\r\nThe UI has been extended with a view displaying a much thicker path.\r\nThis can be used to better see which areas of the map have been cleaned.\r\n\r\nWhether this view will stick around long-term is yet to be decided. It was pretty easy to implement though.\r\nFeel free to leave your feedback in the comments.\r\n\r\n\r\n## The usual\r\n\r\n[<img src=\"https://user-images.githubusercontent.com/974410/182454845-cc693f37-a126-4978-b2f0-5c9f77a970d8.png\" width=350>](https://user-images.githubusercontent.com/974410/182454845-cc693f37-a126-4978-b2f0-5c9f77a970d8.png)\r\n\r\nIf you want to see Valetudo on more robots and/or like this release, you might want to consider donating if you haven't done so already:\r\n\r\n[https://github.com/sponsors/Hypfer](https://github.com/sponsors/Hypfer)\r\n\r\n[https://builder.dontvacuum.me/donations.txt](https://builder.dontvacuum.me/donations.txt)\r\n\r\n\r\n## Misc\r\n\r\nThis changelog features artworks generated by DALL-E 2 because I thought it would be neat to have something to look at.\r\nUnfortunately, it doesn't like generating artworks featuring lidar-based vacuum robots (yet?)\r\n\r\nI hope they've nonetheless enhanced your changelog reading experience.\r\nFeel free to leave feedback on that as well.\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n- **vendor.dreame**: Newer D9 Firmwares also have a sensor consumable [`17c0d27`](http://github.com/Hypfer/Valetudo/commit/17c0d27fb69b92b5a8028d6bab489e5b97fb4537)\r\n- **ui**: Trim whitespaces when renaming segments [`39d72f4`](http://github.com/Hypfer/Valetudo/commit/39d72f4e787108c75a1cb501995151fb19b4d8b1)\r\n- **ui**: Add robot coverage map [`a9661a0`](http://github.com/Hypfer/Valetudo/commit/a9661a02bcbe642c3e7de46be4015f9532e4ce49)\r\n- **vendor.dreame**: Add mop-only quirk for newer firmwares [`a33afe3`](http://github.com/Hypfer/Valetudo/commit/a33afe351c1b868919bc7b036e2e02a05b8e581c)\r\n- **vendor.dreame**: Add Mop Dock UV-C Toggle Quirk [`7ce4abe`](http://github.com/Hypfer/Valetudo/commit/7ce4abe7353567fd3db6a7a9cc1c767d68a9db93)\r\n\r\n### Fixes\r\n\r\n- **vendor.dreame**: Add support for more features of newer firmwares [`b74c281`](http://github.com/Hypfer/Valetudo/commit/b74c281e1727ca2a007d96915c6fceb3f386bd28)\r\n- **ui**: Add margin to apple touch icon (#1526) [`dc72ef0`](http://github.com/Hypfer/Valetudo/commit/dc72ef05319799020a504a3b20e0b7e6092984ee)\r\n- **vendor.dreame**: Ignore empty maps [`99aad7b`](http://github.com/Hypfer/Valetudo/commit/99aad7be8b20c9459e849dd6b9ce8df5171b9690)\r\n- **networkadvertisement**: Don't crash the process on ssdp multicast membership errors [`bfb96c0`](http://github.com/Hypfer/Valetudo/commit/bfb96c09aa2bc0ff9e151fb6cdab4ac5bbd58a36)\r\n- **miio**: Allow two simultaneous FDS uploads [`6e26374`](http://github.com/Hypfer/Valetudo/commit/6e26374c32e9fe33c93f4f91c189f917c5f884a5)\r\n- **vendor.dreame**: Switch to async map preprocessing to not block the event loop [`3b5743b`](http://github.com/Hypfer/Valetudo/commit/3b5743b41264c3d8d36d8cc0a75da30e90bb7338)\r\n- **miio**: Further improve fds upload timeout handling [`8c1ba9e`](http://github.com/Hypfer/Valetudo/commit/8c1ba9ea2fcc980bf726a4678902afd2577a0191)\r\n- **miio**: Gracefully handle connectivity issues when receiving fds uploads [`8aab94f`](http://github.com/Hypfer/Valetudo/commit/8aab94fa2ab01479997968904e9312fbc8111a83)\r\n- **vendor.dreame**: Ignore timezone update message [`5ecf7fa`](http://github.com/Hypfer/Valetudo/commit/5ecf7fa0842c498a2ad8abfd792a71b420ce34bf)\r\n- **ui**: Allow sending home basic control command while paused [`0dfb4ba`](http://github.com/Hypfer/Valetudo/commit/0dfb4ba59bd1334f994beea211ac17fdf5323f1f)\r\n- **vendor.dreame**: Fix maps for newer firmwares [`5f67103`](http://github.com/Hypfer/Valetudo/commit/5f6710348fd304046a201c2423490555e44d3b20)\r\n- **webserver**: Fix openapi schema for MapSegmentEditCapability [`f106735`](http://github.com/Hypfer/Valetudo/commit/f106735cbae0eed2ebfebaa6843c7da976c5127e)\r\n\r\n### Refactoring\r\n\r\n- **webserver**: Response cleanup [`839310a`](http://github.com/Hypfer/Valetudo/commit/839310ab0941941d68ea4ba0c1fbfc17b8924443)\r\n- **webserver**: Actually make use of the openapi schema validation [`6e2d2e1`](http://github.com/Hypfer/Valetudo/commit/6e2d2e1904040aa891dda5d35909654553e04eb7)\r\n- Introduce RobotFirmwareError and refactor CapabilityRouter for unified error logs [`1d2ad47`](http://github.com/Hypfer/Valetudo/commit/1d2ad47e9d49eac71f0621d2aa0444acf871acec)\r\n\r\n### Chores\r\n\r\n- **release**: 2022.08.0 [`214b5c0`](http://github.com/Hypfer/Valetudo/commit/214b5c0c11c0cf70fa56ff915fda05e064a18355)\r\n- Minor cleanup [`9356ba8`](http://github.com/Hypfer/Valetudo/commit/9356ba8e19825a1602cd842db9487389aa553ccf)\r\n- **vendor.dreame**: Fix tests [`15eee37`](http://github.com/Hypfer/Valetudo/commit/15eee3749e41fc77ddf62fbaf8fc348f8d872672)\r\n- **mqtt**: Minor cleanup [`4ae1d03`](http://github.com/Hypfer/Valetudo/commit/4ae1d0365d2b54f9d27c49caf5e38b915ff47e4c)\r\n- Minor misc cleanups [`7bf3c87`](http://github.com/Hypfer/Valetudo/commit/7bf3c87db34a8f27624fe735737a4ccd17fbf8bc)\r\n- Add eslintrc flavors [`b3843f8`](http://github.com/Hypfer/Valetudo/commit/b3843f8bd3c95346735d674f7df4543ff5f78b81)\r\n- Add close_threads github workflow [`e10313d`](http://github.com/Hypfer/Valetudo/commit/e10313dc75a0f7867d64c195fbd9ef69ca3b199b)\r\n- **ui**: Add missing rel=\"noopener\" tag to menu bar [`a7e6920`](http://github.com/Hypfer/Valetudo/commit/a7e6920c7924b5db43b9eb086a434fddaa276d75)\r\n- **build**: Bump to NodeJS v18.5.0 [`66712f9`](http://github.com/Hypfer/Valetudo/commit/66712f91dd3f16c24b0b22b334a37ecfeb983df9)\r\n- Update wording in VoicepackHelp.ts [`05a6b89`](http://github.com/Hypfer/Valetudo/commit/05a6b89848b5c1e9a04f4a822da58e03cd89b5f8)\r\n- Update issue template [`cebca05`](http://github.com/Hypfer/Valetudo/commit/cebca057ceb05d202f3f76211a2e63290f39b002)",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/73473495"
    }
  },
  {
    "version": "2022.06.0",
    "releaseTimestamp": "2022-06-13T18:16:34.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2022.06.0</h2></p>\r\n</div>\r\n\r\nAnother maintenance release featuring upgraded dependencies, refactoring and some bugfixes\r\n\r\n## Bonjour/mDNS fixes\r\n\r\nUsers can now discover multiple robots of the same model in their home network:\r\n\r\n[<img src=\"https://user-images.githubusercontent.com/974410/173417472-ca0d279e-05f2-4980-9f1b-d46af2897882.png\" width=250>](https://user-images.githubusercontent.com/974410/173417472-ca0d279e-05f2-4980-9f1b-d46af2897882.png)\r\n\r\nApparently, the Bonjour service name needs to be unique or else _some_ bonjour implementations will deduplicate it.\r\nBecause of this, the companion app only displayed one robot even though there were multiple ones on the network.\r\n\r\n\r\n## Nightly build enhancements\r\n\r\nThe nightly update provider will now display a changelog of all changes since the last release.\r\n\r\n[<img src=\"https://user-images.githubusercontent.com/974410/173417506-3f156a64-4130-48cc-ab21-6bdabf747707.png\" width=650>](https://user-images.githubusercontent.com/974410/173417506-3f156a64-4130-48cc-ab21-6bdabf747707.png)\r\n\r\nYou can switch to the nightly update provider by changing the `updater.updateProvider.type` in your `valetudo_config.json` to `github_nightly`.\r\nPlease keep in mind that nightly builds might be unstable. They should only be used by people that know what they're doing and are willing to handle occasional breakage.\r\n\r\n## UI Improvements\r\n\r\nMultiple issues that caused the live map to stop refreshing have been fixed.\r\n\r\nChecking back on the Valetudo UI after having it in a background tab for a while during a cleanup will now display the latest map data.\r\nAlso, running Valetudo behind a flaky reverse proxy should not interfere with the SSE connection anymore.\r\n\r\n## Boring chores\r\n\r\nThis release features plenty of dependency upgrades, the migration to create-react-app 5 and more.\r\nIt also contains a lot of refactorings that should further improve the code quality.\r\n\r\nWhile all that doesn't offer any directly noticeable benefits to the user, it is worth noting nonetheless, as keeping the project well-maintained is vital to its longevity.\r\n\r\nThe exciting stuff will hopefully happen later this year :-)\r\n\r\n\r\nApart from code changes, I've been busy figuring out how to build statically linked recent versions of common tools that might be added to our robot firmware images. It's all done using dockerfiles to make it easy to understand, document and reproduce.\r\nInterestingly, information on the internet do to just that is rather sparse so this might also be useful to someone with a different embedded use-case.\r\n\r\nYou can find that stuff here: [https://github.com/Hypfer/valetudo-misc](https://github.com/Hypfer/valetudo-misc)\r\nIf you're missing a tool there please let me know\r\n\r\n## Other news\r\n\r\nAs mentioned in the previous release notes, we're currently still pretty busy figuring out how to root new robots and/or firmware versions.\r\nSince that worked well in the past, I shall continue mentioning it here.\r\n\r\nIf you want to see Valetudo on more robots and/or like this release, you might want to consider donating if you haven't done so already:\r\n\r\n[https://github.com/sponsors/Hypfer](https://github.com/sponsors/Hypfer)\r\n\r\n[https://builder.dontvacuum.me/donations.txt](https://builder.dontvacuum.me/donations.txt)\r\n\r\n\r\n## Autogenerated changelog\r\n\r\nThe autogenerated changelog generation has been updated to be even better and less of a hassle to use.\r\nEnjoy\r\n\r\n### Breaking Changes\r\n\r\n- **timers**: Updating timers should be a PUT instead of a POST [`9c57f0c`](http://github.com/Hypfer/Valetudo/commit/9c57f0c6db069eae796b6fb68766ca2f5d16c907)\r\n\r\n### Features\r\n\r\n- **updater**: Add changelog to nightly update provider [`3a874db`](http://github.com/Hypfer/Valetudo/commit/3a874db088f445d03e71f08f9125ac5ce9cbc4d6)\r\n- **mqtt**: Deduplicate mqtt map data as well [`269aa30`](http://github.com/Hypfer/Valetudo/commit/269aa3004f3925e26afe66139109b201133afcfe)\r\n\r\n### Fixes\r\n\r\n- **networkadvertisement**: Bonjour service names need to be unique [`956487e`](http://github.com/Hypfer/Valetudo/commit/956487ee1f06e571371eb237aa87a86e50969356)\r\n- **ui**: Remove obsolete css statement [`6793c67`](http://github.com/Hypfer/Valetudo/commit/6793c67eb12bb4bf90a83adfb22c0dca01b741ef)\r\n- **ui**: Fix map SSE EventSource not reconnecting on error [`d84efd5`](http://github.com/Hypfer/Valetudo/commit/d84efd586122aff81cab8524517cc2c5a0b7b37b)\r\n- **ui**: fix circular chunk dependency [`271e53c`](http://github.com/Hypfer/Valetudo/commit/271e53c6fa6aa659f94e14e4fd10934901857b82)\r\n- **ui**: Fix map not properly redrawing on visibility state change [`bd77d2e`](http://github.com/Hypfer/Valetudo/commit/bd77d2e22adc33813fb4ab5e3897e6b58d5340e2)\r\n- **utils**: hash key instead of value (#1503) [`bae09ab`](http://github.com/Hypfer/Valetudo/commit/bae09ab9f1d09ca98cd54272aab96afac05e52cb)\r\n- **miio**: Fix ERR_HTTP_HEADERS_SENT exception (#1501) [`a47f3b9`](http://github.com/Hypfer/Valetudo/commit/a47f3b9c97c4abd3f8a5c9a61750312ffce05800)\r\n- **vendor.dreame**: The STYTJO6ZHM does not feature a watertank [`9b75974`](http://github.com/Hypfer/Valetudo/commit/9b7597420084cd579ce9990667d1118c8d5a27ed)\r\n- **vendor.roborock**: copy statusflag from previous state on state update (#1497) [`84de0ef`](http://github.com/Hypfer/Valetudo/commit/84de0ef9d869f5150c504fa13bcd49956c71bf4c)\r\n\r\n### Refactoring\r\n\r\n- **updater**: Move type constant to update providers [`5ca525e`](http://github.com/Hypfer/Valetudo/commit/5ca525ec8f6899f577cc21a616e0fbcf26b2c76e)\r\n- **vendor.roborock**: Improve logic legibility in ZoneCleaningCapability [`560a50e`](http://github.com/Hypfer/Valetudo/commit/560a50edfca23c6a80378f0bed9cc3c1a533d8bc)\r\n- **ui**: Port map color finder to typescript [`6c1b126`](http://github.com/Hypfer/Valetudo/commit/6c1b126138f4e8b751913eb4d4c411a22d7f492c)\r\n- **ui**: Make use of webpack 5 and convert the map layer render webworker to typescript [`d17b66d`](http://github.com/Hypfer/Valetudo/commit/d17b66d6be3381a9c14cf3dfe118f560bd5ed408)\r\n- **ui**: Port map touch handling to typescript [`9548012`](http://github.com/Hypfer/Valetudo/commit/95480129dbf4d72eb2e87a7a0ac1d9c18e429369)\r\n- **ui**: Do not monkey patch the 2d context of the map renderer [`212e4f5`](http://github.com/Hypfer/Valetudo/commit/212e4f541b14a9d5a55d4fe10d54a5c173fc2800)\r\n- **ui**: Remove unnecessary nullchecks in the map component [`96ba8cf`](http://github.com/Hypfer/Valetudo/commit/96ba8cf83f6a4d0c9235359b77414e0cbd70d658)\r\n- **vendor.dreame**: Improve mop dock settings handling [`412a65a`](http://github.com/Hypfer/Valetudo/commit/412a65ab4c5cf3c7ba061ea59d61c88c1d345e34)\r\n- **miio**: Unify previously duplicated map poll code [`356d144`](http://github.com/Hypfer/Valetudo/commit/356d144b9cd15840ccd32c2b2a0a21cb0fa011a8)\r\n\r\n### Chores\r\n\r\n- **release**: 2022.06.0 [`3504a4a`](http://github.com/Hypfer/Valetudo/commit/3504a4a6974afe4ff35d52ab1d676104a77ca86b)\r\n- Fix nightly changelog generation [`2c73de3`](http://github.com/Hypfer/Valetudo/commit/2c73de3cb7d4a564c4b3306e37a5bfa3f3755ff2)\r\n- Minor misc code cleanups [`3c3c561`](http://github.com/Hypfer/Valetudo/commit/3c3c5617dfac3b8a48f43e695c005d95593857ac)\r\n- More dependency changes [`0becd44`](http://github.com/Hypfer/Valetudo/commit/0becd4490b397539de3a8a6593e547cbc4fcba15)\r\n- Delete obsolete Events.js [`5176cce`](http://github.com/Hypfer/Valetudo/commit/5176cce43a9dff88d7acfc39038b3b4e7c303a86)\r\n- Bump dependencies [`8ae420c`](http://github.com/Hypfer/Valetudo/commit/8ae420c1576331dd26acfdf2d3e7a83ff05ebf06)\r\n- bump GitHub codeql action to v2 [`643dcc5`](http://github.com/Hypfer/Valetudo/commit/643dcc581c556797bc6b989dde25671e9ad55378)\r\n- **vendor.dreame**: Add documentation on the mop dock settings data format [`881f717`](http://github.com/Hypfer/Valetudo/commit/881f717ac37505c7f113b6c82f6754837e8a9d43)\r\n- typo fix [`41055d1`](http://github.com/Hypfer/Valetudo/commit/41055d1c9a4615fe9664487e66ec7e9a81773428)",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/69327065"
    }
  },
  {
    "version": "2022.05.1",
    "releaseTimestamp": "2022-05-08T09:27:12.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2022.05.1</h2></p>\r\n</div>\r\n\r\nA small incremental release featuring a few UI/UX improvements\r\n\r\n## MQTT/REST Segment/Zone/GoTo improvements\r\n\r\nThis release adds an easy way of getting the payload to automate zoned cleanups, segment cleanups and go-to commands via MQTT or REST.\r\nSimply set up your zones/select your presets as you'd usually do but instead of just clicking the cleanup button, long-press it, and you will receive a dialog containing the copy-pastable payload for MQTT/REST. `ctrl + a` also works :)\r\n\r\n![image](https://user-images.githubusercontent.com/974410/167289945-4b84df5c-8ebd-4dc4-a121-efc997454aab.png)\r\n\r\n\r\n## Client Map Structure Visibility\r\n\r\nThis release adds a shadow to zones drawn onto the map to improve visibility especially when using the light theme.\r\n\r\nBefore:\r\n![image](https://user-images.githubusercontent.com/974410/167289951-151daef5-bbcf-4fbd-b81c-5674ef12c74f.png)\r\n\r\nAfter:\r\n![image](https://user-images.githubusercontent.com/974410/167289957-d6422c64-7feb-4ab1-905f-cb76ffd38d16.png)\r\n\r\n\r\nFurthermore, NoGoAreas and VirtualWalls now are slightly less transparent to improve visibility on orange segments.\r\n\r\n## Map Crispness\r\n\r\nAt some point for some reason, the map renderer canvas lost the `image-rendering: crisp-edges` css property, which caused occasional blurry maps.\r\n\r\nThis has been fixed. We can now all again enjoy crisp edges :)\r\n\r\nUncrisp edges:\r\n![image](https://user-images.githubusercontent.com/974410/167289962-65a5ffc4-0b86-490a-959e-1f27f3570470.png)\r\n\r\nCrisp edges:\r\n![image](https://user-images.githubusercontent.com/974410/167289969-0d3d78cd-b71e-4dd9-8092-2608b43acee4.png)\r\n\r\n\r\n## Node V18\r\n\r\nThe base binaries have been upgraded to the latest NodeJS v18.1.0.\r\nThey're also now built with `-Os`, which decreased our binary size by a few percent.\r\n\r\n## Other news\r\n\r\nAs mentioned in the previous release notes, we're currently still pretty busy figuring out how to root new robots and/or firmware versions.\r\nSince that worked well the last time, I shall continue mentioning it here.\r\n\r\nIf you want to see Valetudo on more robots and/or like this release, you might want to consider donating if you haven't done so already:\r\n\r\n[https://github.com/sponsors/Hypfer](https://github.com/sponsors/Hypfer)\r\n\r\n[https://builder.dontvacuum.me/donations.txt](https://builder.dontvacuum.me/donations.txt)\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **ui:** Get payload of segment/zone cleanup via long-press ([52731bf](https://github.com/Hypfer/Valetudo/commit/52731bf3b218b58f8469342bcdfdb08f9725ccb1))\r\n* **vendor.roborock:** Add support for the M1S ([f234925](https://github.com/Hypfer/Valetudo/commit/f234925aef5415784c9358f39435aa7e01d9ef79))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **miio:** Limit the maximum fdsUpload filesize ([c1de1c5](https://github.com/Hypfer/Valetudo/commit/c1de1c59084cfe9dfcd9f5659c4be92b153bbfc2))\r\n* **miio:** process _async.stat, _otc.ncstat and _otc.ncinfo messages ([#1488](https://github.com/Hypfer/Valetudo/issues/1488)) ([7cf1fe9](https://github.com/Hypfer/Valetudo/commit/7cf1fe98b7546fa97ad06ce75e04952e436fcbb2))\r\n* **ui:** Add shadow to some client structures for better visibility ([d4e7f83](https://github.com/Hypfer/Valetudo/commit/d4e7f83521b4324bbf9263822d33f7603765d088))\r\n* **ui:** Fix map crispness ([e55a5dc](https://github.com/Hypfer/Valetudo/commit/e55a5dc646e12b3cda2510ff3e792d2d88aa0ee3))\r\n* **ui:** Improve visibility of red virtual restrictions on orange segments ([797143a](https://github.com/Hypfer/Valetudo/commit/797143a1b330c2bcbc44deb4dead656eb381cc56))\r\n* Work around Node v18 breaking os.networkInterfaces ([226dae1](https://github.com/Hypfer/Valetudo/commit/226dae13b9ebd49797d6b0e2f0dacd9ac394cd53))\r\n* **vendor.roborock:** copy metadata from previous state on state update ([#1489](https://github.com/Hypfer/Valetudo/issues/1489)) ([6ecc76b](https://github.com/Hypfer/Valetudo/commit/6ecc76b843e5a582936702f4a5c0fea04a9a4d07))\r\n* **vendor.roborock:** Ignore event.fan_power_reduced ([c56e7a2](https://github.com/Hypfer/Valetudo/commit/c56e7a26df92e628906f78e7b2ee28b243dcd70b))\r\n* **vendor.roborock:** Multiple fixes for Mijia 1S ([#1485](https://github.com/Hypfer/Valetudo/issues/1485)) ([c66798d](https://github.com/Hypfer/Valetudo/commit/c66798db6e19a8a2dac494bf10f444795015872f))\r\n\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/66310630"
    }
  },
  {
    "version": "2022.05.0",
    "releaseTimestamp": "2022-05-01T16:02:49.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2022.05.0</h2></p>\r\n</div>\r\n\r\nSpring-cleaning 2022: Usability improvements, bugfixes and the removal of zone/goto presets + the old UI\r\n\r\n## Zone/GoTo Preset removal\r\n\r\nValetudo 2022.05.0 removes the Zone Preset/GoTo Location feature that has been deprecated since more than six months now.\r\n\r\nAs a replacement for this feature, the MQTT interface now accepts coordinates instead of preset IDs.\r\nThus, users can just change the place where they store their coordinates from the Valetudo config file to e.g., the Home Assistant config files.\r\n\r\nPlease head over to the MQTT docs to find out how to use it.\r\nIt's the same payload that is used by the REST API. No surprises there.\r\n\r\n<details>\r\n<summary>If you're unhappy and/or like to know more about why this change was done, feel free to click on this spoiler</summary>\r\n\r\n<br/>\r\nFeature removal is delicate topic, since there always will be at least one person that is very upset and unhappy with whatever change was done to a project. See also: <a href=\"https://xkcd.com/1172/\" rel=\"noopener\" target=\"_blank\">XKCD 1172</a>.\r\n\r\nStill, it has to be done once in a while to keep a clean codebase and focus on what is most important.\r\nWithout these kinds of cleanups, projects eventually grow to a point when they start suffocating under their own weight.\r\n\r\nIf you've ever worked with larger legacy enterprise codebases, you should understand the issue.\r\nThey tend to be torn apart by\r\n\r\n- legacy features/behaviour having to stay like they are for existing customers/long-running support contracts\r\n\r\nand\r\n\r\n- management, sales and the market in general demanding newer features that no one could ever have predicted previously\r\n\r\nSee also <a href=\"https://news.ycombinator.com/item?id=18442941\" rel=\"noopener\" target=\"_blank\">this anecdote on Oracle 12.2 found on Hackernews</a>.\r\n\r\n\r\nAs avid listeners of my ramblings have likely been aware, I've been very unhappy with that preset feature for more much more than just half a year now.\r\nIt was always a very fragile feature to begin with, given that Valetudo itself would store these coordinates without knowing anything about the underlying map.\r\nThe robot might've decided to rotate the map, leading to them pointing to a completely different location without Valetudo being able to catch that.\r\n\r\nAt the time when it was added, it was the best we had, given that map segments simply weren't invented just yet.\r\nWe didn't even have persistent maps, which is very strange to look back to.\r\n\r\nThat however was almost four years ago. Since then, the market changed a lot as you can tell.\r\nBasically every robot now supports not only persistent maps but also the map segmentation, which is handled by the firmware and not Valetudo.\r\nThose are objectively superior to some rectangles that are drawn onto the map, which is why it was finally time to remove this hack.\r\n\r\n\r\nI know that this may be bad news for V1 owners who do not have segments support and also don't want to use something like Home Assistant.\r\nHowever, I'd like to point out that there is nothing forcing anyone to upgrade to a newer Valetudo version.\r\nThere is no automatic update check that periodically annoys the user.\r\nThere is no cloud that will change its API.\r\nIt just works and will continue to do so.\r\n\r\nTherefore, for those who want to continue using zone presets and goto locations, it is recommended to stick with Valetudo 2022.03.1.\r\nIt also shouldn't be too hard to backport changes to that version. I however simply can't provide that kind of support.\r\nI hope that you will all understand that.\r\n<br/>\r\n</details>\r\n\r\n## Removal of the old UI\r\n\r\nWith the presets gone, we can finally remove the old frontend entirely, which reduced the binary size by around 1MiB.\r\nWhile this doesn't sound like much given that it's \"only\" 3%, it's important to note that currently, 24MiB of the armv7 build consist of the bundled nodejs runtime. This means that with this update, the size of Valetudo itself shrunk by **15%**!\r\n\r\n## UI improvements\r\n\r\nThe menu opening thingy of the mobile UI now always stays at the bottom of the screen to improve user experience when using long phones.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/166154092-65a71eec-1af7-4268-83c2-50c827065824.png)\r\n\r\n\r\nThe live map now renders virtual restrictions with more opacity and less bright colors as they were pretty obstructive previously.\r\nThe edit map remains unchanged.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/166154102-0d9f9700-59a2-42af-a488-6cb953b97add.png)\r\n\r\n\r\nThe log viewer now uses the jetbrains mono font.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/166154108-8bb2a3ec-4dbe-4ae2-9af9-00eb2a5921f4.png)\r\n\r\n\r\n## Attachments\r\n\r\nYour robot will now only report and display attachments whose state it is able to track. No more always attached dustbins confusing users.\r\n\r\n\r\n## Companion apps\r\n\r\nOver the last weeks, a few new companion applications were built:\r\n\r\n1. <a href=\"https://github.com/Hypfer/valetudo-tray-companion\" rel=\"noopener\" target=\"_blank\">valetudo-tray-companion</a>\r\n\r\n   A tray icon that allows easy access to Valetudo instances on your network. It's mostly handy when dealing with 4+ robots\r\n\r\n2. <a href=\"https://github.com/Hypfer/valetudo-helper-miioota\" rel=\"noopener\" target=\"_blank\">valetudo-helper-miioota</a>\r\n\r\n    A standalone all-in-one firmware update flasher tool for roborock v1 and s5. The docs have been updated to suggest using it\r\n\r\n3. <a href=\"https://github.com/Hypfer/valetudo-helper-httpbridge\" rel=\"noopener\" target=\"_blank\">valetudo-helper-httpbridge</a>\r\n\r\n   A standalone self-contained utility webserver currently most useful for rooting dreames. The docs have been updated to suggest using it\r\n\r\n4. <a href=\"https://github.com/Hypfer/valetudo-helper-miio\" rel=\"noopener\" target=\"_blank\">valetudo-helper-miio</a>\r\n\r\n   A standalone self-contained utility to send raw miio commands. Useful for development of valetudo or other software interacting via miio\r\n\r\n5. <a href=\"https://github.com/Hypfer/valetudo-helper-voicepacks\" rel=\"noopener\" target=\"_blank\">valetudo-helper-voicepacks</a>\r\n\r\n   A WIP tool to help with Voicepacks\r\n\r\nThese should make installation and usage of Valetudo even easier than before.\r\n\r\n## Other news\r\n\r\nWe're currently pretty busy figuring out how to root new robots and/or firmware versions.\r\nThese endeavors are partly funded by your donations. Thank you!\r\n\r\nIf you want to see Valetudo on more robots, you might want to consider donating:\r\n\r\nhttps://github.com/sponsors/Hypfer\r\n\r\nhttps://builder.dontvacuum.me/donations.txt\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **mqtt:** Provide attachment state attributes autodiscovery for home assistant ([b7b6344](https://github.com/Hypfer/Valetudo/commit/b7b6344281183fa022d83f4635894af3beae7a97))\r\n* **ui:** Improve mobile controls for long screens ([f7f3f0d](https://github.com/Hypfer/Valetudo/commit/f7f3f0db6e155aff25344d293e9822b589e43d9a))\r\n* **ui:** Reduce live map obstructions caused by virtual restrictions ([ddec0b3](https://github.com/Hypfer/Valetudo/commit/ddec0b34b215cc9b81d5b2e86926c8b73e446ca5))\r\n* **ui:** Use JetBrains Mono ([5a7045c](https://github.com/Hypfer/Valetudo/commit/5a7045c1a03c97bf892738d40999824fb2ae6a81))\r\n* **vendor.dreame:** 1C PendingMapChangeHandling ([1b2f3bf](https://github.com/Hypfer/Valetudo/commit/1b2f3bf0055587faadaaa2bd841449e887de0a49))\r\n* **vendor.dreame:** Add support for the STYTJO6ZHM ([519c5b4](https://github.com/Hypfer/Valetudo/commit/519c5b4a437868e9d7de2e20448bbc6d1f1cfceb))\r\n* **vendor.viomi:** Fetch and display firmware version ([7f08743](https://github.com/Hypfer/Valetudo/commit/7f087438e08e66a5663ae6f52868249cb5348659))\r\n* **vendor.viomi:** Raise zone count limit to 10 ([8130e24](https://github.com/Hypfer/Valetudo/commit/8130e24dc31be40d76a4f417ca8ceb7f40751de5))\r\n* Provide list of attachments supported by the model of robot ([fe65df3](https://github.com/Hypfer/Valetudo/commit/fe65df3696d2a0af608db27c54f32b49bcb88635))\r\n\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **mqtt:** MqttController default state should be disconnected ([137e630](https://github.com/Hypfer/Valetudo/commit/137e630147eadb06673d269920f29abed07c7dcf))\r\n* **networkadvertisement:** Disabling the Network advertisement multiple times in a row should not cause any issues ([789608f](https://github.com/Hypfer/Valetudo/commit/789608f8cc384692ad05c66223480a555843c729))\r\n* **ui:** Allow closing of ValetudoEvents even if there are a lot ([ec599b2](https://github.com/Hypfer/Valetudo/commit/ec599b2f7ed2b328f0ab801ac029902eec54e7fe))\r\n* **ui:** Fix auto empty dock control loading state ([7ec1e5d](https://github.com/Hypfer/Valetudo/commit/7ec1e5d62cd53c8829cb70bc46a0402b5a3306d6))\r\n* **ui:** Handle timers with invalid actions ([b467443](https://github.com/Hypfer/Valetudo/commit/b4674433c40a576cc4c51e97a7a6ea9aedfcf29a))\r\n* **ui:** use correct relative paths to allow hosting in a subdirectory ([6129ec5](https://github.com/Hypfer/Valetudo/commit/6129ec5f4282edf07de1a5173fcf3a88067fe151))\r\n* **vendor.dreame:** Fix 1C powersave state mapping ([fdb51e7](https://github.com/Hypfer/Valetudo/commit/fdb51e7945fd908dec498b8b0b90a272227daf47))\r\n* **vendor.roborock:** Don't update state for attachments that we don't have ([f27bbfd](https://github.com/Hypfer/Valetudo/commit/f27bbfd97f71fb5f4b0c6dea4c3be9cf8774d22d))\r\n* **vendor.roborock:** Fix manual control for roborock v1 ([abccee4](https://github.com/Hypfer/Valetudo/commit/abccee47dbdd8972431cad3873029c502a093928))\r\n* **vendor.roborock:** Fix obnoxious \"no error\" error event ([f3b4a54](https://github.com/Hypfer/Valetudo/commit/f3b4a548dffc3aa96c2ecdf37c063b73847b0d5e))\r\n* **vendor.roborock:** Remove confusing attachments that never get updated ([e4274d3](https://github.com/Hypfer/Valetudo/commit/e4274d3da8ba64d0bc31f9d7683a4f3fbf91c79a))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/65762409"
    }
  },
  {
    "version": "2022.03.1",
    "releaseTimestamp": "2022-02-25T23:43:51.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2022.03.1</h2></p>\r\n</div>\r\n\r\nOrdered segment cleanups via the UI, MQTT deduplication and a lot of internal refactoring\r\n\r\n## Ordered segment cleanup\r\n\r\nThe UI now tracks the order in which segments were selected, meaning that if your robots' firmware supports it, they will be cleaned in the order you've specified.\r\n\r\nIf supported, the order will be displayed as a roman numeral above the segment label triangle.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/155770812-180860d1-44f4-4531-a746-eff91e97e0cf.png)\r\n\r\n## MQTT\r\n\r\nThe MQTT connectivity feature now reports a state to the UI. Furthermore, it also collects some statistics.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/155770843-92204a3d-23e6-469f-b053-704ff2ec2347.png)\r\n\r\n\r\nBy watching those stats, you will notice that this release also causes less traffic, as most outgoing messages are deduplicated.\r\n\r\nInitially, I didn't want to do that as the solution proposed was to just store every payload in memory and then compare on each mqtt publish.\r\nThat would work, however it comes with a hefty ram overhead as you now have to constantly keep 300+ somewhat long string payloads in memory.\r\nWith each character taking up 2 byte, this approach isn't feasible with the ram budget we have (32 Mbyte or less).\r\n\r\nTo reduce the amount of ram required, we could use a hash function such as md5, however that would still be too much.\r\nAs they'd be saved as hex strings, that would mean 32 characters each with each character taking up 2 bytes, resulting in each pair of topic and payload using 128 byte or more.\r\n\r\nThus, instead we're now using 32-bit CRC32. With object keys being strings, I'd think that these pairs should use around 20 byte each.\r\nThe downside of CRC32 is that the risk of collisions is much higher. However, I highly doubt that that could actually happen in this application.\r\n\r\nTo save CPU time, which is also quite limited on our robots, the (in comparison) huge map data is not being deduplicated.\r\n\r\n## Misc\r\n\r\n- The system information page will now display the current robot firmware version if available\r\n- The UI will now prevent the user from configuring invalid MQTT topic names (containing spaces, # or +)\r\n- The UPnP/SSDP lib was dropped in favour of our own implementation, which should fix some unhandledRejections caused by the lib\r\n- The log viewer now doesn't scroll back down automatically if the user scrolled up\r\n- TotalStatistics should now also work for the Roborock S7\r\n- It is now possible to disable network advertisement (bonjour/mDNS and UPnP/SSDP) via the UI if you so desire\r\n- The nonsensical always-attached dustbin attachment has been removed\r\n- It is now possible to have 50% more virtual restrictions on roborock robots\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **ui:** Allow setting the order of segments cleaned if support by the robot ([9eec3b6](https://github.com/Hypfer/Valetudo/commit/9eec3b6200dee08d4094fdac47e9200e9585961e))\r\n* NetworkAdvertisementManager UI control ([bd5fa9c](https://github.com/Hypfer/Valetudo/commit/bd5fa9c1d156cab2b499952acb7664ebee554623)), closes [#1168](https://github.com/Hypfer/Valetudo/issues/1168)\r\n* **core:** Remove outdated VirtualWallCapability and RestrictedZoneCapability ([5e24783](https://github.com/Hypfer/Valetudo/commit/5e247835e3772ed57d445c8be82849bcedba6db6))\r\n* **core:** Remove SensorCalibrationCapability ([5b081a7](https://github.com/Hypfer/Valetudo/commit/5b081a78a4dbccf54ad2fb547daaa622ce8c8c7f))\r\n* **mqtt:** Collect runtime metrics and provide them via REST ([dcc1db4](https://github.com/Hypfer/Valetudo/commit/dcc1db4f86265be47242d2f836ba3ffac521ed67))\r\n* **ui:** Display firmware version if available ([e78e9b4](https://github.com/Hypfer/Valetudo/commit/e78e9b4e1dc84b7ce2b60adb36ec35675664ded0))\r\n* **ui:** Display MQTTClient status ([c54ebc8](https://github.com/Hypfer/Valetudo/commit/c54ebc8c1eae6c14a35247e7e55ce2bb2e0d0ccd))\r\n* **vendor.roborock:** Support S7 total statistics ([d1926a9](https://github.com/Hypfer/Valetudo/commit/d1926a9b33dfdbdf53f8b3b53ef0ee695c53c867))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **core:** Fix free memory reporting on kernels >= 3.14 ([dceea16](https://github.com/Hypfer/Valetudo/commit/dceea16f5a3fbc7b69ea938dd3c112e12a874019))\r\n* **miio:** Don't throw plain objects on error responses ([e84fe8c](https://github.com/Hypfer/Valetudo/commit/e84fe8c066b3ad3b7576405ee7d8cd8f17fd3d85))\r\n* **miio:** Fix RetryWrapper never handshaking on stale stamp ([326cb4b](https://github.com/Hypfer/Valetudo/commit/326cb4bafda8b558e8eff2937aa034d3ae25306a))\r\n* **mqtt:** Deduplicate outgoing messages ([b835336](https://github.com/Hypfer/Valetudo/commit/b835336089aa02430cdeb7e877353869fd3e363d))\r\n* **networkadvertisement:** Replace ssdp lib with custom implementation ([f5e505a](https://github.com/Hypfer/Valetudo/commit/f5e505ae3c04313237a0648e5a35d04b6af59ef6))\r\n* **ui:** Disallow whitespaces, + and # for mqtt topic customization ([8148736](https://github.com/Hypfer/Valetudo/commit/81487363a0158c643ce55c7d555790d02d35d48a))\r\n* **ui:** Make the logviewer only auto-scroll if it is already scrolled down ([3c24eba](https://github.com/Hypfer/Valetudo/commit/3c24eba7794b01188f8e0446c4b6dc73c23af96c))\r\n* **vendor.dreame:** Mapping passes can only be done by lidar-based robots ([411fab5](https://github.com/Hypfer/Valetudo/commit/411fab5496c9c2eba9f488d7d97a742073ddf3de))\r\n* **vendor.dreame:** Re-enable custom order segment cleanups and hope for the best ([744a4bb](https://github.com/Hypfer/Valetudo/commit/744a4bb8558e2c938c3b163b3916a6408478b23b))\r\n* **vendor.roborock:** Fix roborock virtual restrictions counting vertices incorrectly ([cc5e37b](https://github.com/Hypfer/Valetudo/commit/cc5e37b6d4e81987005760f867f2487c40435073)), closes [#1423](https://github.com/Hypfer/Valetudo/issues/1423)\r\n* **vendor.roborock:** Properly parse and handle lab_status and map_status ([e158ac4](https://github.com/Hypfer/Valetudo/commit/e158ac4b7fc58ad9ee06bbf4bb296d054afb77d9)), closes [#1424](https://github.com/Hypfer/Valetudo/issues/1424)\r\n* Remove nonsensical always-attached dustbin attachment ([b9bd959](https://github.com/Hypfer/Valetudo/commit/b9bd9599c9931940cc7536eaccbbe2f11f25e066))\r\n* SegmentIds should be strings ([6325045](https://github.com/Hypfer/Valetudo/commit/63250452dfeeaae0e477dc66060be3136df5a7c2))\r\n* SegmentIds should be strings pt2 ([a8d314d](https://github.com/Hypfer/Valetudo/commit/a8d314d2e8878c58a16c2fd4f58f5e866b4fcf85))\r\n* **ui:** Fix customOrder flag for segmentActions ([07c5281](https://github.com/Hypfer/Valetudo/commit/07c5281ae7b52571f49e0e8d553339cf01b6f450))\r\n\r\n\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/60521593"
    }
  },
  {
    "version": "2022.02.0",
    "releaseTimestamp": "2022-01-28T10:39:20.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2022.02.0</h2></p>\r\n</div>\r\n\r\nLots of UI changes and more polishing\r\n\r\n## Quirks\r\n\r\nThis release adds the quirks concept, which shall be understood as a catch-all and/or staging area containing vendor-specific toggles that don't fit the generic abstraction that is Valetudo (yet).\r\nThis should make it fairly easy to quickly implement (some of the) exciting new vendor features without jeopardizing the architecture of Valetudo in the long run.\r\n\r\nHere's an example taken from the Dreame Z10:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/151532264-ff6b848f-0c5a-4083-af92-d3bc29be77a0.png)\r\n\r\n\r\n## Settings\r\n\r\nRobot, Map and Connectivity settings have been reorganized/redone.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/151532305-e97a3534-3f8a-44bc-8d4d-dec5537d7c70.png)\r\n\r\n![image](https://user-images.githubusercontent.com/974410/151532320-456cda6f-b5f7-4104-95f5-4b258d0b576b.png)\r\n\r\n![image](https://user-images.githubusercontent.com/974410/151532335-d0a79b27-b1ae-4114-b5f2-e5f2311ed8e0.png)\r\n\r\n\r\nWi-Fi and NTP state display has been redone as well:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/151532430-07629c75-e112-4d8c-acb6-5138d0d6de3d.png)\r\n\r\n![image](https://user-images.githubusercontent.com/974410/151532445-ba2b34b4-6b25-4a22-9a7b-558054405b3f.png)\r\n\r\n\r\n## Quality of Life\r\n\r\nA _lot_ of help text sections and dialogs have been added all around the application to make usage of Valetudo even easier.\r\nThey should also answer a lot of common support questions, so make sure to read them before asking questions.\r\n\r\nFurthermore, all password fields have been updated to feature a plain-text-display toggle.\r\n\r\n\r\n## Total Statistics\r\n\r\nBecause displaying three numbers is boring, @ccoors had the great idea of adding gamification the total statistics feature.\r\nAfter some iteration on that idea, we've ended up with this:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/151532462-7843b526-9c81-4b7f-bffe-1165d7dd02c9.png)\r\n\r\n\r\nThere's also an overview of all achievements:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/151532488-d0cfc8d4-c477-4ed6-8d48-edcfe6d6bec7.png)\r\n\r\n\r\nI'm very happy with how this turned out. Now we just need to think of more achievements.\r\nIf you have any ideas, feel free to leave them down in the comments.\r\n\r\n\r\n\r\n## Nightly builds\r\n\r\nThere are now automated nightly builds, which you can install using the updater.\r\n\r\nAs this is meant for people willing to accept and capable of handling breakage, there is no UI toggle to switch to nightly builds.\r\nTo enable them, ssh into your robot and change the update provider to `github_nightly`.\r\n\r\n## Misc\r\n\r\n- Viomi consumables have been fixed by @adrez99\r\n- @schinken fixed local access via IPv6\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **core:** WifiScanCapability ([a4fe895](https://github.com/Hypfer/Valetudo/commit/a4fe895c9944ffe8fae6e621a87e2aa70e9aecde))\r\n* **ui:** Add general help ([ec298dc](https://github.com/Hypfer/Valetudo/commit/ec298dc2cf2d81ca40031dfae455abf490f9fcf8))\r\n* **ui:** Add help for dnd, voice packs and the updater ([84c8c04](https://github.com/Hypfer/Valetudo/commit/84c8c04657778795cb7e7acd76bbef001465ba3a))\r\n* **ui:** Add Map Management Help ([9d62c26](https://github.com/Hypfer/Valetudo/commit/9d62c26318ecda5d5a38e21333f56ac0ff1f70c6))\r\n* **ui:** Add quirks help ([77183ed](https://github.com/Hypfer/Valetudo/commit/77183ed3e63c94d30afbefc6d48cab8bf946b9f2))\r\n* **ui:** Add total statistics page ([#1330](https://github.com/Hypfer/Valetudo/issues/1330)) ([8fd0b2e](https://github.com/Hypfer/Valetudo/commit/8fd0b2eb3c59a5b949da8c9c6f0f4230886d48e6))\r\n* **ui:** Allow display of Wi-Fi passwords entered ([89624eb](https://github.com/Hypfer/Valetudo/commit/89624eb5b6c2b8091ab66821ebf1c3f82f119316))\r\n* **ui:** Allow newlines in confirmation dialog ([df2ee4f](https://github.com/Hypfer/Valetudo/commit/df2ee4f0ac0e209ac537a77705a860c5161f756b))\r\n* **ui:** Another achievement ([0ffbef4](https://github.com/Hypfer/Valetudo/commit/0ffbef4f3d64e1c50ae6663c277ef33d9c2e80ce))\r\n* **ui:** Extend map management help ([e1514bc](https://github.com/Hypfer/Valetudo/commit/e1514bcc59f8c0022aef588b58b10e2cc05c1ef9))\r\n* ValetudoWifiStatus  may contain a bssid ([86fe2f2](https://github.com/Hypfer/Valetudo/commit/86fe2f207c2f050ca7351c21bd736de4f2d5d27b))\r\n* **ui:** Allow display of entered passwords for mqtt and basic auth ([4e75531](https://github.com/Hypfer/Valetudo/commit/4e7553100abb4dba247fbb036a6539499c619b89))\r\n* **ui:** Disable edit map tap interaction while not docked to reduce confusion ([b68e444](https://github.com/Hypfer/Valetudo/commit/b68e44428b3c2669cae147c8c4f21bbfc9bc016d))\r\n* **ui:** Improve achievement badges ([7eea13e](https://github.com/Hypfer/Valetudo/commit/7eea13e84950d01c044bc69ef385b33908ee20df))\r\n* **ui:** Improve NTP client state display ([0a265a7](https://github.com/Hypfer/Valetudo/commit/0a265a7dce5468e2948a077bd7e6f364212a285b))\r\n* **ui:** More achievements ([892017e](https://github.com/Hypfer/Valetudo/commit/892017ea38c16eee3ac6bc52d8ff5bde76e87ab1))\r\n* **ui:** Move map-related features to map management page ([ea45f01](https://github.com/Hypfer/Valetudo/commit/ea45f01b6a597f43d6000318500936702c89e397))\r\n* **ui:** Move Wi-Fi settings to connectivity ([dff909c](https://github.com/Hypfer/Valetudo/commit/dff909cae688b2106cc526475247cf0659251e46))\r\n* **ui:** Provide an overview of all achievements ([381e3cd](https://github.com/Hypfer/Valetudo/commit/381e3cd4dab807b85d8066ca4aa9f8628fe599d6))\r\n* **ui:** Rename about page to system information ([ad1dd16](https://github.com/Hypfer/Valetudo/commit/ad1dd1608dc0e2668914d7ab7a2eb68cb6978163))\r\n* **ui:** Restructure connectivity settings ([bfe33e4](https://github.com/Hypfer/Valetudo/commit/bfe33e4d4d929741a1a3191559ae84343dbe9a61))\r\n* **ui:** Restructure robot settings ([5c71be4](https://github.com/Hypfer/Valetudo/commit/5c71be44eb4a9f30674af550e230590b203ea82d))\r\n* **ui:** Restructure routers and add about page ([e3a1f13](https://github.com/Hypfer/Valetudo/commit/e3a1f1303bb8693aea0a8ea7ffb32d8fd658110a))\r\n* **updater:** Add nightly builds ([d1a0d91](https://github.com/Hypfer/Valetudo/commit/d1a0d919a6fd7df93031bdb7da469b1b61cdbc13))\r\n* **vendor.dreame:** Add auto empty interval quirk ([1b6205a](https://github.com/Hypfer/Valetudo/commit/1b6205a467304bcd4c9ce32aa28721fe0fd377f5))\r\n* **vendor.roborock:** Add quirks ([7fc584a](https://github.com/Hypfer/Valetudo/commit/7fc584af029efbe2a7b8e063fb9659afa43d0955))\r\n* **vendor.viomi:** Add quirks ([#1369](https://github.com/Hypfer/Valetudo/issues/1369)) ([b369e4d](https://github.com/Hypfer/Valetudo/commit/b369e4d7a253bd668f354f179a878fd8ce9c0717))\r\n* QuirksCapability ([79deeb1](https://github.com/Hypfer/Valetudo/commit/79deeb14eb855e294f0b9d3197151e8af5cc03ce))\r\n* **webserver:** Allow IPv6 requests from own network ([#1342](https://github.com/Hypfer/Valetudo/issues/1342)) ([165deff](https://github.com/Hypfer/Valetudo/commit/165deff8e033b45ec1e507d4678833dbca8b22d4))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **mqtt:** Fix consumables not being polled by the autorefresh ([58d6267](https://github.com/Hypfer/Valetudo/commit/58d6267e3008c6637725ed7f531f07d182b01ddf)), closes [#1355](https://github.com/Hypfer/Valetudo/issues/1355)\r\n* **networkadvertisement:** Attempt to catch issues of the ssdp lib ([ee3154b](https://github.com/Hypfer/Valetudo/commit/ee3154bfdb6c5caadc22382e0e48e9a42a2df202))\r\n* **ui:** Allow refetching when there are zero quirks ([7f3ed2b](https://github.com/Hypfer/Valetudo/commit/7f3ed2b8b688ecf9f26436209625dda35e654b62))\r\n* **ui:** Allow user-selection of wifi IP addresses ([33c9470](https://github.com/Hypfer/Valetudo/commit/33c9470162ba4fe6ae2bbf5ba2de26ea08f1d47f))\r\n* **ui:** Allow user-selection of wifi IP addresses... again ([2bdcea4](https://github.com/Hypfer/Valetudo/commit/2bdcea4701b8828dfbcdde79aac12823ece07295))\r\n* **ui:** Disable updater buttons when busy ([f82ae1a](https://github.com/Hypfer/Valetudo/commit/f82ae1a0a114c3255c43d2700cab54a9f87067ff))\r\n* **ui:** Don't display updater warning if state is busy ([4d5c781](https://github.com/Hypfer/Valetudo/commit/4d5c7811b74c3a61f3eebaf1064bb18f6a1810a0))\r\n* **ui:** Don't provide the wifi configuration route if there is no wifi configuration capability ([82e954e](https://github.com/Hypfer/Valetudo/commit/82e954e2d072dcf7888aeef7eb732b78a73311f4))\r\n* **ui:** Fix about title ([67a9a05](https://github.com/Hypfer/Valetudo/commit/67a9a051c7d2071099a57a3a6dbf1e4fa101ca31))\r\n* **ui:** Fix display of text in conjunction with controls in Map Management ([1cc76c5](https://github.com/Hypfer/Valetudo/commit/1cc76c55f3c27be5f03e5a7cbfd6cc184ad40675))\r\n* **ui:** Fix logviewer timestamp display for chrome ([56f5ba0](https://github.com/Hypfer/Valetudo/commit/56f5ba08a9bc864eb20df9b17f109c0b1a89226e))\r\n* **ui:** Fix map management not using unique keys for all options ([2305b52](https://github.com/Hypfer/Valetudo/commit/2305b528be28351e3e02f6197ca88135dc95e64c))\r\n* **ui:** Fix menu drawer scrollbars ([4a6c9fa](https://github.com/Hypfer/Valetudo/commit/4a6c9faffcefba07277372a9172aa6f899d795ad))\r\n* **ui:** fix minor typo ([#1341](https://github.com/Hypfer/Valetudo/issues/1341)) ([77e07ec](https://github.com/Hypfer/Valetudo/commit/77e07ec04bb32407176ff184e706a4229cdffced))\r\n* **ui:** Properly implement newlines in ConfirmationDialog ([b8f8eb0](https://github.com/Hypfer/Valetudo/commit/b8f8eb0163b8b3c13b5a2e1bab27837b8ff90811))\r\n* **ui:** Sort total statistics data points ([a568c03](https://github.com/Hypfer/Valetudo/commit/a568c03afa0521779f40c4933935b5315a81bd24))\r\n* **ui:** use relativ paths to allow hosting in a subdirectory .. again ([3007dbb](https://github.com/Hypfer/Valetudo/commit/3007dbb1460596591199ece1d974c3b4e1db58e3))\r\n* **updater:** Add missing return statement ([f5e7451](https://github.com/Hypfer/Valetudo/commit/f5e7451a5877815a8871cdccdbf997f09b4b78ca))\r\n* **vendor.viomi:** Fix Viomi consumables ([#1367](https://github.com/Hypfer/Valetudo/issues/1367)) ([ccfe175](https://github.com/Hypfer/Valetudo/commit/ccfe175886ac41ff58f900de54657967a8f17337))\r\n* **webserver:** Fix missing doctype for error pages ([3d48611](https://github.com/Hypfer/Valetudo/commit/3d486114830eb69ba2f414aa67fdf4494cfefe3c))\r\n* **webserver:** Fix some endpoints never returning anything ([32c0f6a](https://github.com/Hypfer/Valetudo/commit/32c0f6ae922f71a8fd7ac5b035b9f5fffd1cdc8f))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/58174812"
    }
  },
  {
    "version": "2022.01.0",
    "releaseTimestamp": "2021-12-31T12:50:40.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2022.01.0</h2></p>\r\n</div>\r\n\r\nQuality of life improvements, bugfixes and more polishing. Also, Happy New Year :)\r\n\r\n## UI/UX Changes\r\n\r\n### Map Management\r\n\r\nThe map management feature has been restructured to be easier to understand especially for newcomers.\r\nFurthermore, there are now help texts available in the editor, which should answer common questions.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/147824285-2d9337b3-3a50-478a-ae2b-9f216fbcd544.png)\r\n![image](https://user-images.githubusercontent.com/974410/147824293-0c03affb-d343-4f6f-a5ba-4f939c56ec0b.png)\r\n![image](https://user-images.githubusercontent.com/974410/147824290-d1b5f4d2-e4aa-403a-b5a7-82461ec1a6ed.png)\r\n\r\n\r\n### Updater\r\n\r\nThe updater now auto-refreshes its state and provides more feedback.\r\nIt will also display the latest changelog if there's no update available.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/147824299-49d9aa54-b571-4544-84e9-143a30e5c545.png)\r\n\r\n\r\n### Misc\r\n\r\n- The UI now auto-refreshes if the backend version changed\r\n- Visual consistency has been improved\r\n- The title is now updated based on the page you're on which makes your browser history actually useful\r\n- Hovering over some unlabelled buttons/icons should now give you a tooltip clearing things up\r\n- You can now hover over the progress bars in the about page to get a tooltip for the value as well\r\n- Info boxes answering common questions have been added to the connectivity page\r\n- It should now be possible to use Valetudo in a sub folder of a reverse proxy again\r\n\r\n\r\n## MQTT Changes\r\n\r\n### Home Assistant 2021.12\r\n\r\nValetudo now **requires Home Assistant 2021.12 or newer** as that release introduced the `object_id` field for\r\nMQTT autodiscovery. This allows us to influence the `entity_id` so that the days of `camera.map_data_3` are gone.\r\n\r\nYou might have to delete the device in HA and let it be rediscovered for these changes to be applied.\r\n\r\nIt is worth it though:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/147824304-96a6d2c9-3ff8-4b6a-965a-dc3ff599ab9f.png)\r\n\r\n\r\n### Bugfixes\r\n\r\nMultiple issues regarding MQTT stability and reliability have been identified and fixed with this release, hopefully\r\nsolving connectivity issues in situations with bad Wi-Fi signal coverage.\r\n\r\n\r\n## External Access\r\n\r\nValetudo now attempts to block access from public-routable IPs to its REST-Interface by default.\r\nThis was necessary, because publicly-accessible Valetudo instances kept appearing \r\n<a href=\"https://www.shodan.io/search?query=http+X-Valetudo-Version%3A\" rel=\"noopener\" target=\"_blank\">on Shodan.io</a>.\r\n\r\nIt is certainly no foolproof solution, but it might at least help a little.\r\nYou can also disable the filter if you absolutely have to, however I'd strongly recommend not doing that.\r\n\r\n## Misc\r\n\r\nAs it turns out, nodes `os.getNetworkInterfaces()` does not return all network interfaces, which led to the unique\r\nsystem identifier randomly changing depending on whether or not the robot had an IP address.\r\nThis has been fixed by the use of the mighty `sysfs`.\r\n\r\nMoreover, Valetudo now polls the network state every 30s in an attempt to catch network changes and restart\r\nthe network advertisement so that the companion app doesn't display `192.168.5.1` right after provisioning.\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **core:** Remove DebugCapability ([78c84de](https://github.com/Hypfer/Valetudo/commit/78c84ded4eef1ac3b9a3e0d66ef88ebd5d44c19f))\r\n* **ui:** Add hover labels to system ram and load information ([62ed252](https://github.com/Hypfer/Valetudo/commit/62ed252968b97b72662a4a6622f2c0c75bdf2b5b))\r\n* **ui:** Add info boxes answering common questions to the connectivity settings page ([9eae3e3](https://github.com/Hypfer/Valetudo/commit/9eae3e393dda0a7376be79b5b6cdc81c9fc0b27e))\r\n* **ui:** Add link to the docs ([88b810c](https://github.com/Hypfer/Valetudo/commit/88b810c1b454c637c72aa51ab5015f7162e9812a))\r\n* **ui:** Automatically refresh the page when the backend version changed ([905ada1](https://github.com/Hypfer/Valetudo/commit/905ada104441c2283038c4a963a2e197bf511af1))\r\n* **ui:** Change infobox icon ([a82e1df](https://github.com/Hypfer/Valetudo/commit/a82e1df022395e109ddb5ea207be652ce93565e0))\r\n* **ui:** Consolidate paths to a single svg ([82bc46b](https://github.com/Hypfer/Valetudo/commit/82bc46b9e157df21490ad5009beae6277520b564))\r\n* **ui:** Improve first-time usability by adding titles to buttons and more minor changes ([6126718](https://github.com/Hypfer/Valetudo/commit/612671809d2f8ce8018866b2ca8257b34b1d1bbf))\r\n* **ui:** Improve segment edit help ([17e1d5f](https://github.com/Hypfer/Valetudo/commit/17e1d5ffaa0d938317699b89a2244541dd9dad14))\r\n* **ui:** Improve visual consistency ([006b94b](https://github.com/Hypfer/Valetudo/commit/006b94b1c47cbe6376d0340d2c7c0ae82fc26341))\r\n* **ui:** More space for mobile ([6a6ba65](https://github.com/Hypfer/Valetudo/commit/6a6ba65ce7d7d9c4629d39ef9c61ee6e685679bc))\r\n* **ui:** Rework map management ([4f51935](https://github.com/Hypfer/Valetudo/commit/4f51935fe1ea55921c81080c33918355807e23fe))\r\n* **ui:** Use non-swipable drawer for better performance ([25298a0](https://github.com/Hypfer/Valetudo/commit/25298a05ead114dca93c8e4e3b4b39e623838f8d))\r\n* **updater:** Display changelog of latest release when in noUpdateRequired state ([ce0c675](https://github.com/Hypfer/Valetudo/commit/ce0c675eca5548b7bb1fc55a9e2fc40290ce1bb3))\r\n* **updater:** Introduce busy state to provide better user feedback ([4e9ed3d](https://github.com/Hypfer/Valetudo/commit/4e9ed3d0b38a225bb1a93a5d32dee4686b04382b))\r\n* **webserver:** Attempt to block external access to valetudo ([10b1662](https://github.com/Hypfer/Valetudo/commit/10b1662f94d719d03b59c29bd51ab440b7d616dc))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **updater:** fix(updater): Use busy state flag instead of busy state ([d122efcb](https://github.com/Hypfer/Valetudo/commit/d122efcb53f301b124f182ef471e3f9e23c5771b))\r\n* **core:** Use sysfs to reliably determine the unique system identifier in all network conditions ([8d74825](https://github.com/Hypfer/Valetudo/commit/8d74825f4dd8ec3a8414259c3da8671efc694f36))\r\n* **mqtt:** Don't try to publish anything if there is no mqtt connection ([9051ac0](https://github.com/Hypfer/Valetudo/commit/9051ac04156c061f84e50e5e741ab7e65fc8431c))\r\n* **mqtt:** Fix mqtt getting stuck forever requiring a restart ([42a5613](https://github.com/Hypfer/Valetudo/commit/42a5613d19cd46bba0e5243f656d062f8a4d4415))\r\n* **mqtt:** Force disconnect if it takes longer than 1500ms ([ced9ee1](https://github.com/Hypfer/Valetudo/commit/ced9ee1b3312489c0c937723ba8744c21264f540))\r\n* **mqtt:** More .disconnect() fixes ([322efcc](https://github.com/Hypfer/Valetudo/commit/322efcc7cad8e1ae67126ded81b2d327c50bea8d))\r\n* **networkadvertisement:** Attempt to watch for network state changes to fix advertisement after initial provisioning ([7a2c3d1](https://github.com/Hypfer/Valetudo/commit/7a2c3d1a8c32d88562bc2dacec9671e1e756947a))\r\n* **ui:** Redraw map on visibilityState change to fix map not being updated if the tab was invisible for too long ([1c86152](https://github.com/Hypfer/Valetudo/commit/1c861521430e5df4640d614d75dcaa6def09124c))\r\n* **ui:** use relativ paths to allow hosting in a subdirectory ([1e73947](https://github.com/Hypfer/Valetudo/commit/1e73947d2a16bb831bc14d85ebeedb242b7714ef))\r\n* **vendor.dreame:** Ignore more irrelevant property updates ([9e4e202](https://github.com/Hypfer/Valetudo/commit/9e4e2028c69c9a37f661a4c90904311d65c9e90e))\r\n* **webserver:** Handle aborted connections gracefully ([b3e8024](https://github.com/Hypfer/Valetudo/commit/b3e802479e5068df25c951b2e148655c8f7448fa))\r\n\r\n\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/56229531"
    }
  },
  {
    "version": "2021.12.1",
    "releaseTimestamp": "2021-12-09T13:08:53.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.12.1</h2></p>\r\n</div>\r\n\r\nMap data format changes, quality of life improvements and bugfixes.\r\n\r\n## Changes in 2021.12.1\r\n\r\nAs expected, something would go wrong with the map data format change.\r\nThis is a bugfix release, so 98% of the previous changelog still apply.\r\n\r\n\r\nIn 2021.12.0, if you have rooms that aren't rectangular, it might happen that the triangle to select it vanishes, leading to you being unable to trigger a segment cleanup using the UI.\r\nThis happened because in those cases, the UI calculates the median pixel coordinates to properly place the triangle.\r\nThis value isn't calculated by the backend, because it is an expensive operation, and we're both RAM and CPU-limited there.\r\n\r\nTo calculate the median, the UI needs the decompressed pixel coordinate format.\r\nThis works exactly once during the initial render, because of the MapLayerRenderer doing the pixel decompression on the map passed by reference to it.\r\n\r\nAs soon as the WebWorker is available however, this doesn't happen anymore, as the worker only receives a copy of the data.\r\nThis means that there are now 0 pixels as far as the SegmentLabel is concerned, leading it to be placed at coordinates `[NaN,NaN]`.\r\nSince testing is done locally without constant map updates, everything seemed fine during development.\r\n\r\n\r\nAnother thing discovered due to this bug was that the GithubValetudoUpdateProvider did not filter out pre-releases or drafts.\r\nNot a big issue though as it just requires you to update twice in a row.\r\n\r\nAnyways, on with the 2021.12.0 changelog:\r\n\r\n## Map data format changes\r\n\r\nThis release features the first version increment of the ValetudoMap data format.\r\nInitially, in version 1, pixel data such as walls or floor were stored as a huge array of coordinate pairs:\r\n`[x0, y0, x1, y1, ...]`. This was not a very efficient way of storing that data as most of it is redundant.\r\n\r\nThis resulted in map files that were over 1 MiB in size being pushed to your browser every 3 seconds.\r\n\r\nTo combat this, some thought was put into how the data is stored.\r\nIf you have a row of pixels, all of them will have the same y-coordinate, meaning that you only have to store that once.\r\nPeople already figured that out [in the 60s](https://en.wikipedia.org/wiki/Run-length_encoding).\r\n\r\nWith Map V2, pixels are stored as `[xStart0, y0, count0, xStart1, y1, count1, ...]` where `[xStart, y]` is the starting point and `count` represents additional pixels with the same y-coordinate to the right.\r\n\r\nThis resulted in V2 map files using between 5% and 15% of the size of the equivalent V1 map.\r\nThe huge testfile map for example was compressed from 847 kB to 75 kB.\r\n\r\n\r\nWhile this is a **breaking change**, the breakage actually isn't that big of a change as V2 can easily be converted back to V1.\r\nIn fact, running `JSON.parse()` on a V2 map and then converting it to a V1 one in memory is more than twice as fast as running `JSON.parse()` on a V1 map.\r\n\r\nSince this change drastically reduces the traffic caused by live maps, I expect to see general usability and reliability\r\nimprovements in situations where the Wi-Fi reception isn't that great.\r\n\r\n\r\n## LogViewer\r\n\r\nThe LogViewer has been greatly improved and now features a structured and color-coded view of your log.\r\n\r\n[<img src=\"https://user-images.githubusercontent.com/974410/144744519-5ba963b9-6409-4e04-95d9-e73caf55021c.png\" width=700>](https://user-images.githubusercontent.com/974410/144744519-5ba963b9-6409-4e04-95d9-e73caf55021c.png)\r\n\r\nYou can use the text filter at the top to either filter for the loglevel or the message contents.\r\nJust start typing.\r\n\r\n## UI Help\r\n\r\nBoth consumables and timers now feature a help button, which shall explain how to use these features.\r\n\r\n[<img src=\"https://user-images.githubusercontent.com/974410/144744625-d113d697-e4e1-4f77-a3a2-596ad88131a5.png\" width=700>](https://user-images.githubusercontent.com/974410/144744625-d113d697-e4e1-4f77-a3a2-596ad88131a5.png)\r\n\r\n\r\n## Misc\r\n\r\n- Map reset on newer roborock models should now be fixed thanks to @supersmile2009\r\n- Zooming the map should now work much better if you zoom via a touchpad or trackpoint instead of a mousewheel\r\n- MQTT current statistics now have a unit_of_measurement in HA\r\n- Lowmem builds now have a reduced map poll rate to reduce memory pressure\r\n- Valetudo now manages its logfile size to prevent it from growing indefinitely\r\n\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **logger:** Automatically clear the logfile when it gets too large ([c0698b4](https://github.com/Hypfer/Valetudo/commit/c0698b43dda5144d7d0c2c58d9336a1c0662cc65))\r\n* Reduce map polling interval for lowmem hosts ([fcf94ce](https://github.com/Hypfer/Valetudo/commit/fcf94ceeb60f9b46e25bfa04d2e4e88ac2a25926))\r\n* **ntpClient:** Improve log messages ([8880bbf](https://github.com/Hypfer/Valetudo/commit/8880bbfc7ed79969a61c6d6e51f7023c23d7561e))\r\n* **ui:** Add help button + modal to consumables view ([d1388f1](https://github.com/Hypfer/Valetudo/commit/d1388f124dae0046d2bee49345d0513441926f21))\r\n* **ui:** Add timers help ([c864170](https://github.com/Hypfer/Valetudo/commit/c864170d44c2b686394bb6d770cff937e8a9de43))\r\n* **ui:** Implement LogViewer component ([1b96ae0](https://github.com/Hypfer/Valetudo/commit/1b96ae06c8a74acbc9a6fa03cf941736520e30d0))\r\n* **ui:** Remove obsolete about > github release info ([253d9f9](https://github.com/Hypfer/Valetudo/commit/253d9f99b0965859705c52ffae9483c381d49ad7))\r\n* **ui:** Swap Manual control cw & ccw rotation button ([44eab06](https://github.com/Hypfer/Valetudo/commit/44eab06eadcd57c8c9b3784bc6f4c7a6dbea58e8))\r\n\r\n### Bug Fixes\r\n\r\n* **ui:** Automatically refresh the updater state ([596dc06](https://github.com/Hypfer/Valetudo/commit/596dc067a6e77d908e3dc11b3e60aeab1e72bd07))\r\n* **ui:** Transparently decompress the v2 map data in the api client ([0bcb974](https://github.com/Hypfer/Valetudo/commit/0bcb974fd9c1ffa8c164b494899ef9c9e1735091)), closes [#1262](https://github.com/Hypfer/Valetudo/issues/1262)\r\n* **updater:** Ignore github release drafts and prereleases ([ad97a14](https://github.com/Hypfer/Valetudo/commit/ad97a146b0989f7caf21c3b834849aca75b9bdc3))\r\n* **ui:** Try avoiding bright flashes on initial loading ([f84a51d](https://github.com/Hypfer/Valetudo/commit/f84a51dc7c09ec4a7cb19e40e3889544375af58a))\r\n* Fix log sse endpoint ([fd6f0e2](https://github.com/Hypfer/Valetudo/commit/fd6f0e2d34ebc2f9de4aa5b23da2fa8ec2e4d630)), closes [#1256](https://github.com/Hypfer/Valetudo/issues/1256)\r\n* **mqtt:** Fix unit_of_measurement for current statistics and consumables ([7f052dc](https://github.com/Hypfer/Valetudo/commit/7f052dc3f64905afd69e35de217cd390377e6ce2))\r\n* **ntpClient:** Delay initial ntp sync to wait for valetudo to start up properly ([727af04](https://github.com/Hypfer/Valetudo/commit/727af04ab54d007c21a3c6ac270036611280e112))\r\n* **ui:** AppBar and menu should not be user-selectable ([69754b7](https://github.com/Hypfer/Valetudo/commit/69754b7204efe81ba147539a04630d644d0e07f4))\r\n* **ui:** Cleanup unused code ([c050940](https://github.com/Hypfer/Valetudo/commit/c05094011540c46737e7829532a319756255b2f3))\r\n* **ui:** Fix map zoom behavior for trackpoint and trackpad scroll zoom ([ca94600](https://github.com/Hypfer/Valetudo/commit/ca9460095eb6e4946f7653328667e8df60c678dc))\r\n* **ui:** Updater changelog should stay in its constraints ([5d815bf](https://github.com/Hypfer/Valetudo/commit/5d815bf98f334b9f40faecaf00f918bb6fecaacb))\r\n* **updater:** Ensure that there is enough space besides process.argv0 to store the new binary ([c298e98](https://github.com/Hypfer/Valetudo/commit/c298e9833cc6dcb2457a52b986daa8f2e81a8850))\r\n* **vendor.dreame:** Fix wrong segment iteration count ([9fd9c17](https://github.com/Hypfer/Valetudo/commit/9fd9c1723e0329b76b89e84cca108cc117a2a736))\r\n* **vendor.dreame:** There are actually no firmware limits for virtual restrictions ([8a8b536](https://github.com/Hypfer/Valetudo/commit/8a8b536b2eb126b9604b58e58cf196824da63be1))\r\n* **vendor.roborock:** Fix resetting incomplete map on Roborock. Detect and reset current map slot. ([#1252](https://github.com/Hypfer/Valetudo/issues/1252)) ([ba86057](https://github.com/Hypfer/Valetudo/commit/ba86057ba7946ee90c6ee7408ca446de56d23136))\r\n* Fix CurrentStatistics UI refresh ([93249ad](https://github.com/Hypfer/Valetudo/commit/93249ad142d4879ea967898f26905645af1c4f2b))\r\n* **ui:** Fix LogViewer overflow-wrap ([4799027](https://github.com/Hypfer/Valetudo/commit/4799027a42e6f5216cb748c75b88b1291a863335))\r\n\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/54959037"
    }
  },
  {
    "version": "2021.11.1",
    "releaseTimestamp": "2021-11-21T11:43:51.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.11.1</h2></p>\r\n</div>\r\n\r\nBugfixes, polishing, two minor breaking changes and new features.\r\nDon't forget: If you're running Valetudo 2021.11.0, you can now use the integrated updater :)\r\n\r\n## UI\r\n\r\n### Polishing\r\n\r\n- Controls in the UI were slightly rearranged/reworked.\r\n- The mobile controls drawer now works slightly different and more importantly more reliably with better performance (+ 50kb less bundle size).\r\n- There's a neat loading splashscreen, which you should only see for longer than a second if your Wi-Fi sucks\r\n\r\n![image](https://user-images.githubusercontent.com/974410/142760316-4af4fd83-79dd-4c42-857f-fa71ef2d2bc2.png) ![image](https://user-images.githubusercontent.com/974410/142760318-2b74c894-0572-4a55-8c71-6a655660f081.png)\r\n\r\n\r\n### Provisioning\r\n\r\nThe UI now checks if the robot is connected to a Wi-Fi network and if not opens a special provisioning page.\r\nIt's pretty neat and also fixes the issue of Dreames not being provisionable with the new UI.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/142760331-ee5a4031-c692-49be-9ad8-4144f35bb5e0.png)\r\n\r\n\r\n## Backend\r\n\r\n### CurrentStatisticsCapability\r\n\r\nStatistics related to the current (or most recent) operation of the robot are now back.\r\nYes, they are also being published to MQTT. Stop asking.\r\n\r\nData is published to MQTT as machine-readable (seconds for runtime, cm for the area) as it is meant to build automations with it.\r\nUsing cm instead of m saves us from having to deal with floats.\r\n\r\n### TotalStatisticsCapability\r\n\r\nMore importantly, you can now get total statistics from your robot. \r\n\r\nDepending on your model those can be\r\n\r\n- Total operation count\r\n- Total runtime\r\n- Total area\r\n\r\nThis isn't available via the UI yet as it is yet TBD how to do that.\r\nMaybe have like badges, achievements or a rank system?\r\nMaybe have random trivia related to the numbers? (e.g. having cleaned 0.0001% of the Saarland)\r\n\r\nFeel free to leave your input in the comments. ~~Like, subscribe and click the bell icon~~\r\nIf you're good with graphics design, something like e.g. a Corporal IV vacuum robot badge would be a great contribution.\r\n\r\n## Zeroconf hostname changes\r\n\r\nBy actually reading the relevant RFCs, we've discovered that `valetudo_something.local` is not a valid bonjour hostname as the `_` is illegal.\r\nWhile it does seem to work in most setups, it might cause problems in some, which is why starting with this release, Valetudo will use an RFC-compliant hostname: `valetudo-something.local`.\r\n\r\nPlease **update your bookmarks** if you were using any.\r\n\r\n\r\n## MQTT\r\n\r\n### Home Assistant 2021.11 MQTT Changes\r\n\r\nValetudo 2021.11.1 makes use of new features introduced in Home Assistant 2021.11 (namely `configuration_url` and `entity_category`).\r\nThis means that **Home Assistant >= 2021.11 is now required** if you want to use it with Valetudo.\r\n\r\nYou might also have to delete your Valetudo device in HA and let it get rediscovered so that the changes are applied properly.\r\n\r\nIt now looks like this:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/142760339-aa5b2314-692d-4167-9689-cec21f718924.png)\r\n\r\n\r\n### Possible MQTT OOM fixes\r\n\r\nWe have received unconfirmed, unsubstantiated and possibly falsified reports of Valetudo going OOM related to Wi-Fi connectivity issues and the MQTT interface.\r\n\r\nTo combat this, Valetudo now drops any outgoing MQTT message if there are more than 1 MiB of outgoing messages buffered. This may or may not ever happen.\r\nIf you see a warning in your log related to this, please report back. I have not been able to reproduce this.\r\n\r\n### Homie Consumables\r\n\r\nHome consumable durations are now reported as an int. This should fix issues with OpenHab.\r\n\r\n## Bugfixes\r\n\r\n### Dreame paths\r\n\r\nDreame paths now parse to multiple path map entities instead of a single one, which fixes the visual with lines going straight across the map connecting the previous path to the next one.\r\nConsumers of the Valetudo map data might have to be updated to properly display multiple path entities.\r\n\r\n### 1C-related fixes\r\n\r\nI've bought a Dreame 1C to do some QA, which led to a few fixes.\r\nI'm now quite happy with the current state of its implementation in Valetudo.\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **core:** CurrentStatisticsCapability ([8e4e183](https://github.com/Hypfer/Valetudo/commit/8e4e1839c217cc081f3172f227e935c2dc616bf1))\r\n* **core:** CurrentStatisticsCapability & TotalStatisticsCapability properties ([4fc9df2](https://github.com/Hypfer/Valetudo/commit/4fc9df271af4dbb9a9c1841d5f23a292d8cd0af3))\r\n* **core:** Introduce ConsumableMonitoringCapability properties and remove mqtt consumables hack ([a998ee1](https://github.com/Hypfer/Valetudo/commit/a998ee1eeeba2fd808c797bed719933d85922252))\r\n* **core:** TotalStatisticsCapability ([55b6696](https://github.com/Hypfer/Valetudo/commit/55b6696ecfb7f6d86b34da2e9e37b07287f8ef68))\r\n* **MockRobot:** Add MockCurrentStatisticsCapability + fix MockConsumableMonitoringCapability ([bda0b1a](https://github.com/Hypfer/Valetudo/commit/bda0b1adc54c8b651a3d23db8a4dc4638b460e48))\r\n* **mqtt:** Homie consumables should always be int ([c39ad93](https://github.com/Hypfer/Valetudo/commit/c39ad9380fc1d4cf752a3d95f0f57512e608c64f))\r\n* **mqtt:** Limit outgoing message buffer size to prevent OOM situations ([1a74f91](https://github.com/Hypfer/Valetudo/commit/1a74f9114de877f01b728e281b843e8459100b0f))\r\n* **mqtt:** Publish current statistics to mqtt ([102a078](https://github.com/Hypfer/Valetudo/commit/102a07890fe0a13efbda8b568b177fa4940478be))\r\n* **ui:** Add Valetudo loading splash ([a7ca33c](https://github.com/Hypfer/Valetudo/commit/a7ca33c845fa1e32d1a217115e48cd534c38b7bb))\r\n* **ui:** Collapse preset selection controls ([4f8aaec](https://github.com/Hypfer/Valetudo/commit/4f8aaec2f43b9e1a3bb21df88083b80509652fde))\r\n* **ui:** Display current statistics ([0fbc182](https://github.com/Hypfer/Valetudo/commit/0fbc182b0998cf1b3804b52ef24ee5d2d14c1b21))\r\n* **ui:** Slightly decrease required zoom level for segment label text ([08209a3](https://github.com/Hypfer/Valetudo/commit/08209a3164156db6e5e3ba340342bfbbf75bd7e3))\r\n* **vendor.dreame:** Total and current statistics for the 1C ([c1a51e9](https://github.com/Hypfer/Valetudo/commit/c1a51e916a9d123fcd6f9621eff02b645f79d702))\r\n* Provision Wizard thingy ([a6f6ded](https://github.com/Hypfer/Valetudo/commit/a6f6dedc851d6852e7b25ba1dc5222f3130ef210))\r\n* **ui:** Reorder state display ([828e54d](https://github.com/Hypfer/Valetudo/commit/828e54da624d2e00f500499e3497867fdb2ad6eb))\r\n* **ui:** Replace bottom sheet with simpler mobile controls ([17ff7ec](https://github.com/Hypfer/Valetudo/commit/17ff7ecb1105d9904f382a15b92dd5a6b988dd1f))\r\n* **vendor.dreame:** DreameCurrentStatisticsCapability ([656a19e](https://github.com/Hypfer/Valetudo/commit/656a19ee39f1411bb962e61077486d9336dd79b5))\r\n* **vendor.dreame:** DreameTotalStatisticsCapability ([4bb9342](https://github.com/Hypfer/Valetudo/commit/4bb934208ff52ad7fc1f42b82e5046362353ab6a))\r\n* **vendor.roborock:** RoborockCurrentStatisticsCapability ([93aa77b](https://github.com/Hypfer/Valetudo/commit/93aa77b09b7924baf5fce594d6455f4a5f51837e))\r\n* **vendor.roborock:** RoborockKeyLockCapability ([#1222](https://github.com/Hypfer/Valetudo/issues/1222)) ([02e155c](https://github.com/Hypfer/Valetudo/commit/02e155cec954cc75e41c5fcbf8ebe37acffb4c37))\r\n* **vendor.roborock:** RoborockTotalStatisticsCapability ([e0cbbff](https://github.com/Hypfer/Valetudo/commit/e0cbbff7470426119dd1eff6bde064a9387209b5))\r\n* **vendor.viomi:** ViomiCurrentStatisticsCapability ([9dd1091](https://github.com/Hypfer/Valetudo/commit/9dd1091cbc7a63ac7c0f61b40bc73abd026572bc))\r\n* **webserver:** Add 404 page ([8f5095c](https://github.com/Hypfer/Valetudo/commit/8f5095cac124c0ee0a6b8cdece07223c3374c51f))\r\n\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **mqtt:** Attempt to mitigate problems related to connectivity issues ([cf0f2d6](https://github.com/Hypfer/Valetudo/commit/cf0f2d691017ac69635d17f04062c260ebf62091))\r\n* **mqtt:** homie.durationsAsInteger should not be a breaking change ([bbd918a](https://github.com/Hypfer/Valetudo/commit/bbd918ac35530c0a7a8e8b684ebbe05967506bfc))\r\n* **ui:** Align preset selection labels with icons ([c6803f6](https://github.com/Hypfer/Valetudo/commit/c6803f6e2d5a60172d945bd62ab47badd679d234))\r\n* **ui:** Attachment buttons should be disabled ([922572a](https://github.com/Hypfer/Valetudo/commit/922572a779e0e1402ca53bb3e9b8a1c82605ea70))\r\n* **ui:** Fix CurrentStatistics trying to map something that isn't an array ([4d6f3d8](https://github.com/Hypfer/Valetudo/commit/4d6f3d869202288fb48bc50ee38d124c611fac78))\r\n* **ui:** Fix mobile control scrolling ([6264400](https://github.com/Hypfer/Valetudo/commit/6264400a473b36aff9f5409a5e157de536389e6d))\r\n* **ui:** Only check for provisioning once ([6bd0480](https://github.com/Hypfer/Valetudo/commit/6bd0480d8d40600aa5f438d060a21b2ba775925a))\r\n* **ui:** Only regular mouse clicks should interact with the map ([d452d88](https://github.com/Hypfer/Valetudo/commit/d452d88206afafbf4017138fa8b52edd38f1f70d))\r\n* **ui:** Preset selection labels should not be user selectable ([965a061](https://github.com/Hypfer/Valetudo/commit/965a0610c2dd73e028f944ed3a49a5e3c507d7e6))\r\n* **ui:** Swap presetSelection open/close icons ([380109b](https://github.com/Hypfer/Valetudo/commit/380109baa7bc6abfb06169eaeac036a7235af005))\r\n* **ui:** The whole controls body should not be user-selectable ([861f15f](https://github.com/Hypfer/Valetudo/commit/861f15f6da3633c266f0fbca8471193642b8ae57))\r\n* **vendor.dreame:** 1C shall ignore persistent map property updates ([5744346](https://github.com/Hypfer/Valetudo/commit/5744346272bf443ca734da77c5af938a559d314b))\r\n* **vendor.dreame:** Assume that we're in the docked state if we're charging on the 1C ([c73e062](https://github.com/Hypfer/Valetudo/commit/c73e06207c098deae3e596de135c5e2cbf50f4da))\r\n* **vendor.dreame:** Fine-tune 1C manual control ([72614e2](https://github.com/Hypfer/Valetudo/commit/72614e29977297078cf37425be361ad5310aad07))\r\n* **vendor.dreame:** Fine-tune manual control ([cc267c7](https://github.com/Hypfer/Valetudo/commit/cc267c75fe02178343cbddd43099ff59cfe8b16f))\r\n* **vendor.dreame:** Fix Dreame1CManualControlCapability ([9c85ca5](https://github.com/Hypfer/Valetudo/commit/9c85ca5f8c09dc5e1371f4b805767a6bec54175c))\r\n* **vendor.dreame:** Properly parse path data to multiple paths ([e083af2](https://github.com/Hypfer/Valetudo/commit/e083af2759f37706cda1e45a0b083b0782112f3b))\r\n* **vendor.dreame:** Remove capabilities for models that don't support them ([0d6d6ad](https://github.com/Hypfer/Valetudo/commit/0d6d6ad3ad44bdadb9ceea830652e8e742487776))\r\n* **vendor.dreame:** The 1C does not support multiple iterations for segment cleanups ([2d35bd9](https://github.com/Hypfer/Valetudo/commit/2d35bd9a0f00f52f9e0a67dae5f31d50e7a87cb3))\r\n* **vendor.viomi:** Fix ViomiPersistentMapControlCapability ([#1218](https://github.com/Hypfer/Valetudo/issues/1218)) ([80d7bb2](https://github.com/Hypfer/Valetudo/commit/80d7bb2bd91377d1c06a0c6afa4a262d0b7511e7))\r\n* Fix LinuxWifiConfigurationCapability not_connected state reporting ([25271f2](https://github.com/Hypfer/Valetudo/commit/25271f24c95976bae9b201ff1a6d2625c3e643a1))\r\n* **vendor.roborock:** RoborockSpeakerVolumeControlCapability.getVolume() should return a number ([32898d1](https://github.com/Hypfer/Valetudo/commit/32898d1cd27b3498f00e6dd4d67c2de09d0ec1ed))\r\n* **vendor.viomi:** Fix volume control ([0269182](https://github.com/Hypfer/Valetudo/commit/0269182f5e94d055d908b9c16e1524ef5a9f949d))\r\n* **webserver:** try/catch for SpeakerVolumeControlCapabilityRouter ([5cb7c5a](https://github.com/Hypfer/Valetudo/commit/5cb7c5ac3c09c9138ac11316aff3c7dcfa22fde1))\r\n* Nested assign configuration defaults + don't persist if there are no changes to persist ([b12c452](https://github.com/Hypfer/Valetudo/commit/b12c452b4d693326d0ebec81bf6b1145c8ca9de5))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/53791376"
    }
  },
  {
    "version": "2021.11.0",
    "releaseTimestamp": "2021-10-24T11:41:55.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.11.0</h2></p>\r\n</div>\r\n\r\nLikely the most important release of the year.\r\n\r\n## Recap 0.6.1 to 2021.11.0\r\nApparently, Valetudo 0.6.1 was released only a bit more than a year ago, but tbh it feels like an eternity.\r\nSo much has changed since then. The iteration speed of the project has been insane in the last months.\r\nAs we've now finished most if not all of the huge tasks, I expect things to slow down a little.\r\n\r\nHere's a quick recap of what happened since 0.6.1:\r\n\r\n- Complete core rewrite to easily support multiple vendors and different robots\r\n- A proper REST-API documented with Swagger UI\r\n- Complete MQTT rewrite to support Home Assistant as well as Homie\r\n- Easy map display in Home Assistant via MQTT and the custom lovelace valetudo map card\r\n- Complete UI rewrite based on a proper UI framework\r\n- Support for all relevant features of the robots\r\n- Support for autodiscovery of Valetudo-enabled robots via mDNS and SSDP\r\n- Support for Dreame-made robots\r\n- An [android companion app](https://valetudo.cloud/pages/companion_apps/valetudo_companion.html) that makes use of said autodiscovery feature\r\n- [Valeronoi](https://valetudo.cloud/pages/companion_apps/valeronoi.html): A companion app that generates Wi-Fi signal strength maps using Valetudo\r\n- An updater functionality\r\n- [Proper docs](https://valetudo.cloud/)\r\n- General polishing. A lot of it\r\n\r\n\r\n## Default new UI\r\n\r\nStarting with this release, the new react-based UI introduced by @jomik with large contributions by @ccoors is now the default.\r\n\r\nThe existing map renderer was ported to react with a few quality of life improvements:\r\n\r\n- You can now specify an iteration count when cleaning segments or zones\r\n- Layers are now sorted, meaning that walls will always be on top. This solves some visual issues of vSlam-based devices\r\n- Adding a new zone/virtual wall/etc. will now spawn it in the middle of your viewport \r\n- Map segment labels now attempt to actually be inside the segment they're for. This fixes issues with cornered hallways. No more stray triangles\r\n- Editing the map will now refresh your current view instead of navigating back\r\n- Rendering has been partly moved to a webworker for improved performance\r\n\r\nSpeaking of navigating back: Given that the new UI is based on a frontend framework including proper routing,\r\nwe now have a working back button. Amazing!\r\n\r\nThe only thing not yet available in the new UI is management of Zone and GoTo presets. This will be added later.\r\nFor now, please navigate to the old UI via the menu and use that.\r\n\r\n\r\n### Screenshots\r\n\r\n#### Phone/Mobile\r\n![image](https://user-images.githubusercontent.com/974410/138561830-e0a3edf7-1974-49cf-90a8-31e677b482d2.png) ![image](https://user-images.githubusercontent.com/974410/138561931-41b68344-f260-4343-9c79-ef85e56d9786.png)\r\n\r\n![image](https://user-images.githubusercontent.com/974410/138561874-f5e5fee9-81dd-43fb-9de0-75263169a0e6.png) ![image](https://user-images.githubusercontent.com/974410/138561884-9633600b-3362-454b-b95d-90f8e5951971.png)\r\n\r\n\r\n#### Tablet/Desktop\r\n\r\n![image](https://user-images.githubusercontent.com/974410/138562037-05bc5140-d7af-488b-8734-72e66b820192.png)\r\n\r\n![image](https://user-images.githubusercontent.com/974410/138561911-77aa8d10-3918-4eb7-96ff-8a6d0440dfce.png)\r\n\r\n![image](https://user-images.githubusercontent.com/974410/138562111-3cbfe03c-7a19-4e57-9bfb-6b872239f432.png)\r\n\r\n\r\n## Updater\r\n\r\nStarting with this release, Valetudo will be capable of updating itself with the press of a button.\r\n\r\nThis has been a long-requested feature and considering how mature this whole project has become, I decided that\r\nit was finally time to actually implement that.\r\nAs it is implemented now, it uses the GitHub API by default, meaning that I am not able to track you.\r\n\r\nThere's also no automatic update check, because periodical pings to some cloud service are obviously problematic.<br/>\r\nYou will decide when to press the \"Check for Updates\" button and also when to update.\r\n\r\n## More stickers\r\n\r\nI've decided to get a few more stickers printed because merch\r\n\r\n![image](https://user-images.githubusercontent.com/974410/138592502-4c6d150e-ecde-46ea-9ce4-7da8fdb77431.png)\r\n\r\n## Misc\r\n\r\nI'm currently looking for a job that isn't a corporate hellhole with nice people doing interesting stuff.\r\nIf you're a likeminded hacker looking for a new colleague or know someone who does feel free to ping me\r\n\r\nThanks :)\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **ui:** Add Valetudo logo to bottom sheet ([76eeaff](https://github.com/Hypfer/Valetudo/commit/76eeaffd4aa273e351d9306d4660df196380b275))\r\n* **ui:** Bring back the old map renderer ([7aa6822](https://github.com/Hypfer/Valetudo/commit/7aa6822e20ef026a73bcfebcf76c9bbd49ce2a94))\r\n* **ui:** Change map colors according to theme in use ([b17745e](https://github.com/Hypfer/Valetudo/commit/b17745e2ca70a9b24982f70cfc2272130cd1e9a4))\r\n* **ui:** Fan speed icon and battery level bar improvements ([d0a0671](https://github.com/Hypfer/Valetudo/commit/d0a06712315f0dc7b93fc35ee9f9270a9204df7e))\r\n* **ui:** Improve controls ([b678cda](https://github.com/Hypfer/Valetudo/commit/b678cdac0f2a15e1a3191f2125fbbaabbc7af833))\r\n* **ui:** Map Editing ([35feb65](https://github.com/Hypfer/Valetudo/commit/35feb654e76599d0c267ed118453f3c25e4b8fbd))\r\n* **ui:** Move locate to the map view ([32de2b8](https://github.com/Hypfer/Valetudo/commit/32de2b83daf1e03fa16b1115713a9290abc05029))\r\n* **ui:** Place new client structures in the middle of the viewport ([d9d2a64](https://github.com/Hypfer/Valetudo/commit/d9d2a6436bd6ea24dd431b24776c93587114cfba))\r\n* **ui:** Remove map transparency ([ace000b](https://github.com/Hypfer/Valetudo/commit/ace000b922a426076db49aaa25e1cbf4207b0ad8))\r\n* **ui:** Remove obsolete segment controls ([9912cf5](https://github.com/Hypfer/Valetudo/commit/9912cf58f60a6ca88517786bb9fc6afccf9a5cf0))\r\n* **updater:** Introduce ValetudoUpdaterNoUpdateRequiredState ([354028e](https://github.com/Hypfer/Valetudo/commit/354028e6f4f23e8c61a9f2e302edcaecf7807fe6))\r\n* Updater ([5db2c55](https://github.com/Hypfer/Valetudo/commit/5db2c554dc9905352c310f4be7d6130a26f7730c))\r\n* **ui:** Remove Accordion from interface settings ([c4c31bb](https://github.com/Hypfer/Valetudo/commit/c4c31bb5a68757a6ec687c3dde436f26374a2fdc))\r\n* **ui:** Set the new UI as the default ([c0f90fb](https://github.com/Hypfer/Valetudo/commit/c0f90fb90f44d7020db016cfe9129d80f8df7d56))\r\n* **ui:** Use a WebWorker for rendering the map layers when possible ([3eafded](https://github.com/Hypfer/Valetudo/commit/3eafded6c62a420795f6f910ca5b933f29a7e5f6))\r\n* **ui:** Use real swagger icon in sidebar ([#1160](https://github.com/Hypfer/Valetudo/issues/1160)) ([f4c0093](https://github.com/Hypfer/Valetudo/commit/f4c0093527be1ae3ce6fa298bd878b3cc5b1283c))\r\n* **ValetudoEvents:** Add Mop Attachment Reminder event ([ac268d7](https://github.com/Hypfer/Valetudo/commit/ac268d765f93c33aba14ad7ffd8602d00a02985e))\r\n* Add nonce to every instance of a Valetudo map ([f0489f1](https://github.com/Hypfer/Valetudo/commit/f0489f15260f8eb368bc6b759029a022781bebf9))\r\n\r\n\r\n\r\n### Bug Fixes\r\n\r\n* Fix MopAttachmentReminderValetudoEvent not being a DismissibleValetudoEvent ([302f6ce](https://github.com/Hypfer/Valetudo/commit/302f6cefc3f155d45589ea1cf50ed39fc983b5d3))\r\n* **mqtt:** Fix consumable state attribute data being published multiple times ([894bba9](https://github.com/Hypfer/Valetudo/commit/894bba9c9b99a5b67f584dbaa9e1571ffa18812c))\r\n* **mqtt:** Fix zone cleanup ([#1130](https://github.com/Hypfer/Valetudo/issues/1130)) ([bb951b2](https://github.com/Hypfer/Valetudo/commit/bb951b2fcddb6435bfe6b838044cc2af7b0c235f))\r\n* **mqtt:** Hopefully avoid a deadlock ([c3313ea](https://github.com/Hypfer/Valetudo/commit/c3313eac738cf8d5dc1a05f3c60308e4b002dd3a))\r\n* **ui:** Allow more states for zone/segment cleanup and goto ([c738938](https://github.com/Hypfer/Valetudo/commit/c738938cc0d8140ce91011db8420df7a6768c893))\r\n* **ui:** Better placement of segment labels ([ba788a0](https://github.com/Hypfer/Valetudo/commit/ba788a0da1042106cac698e5de9f20d6e7bb89f5))\r\n* **ui:** Combinations of scrolling and touch events also should not cause any jank ([e36c40f](https://github.com/Hypfer/Valetudo/commit/e36c40f2a66a67baebd75da13ed8bb84cd26d371))\r\n* **ui:** Fix controls jumping around when there is a status flag ([c641fb1](https://github.com/Hypfer/Valetudo/commit/c641fb10e3bc2a7e56a9e6a388be1d479fb6c91b))\r\n* **ui:** Fix draw order for ControlsBottomSheet ([c46ef10](https://github.com/Hypfer/Valetudo/commit/c46ef10981298570bc14a7e9094698b70dd30e94))\r\n* **ui:** Fix SSE not reconnecting after having closed the connection once ([6feaaf8](https://github.com/Hypfer/Valetudo/commit/6feaaf807065f3e5d585c9f723e8b48f9aa32621))\r\n* **ui:** Further improve segment label placement using the median ([6545cc7](https://github.com/Hypfer/Valetudo/commit/6545cc7fb4077247b08675f8ea10895062996401))\r\n* **ui:** Ignore map updates if the tab is invisible ([370753d](https://github.com/Hypfer/Valetudo/commit/370753dcd5bb2dd1803d8dac67d3b96759dd94c3))\r\n* **ui:** MQTT port is an integer ([#1159](https://github.com/Hypfer/Valetudo/issues/1159)) ([5b91c96](https://github.com/Hypfer/Valetudo/commit/5b91c96eb8e2928be48b4ef63abbb7c043b34aa9))\r\n* **ui:** Postpone map data updates during pan/zoom to prevent jank ([92a9147](https://github.com/Hypfer/Valetudo/commit/92a9147191981b15d48e4817f7200875470a13fe))\r\n* **ui:** Postpone map data updates during scroll to prevent jank ([adcd117](https://github.com/Hypfer/Valetudo/commit/adcd1174a50b4bce4805da5a36bcf80646eb9979))\r\n* **ui:** Prevent issues with zooming on mobile ([a5057fd](https://github.com/Hypfer/Valetudo/commit/a5057fd7f4dd58b38628f5bbdd4ade951ca6b6fc))\r\n* **ui:** Use the correct canvas size for the map layer renderer ([b55ffa6](https://github.com/Hypfer/Valetudo/commit/b55ffa6cc56d7c7d6bb0c8459ccd1d35252c3b63))\r\n* **ui:** Zone dimensions should be based on the pixelSize ([b317c85](https://github.com/Hypfer/Valetudo/commit/b317c856dbdfe95ab45ea639223d23fca093c464))\r\n* **updater:** Fix fallback download location for roborock ([d515f04](https://github.com/Hypfer/Valetudo/commit/d515f04e5f6695b71567f6818ba2734553c75d03))\r\n* **vendor.dreame:** Fix virtual restriction coordinates being not sorted properly ([17cc303](https://github.com/Hypfer/Valetudo/commit/17cc303cf4726cf4bcbb9597c268273896b52c78))\r\n* **vendor.dreame:** Ignore error 68 ([dd44320](https://github.com/Hypfer/Valetudo/commit/dd44320a390c42f6e36a301931e5006e103a4684))\r\n* **webserver:** Allow unsetting names of segments ([f992e5a](https://github.com/Hypfer/Valetudo/commit/f992e5adce4c4fd997ff4a6c868f95d32a5e214b))\r\n* Use shorter model names ([d268013](https://github.com/Hypfer/Valetudo/commit/d268013b9c93b4dc610cb8374a3316d9e2a842a9))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/51929111"
    }
  },
  {
    "version": "2021.10.0",
    "releaseTimestamp": "2021-10-01T21:25:10.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://raw.githubusercontent.com/Hypfer/Valetudo/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.10.0</h2></p>\r\n</div>\r\n\r\nAnother release with a lot of UI changes by @ccoors. Also, there's an Android companion App now.\r\n\r\n## Android Companion App\r\n\r\nThanks to the help of @TheLastProject who had built the first prototype in less than 18h after initially mentioning the idea on the telegram group, there's now an Android Companion App for Valetudo.\r\n\r\nDon't worry, it is completely optional. All it does and aims to do is to find Valetudo instances on your network via Bonjour and help you with the provisioning (configuring Wi-Fi) process of new robots with Valetudo installed.\r\nThis can be helpful for example if you were to give your non-linux-skilled parents a rooted robot for Christmas or whatever.\r\n\r\nIt's available on F-Droid and Google Play and of course open source.\r\n\r\nFor more information, please check out [the docs](https://valetudo.cloud/pages/companion_apps/valetudo_companion.html).\r\n\r\n[<img src=\"https://github.com/Hypfer/valetudo-companion/raw/master/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot-02.png\" width=250>](https://github.com/Hypfer/valetudo-companion/raw/master/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot-02.png)[<img src=\"https://github.com/Hypfer/valetudo-companion/raw/master/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot-03.png\" width=250>](https://github.com/Hypfer/valetudo-companion/raw/master/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot-03.png)[<img src=\"https://github.com/Hypfer/valetudo-companion/raw/master/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot-05.png\" width=250>](https://github.com/Hypfer/valetudo-companion/raw/master/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot-05.png)\r\n\r\n\r\n## UI Changes\r\n\r\n@ccoors provided very nice previews displaying their changes in each PR, which is why I will just copy-paste them here for your convenience.\r\nAlso, I'm lazy\r\n\r\n<img src=\"https://user-images.githubusercontent.com/8963459/135535188-eac35c13-e42f-40d9-95cc-d861077734f9.png\" width=\"750\" alt=\"wifi config and more\">\r\n\r\n<img src=\"https://user-images.githubusercontent.com/8963459/134895551-0694425c-352e-4a58-b4a9-486be4bf1693.png\" width=\"300\" alt=\"voice pack management\"><img src=\"https://user-images.githubusercontent.com/8963459/135510056-c7478ae7-33cb-4f83-88cf-0f41e9b5e8ab.png\" width=\"300\" alt=\"manual control\">\r\n\r\n<img src=\"https://user-images.githubusercontent.com/8963459/135677738-038fb375-e9c8-444d-a8ce-3f3f032a2f43.png\" width=\"750\" alt=\"more settings\">\r\n\r\n\r\n## Logo Cleanup\r\n\r\nAs you might've noticed, the logo slightly changed.\r\nThis avoids the bug in some people, which made them read it as *aletudo* when looking at it.\r\n\r\n## Valetudog\r\n\r\nThe thing from the telegram group finally got a name: Valetudog\r\nIt's now some kind of mascot I guess.\r\n\r\n<img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/misc/valetudog.svg\" width=\"300\" alt=\"valetudog\">\r\n\r\nI also bought a lot of stickers of it\r\n\r\n![image](https://user-images.githubusercontent.com/974410/135687512-e49f8bae-97ab-4d5c-bb8b-ba989eea1518.png)\r\n\r\nUnfortunately, I have no idea what to do with them.\r\nThey did turn out quite nice though.\r\n\r\n## Zoned Cleanup MQTT changes\r\n\r\nStarting with this release, it's no longer possible to clean multiple zone presets at once via MQTT.\r\nThat should've never been possible in the first place since it's conceptually wrong as you can only call a single preset at a time. Sorry about that.\r\n\r\nNote that this is a **breaking change** and will require updating of e.g. your Home Assistant automations.\r\nInstead of an array, you now have to send just the preset ID as a string.\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **ui:** Consumables bottom view sensors ([#1104](https://github.com/Hypfer/Valetudo/issues/1104)) ([2f83d8e](https://github.com/Hypfer/Valetudo/commit/2f83d8ea02aaefde8f132909071ca9bf7367de74))\r\n* **ui:** DoNotDisturb configuration & Masonry on large screens ([#1112](https://github.com/Hypfer/Valetudo/issues/1112)) ([935f903](https://github.com/Hypfer/Valetudo/commit/935f903981ad5f98e9224cae143396b353a195db))\r\n* **ui:** HTTP Basic Auth and NTP client config ([#1118](https://github.com/Hypfer/Valetudo/issues/1118)) ([2371878](https://github.com/Hypfer/Valetudo/commit/2371878cd48e19b57fce61b4200d76a1cc30257b))\r\n* **ui:** Manage voice packs ([#1108](https://github.com/Hypfer/Valetudo/issues/1108)) ([0d02c27](https://github.com/Hypfer/Valetudo/commit/0d02c278edaf1ea60810990455b33175b957acc7))\r\n* **ui:** Manual control ([#1114](https://github.com/Hypfer/Valetudo/issues/1114)) ([7e9ef04](https://github.com/Hypfer/Valetudo/commit/7e9ef04b2fa5d8fb4d5f7e8d3fa88366592873ea))\r\n* **ui:** Robot settings ([#1097](https://github.com/Hypfer/Valetudo/issues/1097)) ([4b43b37](https://github.com/Hypfer/Valetudo/commit/4b43b370663ca44f03d82ba828026169075d670c))\r\n* **ui:** Wifi configuration ([#1116](https://github.com/Hypfer/Valetudo/issues/1116)) ([3e71184](https://github.com/Hypfer/Valetudo/commit/3e7118414b6b190750e3f606c93e1b052d78b898))\r\n* **vendor.dreame:** Add Dreame D9 Pro ([cc50a8c](https://github.com/Hypfer/Valetudo/commit/cc50a8c6e4cab7a04c68ca61d21e59e15a3a59cb))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **mqtt:** Fix MQTT Zone cleanup ([fdabcc5](https://github.com/Hypfer/Valetudo/commit/fdabcc52be3553f01648997ec714133e27a6e7cc))\r\n* **ui:** Allow start and home basic commands on error state ([5fd0354](https://github.com/Hypfer/Valetudo/commit/5fd0354eabd91aa50cc42120bdabdf6947aaf604))\r\n* **ui:** Blue line between buttons in PendingMapChangeEventControl ([196a29e](https://github.com/Hypfer/Valetudo/commit/196a29e1549ffd46fddcd78c7c8bee9b2d1e8c21))\r\n* **ui:** Fix mobile Icons in new frontend ([#1113](https://github.com/Hypfer/Valetudo/issues/1113)) ([313caa1](https://github.com/Hypfer/Valetudo/commit/313caa10ea0a246ea05dd4ba3fca83e374e75cdc))\r\n* **ui:** Import ToggleButton from core ([da0cce5](https://github.com/Hypfer/Valetudo/commit/da0cce588eee9c6065bb2ad4f2890b19cd8c5e59))\r\n* **ui:** RatioBar background color ([c00d174](https://github.com/Hypfer/Valetudo/commit/c00d1749c26bec217a60a529166c5f8bf6de3dba))\r\n* **ui:** Remove persistent data hint ([6777f3a](https://github.com/Hypfer/Valetudo/commit/6777f3aa7bbf4ef5afea5a3ba8fdecd2aa8f150e))\r\n* **ui:** repair light mode ([#1103](https://github.com/Hypfer/Valetudo/issues/1103)) ([842aea1](https://github.com/Hypfer/Valetudo/commit/842aea125b97a33adbf28c3b0c9d1cf84c069943))\r\n* **ui:** Root grid height ([957463a](https://github.com/Hypfer/Valetudo/commit/957463a9de34e4e7c3fafe5d94fdd6360b4a2f88))\r\n* **ui:** Root grid height ([1d9a244](https://github.com/Hypfer/Valetudo/commit/1d9a244412b235ed2da71d594cb77d00fd9eae45))\r\n* **ui:** Stop events badge flashing when it reloads ([#1115](https://github.com/Hypfer/Valetudo/issues/1115)) ([007926b](https://github.com/Hypfer/Valetudo/commit/007926b90881664e9b0c718e7c3ef21ad306e233))\r\n* **webserver:** Fix reflected xss vulnerability ([36a3bae](https://github.com/Hypfer/Valetudo/commit/36a3bae630dfc84c6a2e610ef35e93a002470857))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/50662403"
    }
  },
  {
    "version": "2021.09.1",
    "releaseTimestamp": "2021-09-19T12:23:58.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.09.1</h2></p>\r\n</div>\r\n\r\nThis release is packed with UI improvements thanks to @ccoors\r\n\r\n## Event UI\r\n\r\nThe new UI now subscribes to the ValetudoEvents endpoint and allows for interaction with them.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/133927122-054ed31b-7a47-447f-9193-6e92ca64757b.png)\r\n\r\nThis is helpful as they might contain errors that you've missed.\r\nAlso, your robot might require confirmation from you to store a new map so make sure to keep an eye on that.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/133927125-d069022e-8a18-4bd3-b879-734a4f9aba96.png)\r\n\r\n\r\n## Timer UI\r\n\r\nYou can now use the new UI to set up ValetudoTimers.\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/974410/133927153-e109c4a5-2bff-45e7-af07-2ae7a4eb9ace.png)\r\n\r\n![image](https://user-images.githubusercontent.com/974410/133927151-76b2daa1-9e26-4b6d-a2e1-ba20c97e9829.png)\r\n\r\nNote that timers are always stored and evaluated as UTC. The local time display is simply a convenience feature.\r\n\r\n## MQTT config UI\r\n\r\nMQTT configuration can now also be done via the new UI.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/133927206-8a4188a8-d178-46fb-9c2d-32907322f5f9.png)\r\n\r\nIt features a nice topic preview to make it easier for newcomers to interact with Valetudo via MQTT.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/133927215-e359d45a-c76e-47bb-a178-d1118cca25bc.png)\r\n\r\nAlso, the API will no longer return any MQTT credentials but instead replace them with `<redacted>` for security reasons.\r\n\r\n## Logviewer UI\r\n\r\nA basic log viewer has been added to the new UI. While still WIP, it already allows for live updates as well as filtering, which is a neat improvement.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/133927245-d4f98b09-0cc4-448d-9752-f939987f9e3c.png)\r\n\r\n\r\n## Auto-empty Dock related features\r\n\r\nIf you own a Dreame Z10, you're now able to enable/disable the automatic dust collection via the Swagger UI.\r\nFurthermore, you can also trigger it manually via either the UI, the REST API or MQTT, meaning that you can now fully customize the collection interval by using e.g. Home Assistant automations.\r\n\r\n## Misc\r\n\r\n### Obstacle Avoidance\r\n\r\nYou can now disable the Obstacle Avoidance Feature of your Dreame L10/Z10 via the Swagger UI if you experience issues such as the robot refusing to drive onto a carpet.\r\n\r\n### Consumables UI\r\n\r\nThe new UI now also features a consumables section with a neat hover feature hopefully helping newcomers better understand the consumables.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/133927281-cd81083a-be3f-415f-bf78-81818a0c26af.png)\r\n\r\n\r\n### Runtime Information UI\r\n\r\nThe new UI about section has been extended to display data returned by the runtime information endpoint.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/133927292-91c520e9-210e-40c4-89a1-3c0fce037ad9.png)\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **core:** AutoEmptyDockAutoEmptyControlCapability ([eeeb46c](https://github.com/Hypfer/Valetudo/commit/eeeb46c8a2152049392b7df06c952dc44b101d98))\r\n* **core:** AutoEmptyDockManualTriggerCapability ([5678d4f](https://github.com/Hypfer/Valetudo/commit/5678d4fd8e3dab9364182fa8f40fa09465bc77eb))\r\n* **core:** ObstacleAvoidanceControlCapability ([e5fab92](https://github.com/Hypfer/Valetudo/commit/e5fab92172dd6c024201218bbe4889a770c3f7c2))\r\n* **core:** Robot properties ([b1713df](https://github.com/Hypfer/Valetudo/commit/b1713dff26a2bcfd707bd88fa0dcf3acbde4faa1))\r\n* **MockRobot:** MockAutoEmptyDockManualTriggerCapability ([31cb972](https://github.com/Hypfer/Valetudo/commit/31cb972d89cba474c3c8732e969015a5bb5d9851))\r\n* **ui:** Add button to trigger dock auto empty manually ([#1087](https://github.com/Hypfer/Valetudo/issues/1087)) ([fa2def7](https://github.com/Hypfer/Valetudo/commit/fa2def7c65a2641ec6321fcdfb4c3975e607867d))\r\n* **ui:** Consumables in new UI ([#1093](https://github.com/Hypfer/Valetudo/issues/1093)) ([144d6ed](https://github.com/Hypfer/Valetudo/commit/144d6edacdf264b5a835ee184c1639f982231d25))\r\n* **ui:** Implement MQTT config ui ([#1080](https://github.com/Hypfer/Valetudo/issues/1080)) ([2dd83e3](https://github.com/Hypfer/Valetudo/commit/2dd83e3a8c8e8c1629f873b9d20a52f7337fbcd9))\r\n* **ui:** Implement timer ui ([#1077](https://github.com/Hypfer/Valetudo/issues/1077)) ([abd6345](https://github.com/Hypfer/Valetudo/commit/abd63454588e510d23d55c4f08a1caad1cc7c649))\r\n* **ui:** Log with SSE and display log in new UI ([#1092](https://github.com/Hypfer/Valetudo/issues/1092)) ([1721df7](https://github.com/Hypfer/Valetudo/commit/1721df7dd6969fba8acd63d726a8ca14d1977afd))\r\n* **ui:** Navigation and Events in UI ([#1090](https://github.com/Hypfer/Valetudo/issues/1090)) ([27fd2ba](https://github.com/Hypfer/Valetudo/commit/27fd2ba97e98f534c20ca6e22b0d46510f355706))\r\n* **ui:** Show MQTT config defaults ([711c312](https://github.com/Hypfer/Valetudo/commit/711c312cc41fff57867e5b97d4e867b3ef41b4c3))\r\n* **ui:** Show MQTT topic preview ([#1082](https://github.com/Hypfer/Valetudo/issues/1082)) ([865905e](https://github.com/Hypfer/Valetudo/commit/865905ea58bfff9187c7463fce3a312b738a1e90))\r\n* **ui:** Show runtime info on about page ([#1089](https://github.com/Hypfer/Valetudo/issues/1089)) ([ece2dc9](https://github.com/Hypfer/Valetudo/commit/ece2dc9d6d5baafa4d0aa291565087bf2e1f6148))\r\n* **vendor.dreame:** DreameAutoEmptyDockAutoEmptyControlCapability ([a1fa6d8](https://github.com/Hypfer/Valetudo/commit/a1fa6d8a14bad572aca4ce6af714cacb9d4e1760))\r\n* **vendor.dreame:** DreameAutoEmptyDockManualTriggerCapability ([b7aed1a](https://github.com/Hypfer/Valetudo/commit/b7aed1afa217ebd90f411c91844a28f05946460d))\r\n* **vendor.dreame:** DreameDoNotDisturbCapability ([60972ca](https://github.com/Hypfer/Valetudo/commit/60972ca6dd8d8200d8c25a2e4e084c04f97ef8ce))\r\n* **vendor.dreame:** DreameObstacleAvoidanceControlCapability ([ca9a499](https://github.com/Hypfer/Valetudo/commit/ca9a49939d9499dddfc9f77aede70c655758031a))\r\n* **webserver:** Provide mqtt config properties ([7e6962b](https://github.com/Hypfer/Valetudo/commit/7e6962bd8094120168c960d550027efbf3a53d73))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **core:** Accepting/rejecting a pending map change should always invalidate a pending event ([94c8da2](https://github.com/Hypfer/Valetudo/commit/94c8da29c6f3f3adc3e9f02b546dd258e4bd30bc))\r\n* **timers:** Prevent timer drift ([#1078](https://github.com/Hypfer/Valetudo/issues/1078)) ([105d02a](https://github.com/Hypfer/Valetudo/commit/105d02a67d502ba727e90251f2b9325837833ebd))\r\n* **ui:** Improve word breaks in MQTT topic preview ([#1088](https://github.com/Hypfer/Valetudo/issues/1088)) ([8736f7f](https://github.com/Hypfer/Valetudo/commit/8736f7fc9ee1d76dcb8a5c21975f85040fbfd723))\r\n* **ui:** Make timers use correct time zone offset ([#1079](https://github.com/Hypfer/Valetudo/issues/1079)) ([f790db3](https://github.com/Hypfer/Valetudo/commit/f790db3ec1eadcaa91726a75ac994b5d527058f4))\r\n* **ui:** Remove staleTime: Infinity for queries that should actually refresh automatically ([b53d428](https://github.com/Hypfer/Valetudo/commit/b53d428846f3013768827296b193ed68f4ca0255))\r\n* **ui:** Show old ui timer page even when there's no DoNotDisturbCapability ([ac19d5d](https://github.com/Hypfer/Valetudo/commit/ac19d5d2c1751c12d614ebf2c8cb701cdc7a0473))\r\n* **ui:** Timer action controls Memo dependency ([#1091](https://github.com/Hypfer/Valetudo/issues/1091)) ([7ebbafc](https://github.com/Hypfer/Valetudo/commit/7ebbafce307fc5b3e07f73f3652d154a63d3a248))\r\n* **ValetudoEvents:** Resetting a consumable should also set its event to processed ([d705c5b](https://github.com/Hypfer/Valetudo/commit/d705c5bc67cff5cb4b085893f428bf7794a26bb1)), closes [#1096](https://github.com/Hypfer/Valetudo/issues/1096)\r\n* **webserver:** Remove obsolete mqtt config password stripping ([c4f6fab](https://github.com/Hypfer/Valetudo/commit/c4f6fabc62c69b6573782e31511f8df02ea2e7a3))\r\n* **webserver:** Strip credentials from mqtt config REST response and remove ssh key upload ([5b66887](https://github.com/Hypfer/Valetudo/commit/5b6688778bd3efb884e027b51d2989e28c7252af))\r\n* **webserver:** Terminate SSE connections on shutdown for a clean shutdown ([bfbf4dd](https://github.com/Hypfer/Valetudo/commit/bfbf4dd7192a443ca7e49d9efa0f382040370741))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/49812967"
    }
  },
  {
    "version": "2021.09.0",
    "releaseTimestamp": "2021-09-09T18:00:31.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.09.0</h2></p>\r\n</div>\r\n\r\nThis release features some more bugfixes and some breaking config changes\r\n\r\n## New UI\r\n\r\nIf you haven't seen it already, check out [the previous release notes](https://github.com/Hypfer/Valetudo/releases/tag/2021.08.1).\r\n\r\n## MQTT changes\r\n\r\n### Config Schema\r\nThis release features a much cleaner mqtt configuration schema. Now, one can actually understand what the options are for.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/132738325-10a47c75-f321-4c79-94ec-374484d7b7f4.png)\r\n\r\n\r\n\r\nSince this a **breaking change**, Valetudo will likely reject your old config file and create a new one.\r\nDon't worry though. The old one is backed up meaning that you can simply copy-paste your timers, presets etc.\r\nJust check the Log for more information.\r\n\r\n### Identifier\r\n\r\nValetudo will now use the autogenerated machine identifier as the mqtt identifier and friendly name.\r\nIf you've been using the defaults until now, you'll either want to manually configure the identifier or update your scripts, delete your Vacuum Device in Home Assistant etc.\r\n\r\nThe autogenerated unique machine identifier can be found in the Log.\r\nIt will sorta look like this: `ModestFewChinchilla`\r\n\r\n### Home Assistant Map Data\r\n\r\nThe Map data camera image has been replaced with a nicer looking one that will also hopefully lead to less confusion for newcomers.\r\nIt looks like this:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/132737756-efba2973-0ed7-47cb-bae4-6b6ca18acf67.png)\r\n\r\n\r\n## Out-of-Memory Issues\r\n\r\nThe out of memory issues causing Valetudo to shut down have been fixed again even though that they were already fixed.\r\nFor some reason, npm started installing the old and unpatched dependency. Probably some weirdness regarding the `package-lock.json` or something like that.\r\n\r\nThis has been solved by reimplementing what the dependency did in Valetudo itself. Fortunately, this allowed us to add logging to that.\r\nIf you're seeing something like `[WARN] Stale SSE connection to the Map SSE Hub detected. Terminating.` in your log, the mitigation is working.\r\n\r\n## Updated Robot Docs\r\n\r\nI've added some notes for each implementation to the [Supported Robots Page](https://valetudo.cloud/pages/general/supported-robots.html) to make it easier for people to choose a robot to buy.\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* Log autogenerated system ID ([2cc365c](https://github.com/Hypfer/Valetudo/commit/2cc365c60415f68e3ec7d454eda8387adf8c9842))\r\n* **ui:** make toggle group full width ([#1060](https://github.com/Hypfer/Valetudo/issues/1060)) ([dfdd7f7](https://github.com/Hypfer/Valetudo/commit/dfdd7f7de54ad84f0f4fd52e34692879ce0116ff))\r\n\r\n### Bug Fixes\r\n\r\n* **miio:** reduce loglevel of user ack timeout spam messages ([3f81d4c](https://github.com/Hypfer/Valetudo/commit/3f81d4c063595f129d7b08114377b6b4703628e1))\r\n* **mqtt:** Poll robot state every refreshInterval to mitigate stale data on lost cloud connections ([95ce4bb](https://github.com/Hypfer/Valetudo/commit/95ce4bb333911f67afadd769af4104d8286dae6b))\r\n* **openapi:** Fix examples schema for ManualControlCapability ([b22ceb7](https://github.com/Hypfer/Valetudo/commit/b22ceb7288f87540492182eba58f821fe44a544e))\r\n* **ui:** Change path color to black for better visibility ([2454a85](https://github.com/Hypfer/Valetudo/commit/2454a85a650a9323293dd9190cf5a955b8b2e7f8))\r\n* **vendor.viomi:** catch set_timezone errors ([c2cbd45](https://github.com/Hypfer/Valetudo/commit/c2cbd4588dede2b4d6a86c7d0807b16d7308d0f2))\r\n\r\n### Reverts\r\n\r\n* Revert \"fix(vendor.viomi): Poll state every 30s to fix stale mqtt data\" ([b55e4a5](https://github.com/Hypfer/Valetudo/commit/b55e4a58edc20d3d7e3f67274891d46967f0fd8d))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/49298984"
    }
  },
  {
    "version": "2021.08.1",
    "releaseTimestamp": "2021-08-30T19:15:34.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.08.1</h2></p>\r\n</div>\r\n\r\nThis release features the new React-based UI by @Jomik as well as some MQTT config changes\r\n\r\n## New UI\r\n\r\nThe new UI has been merged and is now available as a usable preview.\r\nThere's still a lot to do, however that should be much easier now that it is merged.\r\n\r\nUntil everything has been ported over, the old UI will still be the default.\r\n\r\nYou can open the new one via the menu, which now also houses a shortcut to the Swagger UI as well:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/131392121-d28f2ae6-278d-49a3-a51e-2ca338107ec6.png)\r\n\r\n![image](https://user-images.githubusercontent.com/974410/131392013-d984ab62-b3c4-4590-9081-f7f457b8ad11.png)\r\n\r\n\r\nThere's a drop-down where you can select a zone preset to clean in the new UI.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/131392187-40648196-50be-4c23-8cea-4ed1864decd5.png)\r\n\r\n\r\nFuthermore, there's also a button, which lets you set the iteration count for segment cleanups.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/131392224-31302e3d-c8dc-43ce-823f-8c82732a6ffd.png)\r\n\r\n\r\n\r\nThis marks a huge step forward for the project, which has been due since years. Thanks again to @Jomik \r\n\r\n## MQTT config changes\r\n\r\nThis release removes all mqtt settings where I couldn't find a reasonable explanation for why they exist.\r\nIf you're missing something, please let me know in the comments and include an explanation _why_ it was needed.\r\n\r\n## Dreame Z10 Pro Support\r\n\r\nIf you're looking for a Valetudo-supported and affordable Vacuum Robot featuring an Auto-Empty Dock, you can now buy\r\nthe Dreame Z10 Pro. I didn't know that I needed an auto-empty dock before I got one, but I definitely needed one.\r\n\r\nDo note that it's supported on the feature level of the L10 Pro, meaning that you can't control the Dock yet.\r\nThat shouldn't matter though as it is on by default and doesn't strictly require any interactions.\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **ui:** Add link to swagger ui to menu ([513bd8c](https://github.com/Hypfer/Valetudo/commit/513bd8c2778ae2f26186ae48f69030bbfde59628))\r\n* **ui:** Added html title to symbols in various map views ([#1026](https://github.com/Hypfer/Valetudo/issues/1026)) ([98d0f1e](https://github.com/Hypfer/Valetudo/commit/98d0f1e617cae48cbd44a171b5aa9178f0677a0b))\r\n* **ui:** Display system host info ([54df5ca](https://github.com/Hypfer/Valetudo/commit/54df5ca4f6b53a280bad52f0a73f074e1d5122f3))\r\n* **ui:** Support segment cleanup iteration count selection in map view ([f798ff5](https://github.com/Hypfer/Valetudo/commit/f798ff5d040e08a7b2f4d2606e61d8c5000957f5))\r\n* **vendor.dreame:** Add Dreame Z10 Pro ([4127ccd](https://github.com/Hypfer/Valetudo/commit/4127ccdc413155c5f3d03a29b51fc7c2f10a1353))\r\n* **vendor.dreame:** Log rootfs on startup if embedded ([cbde5a4](https://github.com/Hypfer/Valetudo/commit/cbde5a4873be1113b0dc5cfee0c1164cdc5bedf4))\r\n* **vendor.roborock:** Log rootfs on startup if embedded ([8d09fd6](https://github.com/Hypfer/Valetudo/commit/8d09fd6dab8413b3b5e9aa89921014ef267b3f23))\r\n* New React UI ([9acb2cd](https://github.com/Hypfer/Valetudo/commit/9acb2cd529a1b84dd7db333778dd523d8487c4e7))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **miio:** Add proper shutdown methods to dummycloud and retrywrapper ([f0676ef](https://github.com/Hypfer/Valetudo/commit/f0676efa6d81535069f156dab2611b63b7e4d27c))\r\n* **miio:** Reduce loglevel for non-pending messages ([dbabe0b](https://github.com/Hypfer/Valetudo/commit/dbabe0b3a8e9540aff2d6f8f76dfdea2b68c767f))\r\n* **mqtt:** Catch exceptions on connect reconfiguration ([0e3bebd](https://github.com/Hypfer/Valetudo/commit/0e3bebda27553ee7f7b3796a4b89dbd53eec1ccb))\r\n* **mqtt:** Fix 100% cpu consumable fetch recursion ([ae163a9](https://github.com/Hypfer/Valetudo/commit/ae163a95e95b384e4e3e2804f9a4792c9e9793e9))\r\n* **mqtt:** Remove refreshInterval setting ([83d2a45](https://github.com/Hypfer/Valetudo/commit/83d2a45eb0d21cc15cc58cdf1734833688de0fac))\r\n* **networkadvertisement:** Hopefully fix valetudo crashing due to network issues ([4ace37e](https://github.com/Hypfer/Valetudo/commit/4ace37e0aaf88e5bb53dfbab5fbb4bf1d43c685e))\r\n* **ui:** Fix minor issues discovered by deepscan ([ee8b58b](https://github.com/Hypfer/Valetudo/commit/ee8b58b646ce006d8c1d6a5cca2f27d6af32392c))\r\n* **ui:** Only dark mode (for now?) ([db985f3](https://github.com/Hypfer/Valetudo/commit/db985f39fcfdf1bc9048d50a3e2d7d75bc42f3da))\r\n* **vendor.dreame:** Add error code 68 mapping ([741c711](https://github.com/Hypfer/Valetudo/commit/741c7114d4b88760cd30ab7e50697816f968ed2a))\r\n* **vendor.dreame:** Fix incorrect status mapping for powersave mode ([343c749](https://github.com/Hypfer/Valetudo/commit/343c749a107fdaa4f016965984065585c0872616))\r\n* **vendor.dreame:** Ignore \"event_occured\" cloud messages ([4d3f4ac](https://github.com/Hypfer/Valetudo/commit/4d3f4acf8fd864d690850070328b5f9b115934d4))\r\n* **vendor.roborock:** Handle more events ([972e4df](https://github.com/Hypfer/Valetudo/commit/972e4df9fc840c85324de7ef926763a521bd225d))\r\n* **vendor.viomi:** Poll state every 30s to fix stale mqtt data ([fdb315a](https://github.com/Hypfer/Valetudo/commit/fdb315a33beb6690a68f34a131bd7484802ded7d))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/48695654"
    }
  },
  {
    "version": "2021.08.0",
    "releaseTimestamp": "2021-08-13T19:05:50.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.08.0</h2></p>\r\n</div>\r\n\r\nThis release contains mostly bugfixes and code cleanup.\r\nAlso, ordered cleanup and iterations for MQTT segment cleaning.\r\n\r\n## Dreame root public release\r\n\r\nRooting Dreame robots has been made publicly available with Dennis' DEF CON 29 Talk\r\n[Robots with lasers and cameras but no security Liberating your vacuum](https://youtu.be/EWqFxQpRbv8?t=1525).\r\n\r\nFor more information, consider joining the [Dreame Robot Vacuum Telegram Usergroup](https://t.me/joinchat/zgRioVBpWHliNGZi).\r\n\r\n## MQTT Segment Cleaning options\r\n\r\nThis release allows you to specify an iteration count when calling Segment Cleanups via MQTT.\r\nFurthermore, you can also request it to respect the order you've provided. e.g. Kitchen then Living Room then Bathroom.\r\n\r\nThis requires firmware support and is also a **breaking change.**\r\nYou'll have to update your MQTT scripts/automations/whatever.\r\n\r\n[The docs](https://valetudo.cloud/pages/integrations/home-assistant-integration.html) contain an example payload.\r\n\r\n## KeyLockCapability\r\n\r\nIf you have children, cats or drunk roommates who like to mess with your robot vacuum, you can now lock the buttons via Valetudo.\r\nThis of course needs firmware support. Something that seems to be available on most Dreame-made robots.\r\n\r\nPlease note that there's no UI toggle for it yet, meaning that you'll have to use the Swagger UI (http://ROBOT_IP/swagger/) to enable it.\r\n\r\n## _valetudo._tcp bonjour service\r\n\r\nValetudo 2021.08.0 and up will publish a bonjour service, which should make it easy to auto-discover a Valetudo instance.\r\nThis will likely be useful in the future.\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **core:** KeyLockCapability ([4e2b97b](https://github.com/Hypfer/Valetudo/commit/4e2b97b3f214d239af3ef4d032c9a123fad1a816))\r\n* **networkadvertisement:** Publish _valetudo._tcp service ([cb1c34f](https://github.com/Hypfer/Valetudo/commit/cb1c34fc3c0083d5405c2c638120e498a0ef5151))\r\n* **vendor.dreame:** 1C Manual Control ([afded40](https://github.com/Hypfer/Valetudo/commit/afded402a5f26c5bcdf409b41f22d3f6d8b7272b))\r\n* **vendor.dreame:** DreameKeyLockCapability ([36e3598](https://github.com/Hypfer/Valetudo/commit/36e3598d50efc04515809f909a1600aa8575a5ac))\r\n* **vendor.dreame:** Manual Control ([4cfddd4](https://github.com/Hypfer/Valetudo/commit/4cfddd4ca17e40187d2e6f2e4557e122349978ac))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **core:** Improve unhandledRejection event handler ([a8720b9](https://github.com/Hypfer/Valetudo/commit/a8720b931a4a89b4748470786a0fe0b9b4fd64c4))\r\n* **mqtt:** Catch exceptions when handling MQTT commands ([33b9dc3](https://github.com/Hypfer/Valetudo/commit/33b9dc3cfcd6f66d3805c662766c36c494bbad69))\r\n* **mqtt:** Fix weirdness on disconnect ([be033b6](https://github.com/Hypfer/Valetudo/commit/be033b6efe1806b382a47609802e28a2004130fb))\r\n* **mqtt:** Only try to publish state when connected ([e61cf98](https://github.com/Hypfer/Valetudo/commit/e61cf9840d73a08edd44e1368339afb3d4fecef5))\r\n* **mqtt:** Publish named as well as unnamed segments ([b5ff0b4](https://github.com/Hypfer/Valetudo/commit/b5ff0b47061d997ce2439292e6f11ceea8405de0))\r\n* **vendor.dreame:** Add error code 64 for Dreame robots ([#1017](https://github.com/Hypfer/Valetudo/issues/1017)) ([4ed64d2](https://github.com/Hypfer/Valetudo/commit/4ed64d2f2ccf66994c71091b06d9531f8b603244))\r\n* **vendor.dreame:** Error 11 Mapping for CombinedVirtualRestrictions ([491ed4b](https://github.com/Hypfer/Valetudo/commit/491ed4b4f6f670f1f148383084de0f7b2528a816))\r\n* **vendor.dreame:** Fix cleaning order of segments ([d7cfd07](https://github.com/Hypfer/Valetudo/commit/d7cfd07b681e9e8c76efcaf0257b31f0c54dfcd4))\r\n* **vendor.dreame:** Handle more segment-related error codes ([57fe90a](https://github.com/Hypfer/Valetudo/commit/57fe90afebebf93519eabd7a80bf74390e0ca4da))\r\n* **vendor.dreame:** Ignore some FDS uploads ([f1930b3](https://github.com/Hypfer/Valetudo/commit/f1930b30228e34f9c123031f0e559fcd3704a532))\r\n* **vendor.dreame:** Update error code mapping ([d1699b2](https://github.com/Hypfer/Valetudo/commit/d1699b24d9631e22e4fd189c1f054a10949e4a36))\r\n* Fix invalid use of .finally() ([770f977](https://github.com/Hypfer/Valetudo/commit/770f977a1e4c76f056e1a83c9aeca76cb45b57ab))\r\n* **vendor.dreame:** Remove logging of raw data on failed parse ([11fec98](https://github.com/Hypfer/Valetudo/commit/11fec98920afae8b7d99914158706bad38f5f082))\r\n* **vendor.roborock:** Fix unhandled rejection in virtual restrictions ([4a76029](https://github.com/Hypfer/Valetudo/commit/4a760293473e57cf49217e9b901f013e2637370b))\r\n* **vendor.viomi:** Fix unhandled rejection in virtual restrictions ([af4704f](https://github.com/Hypfer/Valetudo/commit/af4704f8846cb95630debdabd1753e61a7c76ab5))\r\n* Fix more various minor issues found by deepscan ([c6c1a7f](https://github.com/Hypfer/Valetudo/commit/c6c1a7f0dd89656b3d2385ffee648e03a5956511))\r\n* Fix various minor issues found by deepscan ([37cc55f](https://github.com/Hypfer/Valetudo/commit/37cc55f4431eb01d1b2036ddc9cf1bf458368487))",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/47830402"
    }
  },
  {
    "version": "2021.07.1",
    "releaseTimestamp": "2021-07-29T17:46:33.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.07.1</h2></p>\r\n</div>\r\n\r\nThis release includes, SSDP and Zeroconf advertisement, an Event/Notification feature some bugfixes and lowmem optimizations.\r\nFurthermore, 2021.07.1 fixes a race condition which was present in 2021.07.0 causing crashes on reboot.\r\n\r\n## Network advertisement\r\n\r\nTo make using Valetudo a bit easier and more straight-forward, advertisement of the Service via both SSDP/UPnP as well as Zeroconf was added.\r\n\r\nIf you're on Windows, opening \"Network\" in the File Explorer should look similar to this:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/127387044-da7e8c18-390f-40bc-88b1-3ff316e4e6cf.png)\r\n\r\n\r\nIf you're on a Mac, I'm sure that there's also something.\r\nFurthermore, Valetudo will log the `.local` domain it's using, which might be useful in some setups.\r\n\r\n## ValetudoEvents\r\n\r\nStarting with this release, we now have something that will deal with everything that would've been a push notification\r\nwhen using the regular app. Utilizing this, the \"Bin Full\" notification on roborock vacuum robots may finally happen.\r\n\r\nThere's no UI for it just yet, however it will be implemented eventually.\r\n\r\n## Runtime Reuse\r\n\r\nAs storage space can be quite limited on these devices, it is now possible to use the NodeJS runtime bundled with\r\nValetudo for other things as well.\r\n\r\nThis can be helpful if one would e.g. want to implement a Microservice, which also runs on the Robot, talks to Valetudo\r\nand provides Telegram connectivity.\r\n\r\nJust add the `--ignore-payload` flag plus another JS file:\r\n`./valetudo --ignore-payload repl.js`\r\n\r\nThe baked-in v8 options will still apply when reusing the runtime.\r\nThat however shouldn't be an issue for most use-cases.\r\n\r\n## S5 Max Map issues\r\n\r\nApparently, the Map Reset on the S5 Max never worked. That might explain some issues users of this Robot were seeing.\r\nIt should be fixed now.\r\n\r\n## Memory-related changes\r\n\r\nDuring the development of 2021.07.0, a lot of time was spent optimizing Valetudo for use in lowmem environments\r\nsuch as the Roborock S5 Max or Dreame D9.\r\n\r\nIt was discovered that there were issues with the SSE Map update feature, which lead to Valetudo being killed by the\r\nKernel OOM killer. This was the cause of the confusing \"Hey my Valetudo is just.. gone\" reports.\r\n\r\nWhile this was fixed by introducing limits there, Valetudo was also extended to watch its own Memory usage\r\nand shut down if it exceeds 1/3 of system memory. This should provide an additional failsafe.\r\n\r\nFurthermore, Valetudo will also set its OOM score to a rather high value by itself, so that the Kernel OOM killer\r\nwill always kill Valetudo and nothing else.\r\n\r\nStill, if you can, please buy a 512mb or more RAM robot.\r\n\r\n## Misc\r\n\r\n- To help with debugging, you can now enable an option in the config file to store all uploaded maps in the filesystem.\r\n- Resetting the Map will now also invalidate the map cached by Valetudo to reduce confusion.\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* Network Announcement via SSDP/UPnP and mDNS/Zeroconf/Bonjour ([c158d77](https://github.com/Hypfer/Valetudo/commit/c158d7718c33d4b14b8710e636a25616c8e1acad))\r\n* **core:** MappingPassCapability ([1b09cde](https://github.com/Hypfer/Valetudo/commit/1b09cdec4ab4d3605ae2572f1f3eb187dfd2e1d5))\r\n* **core:** PendingMapChangeHandlingCapability ([ed0455d](https://github.com/Hypfer/Valetudo/commit/ed0455d66a46b7adc16e91d34daff2da3e784417))\r\n* **miio:** Add easy way to store uploaded maps for debugging purposes ([547f8c1](https://github.com/Hypfer/Valetudo/commit/547f8c13271f684d3285490b2365f161415b357d))\r\n* **vendor.dreame:** Add Support for the L10 Pro ([2f618c0](https://github.com/Hypfer/Valetudo/commit/2f618c030edf2bd27d254992940ac7514dd4b3c3))\r\n* **vendor.dreame:** DreamePendingMapChangeHandlingCapability ([d972121](https://github.com/Hypfer/Valetudo/commit/d972121d93f6cd552d868ae0935d698efba28d6b))\r\n* **vendor.dreame:** Handle more properties ([421e7de](https://github.com/Hypfer/Valetudo/commit/421e7dea340c8e364e82bb35770958b0c7b0792f))\r\n* **vendor.dreame:** MappingPassCapability ([7f9322b](https://github.com/Hypfer/Valetudo/commit/7f9322b060d354df13d3238328d99cb29ce2df43))\r\n* Set OOM Score Adj when embedded ([6de2f06](https://github.com/Hypfer/Valetudo/commit/6de2f06ba87f1884e74acab32976437cf34cf2c2))\r\n* ValetudoEvents ([aa15238](https://github.com/Hypfer/Valetudo/commit/aa152381d1c4b73e594b1dd36c04ccfc32de3f87))\r\n* **vendor.dreame:** Map fast mapping status ([021213e](https://github.com/Hypfer/Valetudo/commit/021213e8cd3b932685b590d896dcf640c311a2fc))\r\n* **vendor.dreame:** Sensor consumable ([4c1e319](https://github.com/Hypfer/Valetudo/commit/4c1e31980af77492f634fbaad375cd20d1fb8a2d))\r\n\r\n### Bug Fixes\r\n\r\n* **core:** Catch uncaught exceptions for an orderly shutdown ([5cf19c4](https://github.com/Hypfer/Valetudo/commit/5cf19c426734acb08f38b86a88a7743c7db770db))\r\n* **core:** Reverse event order ([a829ba5](https://github.com/Hypfer/Valetudo/commit/a829ba54ab95ea0e00c9e855467d715a98ba4055))\r\n* **networkadvertisement:** Don't crash on reboots + human-friendly URL ([3cb1cb8](https://github.com/Hypfer/Valetudo/commit/3cb1cb8dae25b472ab6b79653ea2c8ba59e2c0df))\r\n* **vendor.dreame:** Fix segment cleanup via mqtt ([5dbb9d0](https://github.com/Hypfer/Valetudo/commit/5dbb9d0474b441a3285cae22140d82ecd71fb3d6))\r\n* **vendor.dreame:** Fix status mapping and ignore irrelevant property change ([68c1c0c](https://github.com/Hypfer/Valetudo/commit/68c1c0ceb0e13609b32b9637ee07addc67330c45)), closes [#969](https://github.com/Hypfer/Valetudo/issues/969)\r\n* **vendor.dreame:** Handle more properties ([6a834c8](https://github.com/Hypfer/Valetudo/commit/6a834c8ff888ab2c24516048c899f3bf42ec0290))\r\n* **vendor.dreame:** Handle sensor consumable push ([cc8b7a5](https://github.com/Hypfer/Valetudo/commit/cc8b7a5bc86014f61a6e792c69826e7ebed653db))\r\n* **vendor.dreame:** Handle sensor consumable push ([4276c36](https://github.com/Hypfer/Valetudo/commit/4276c3648e06a6951df9ee4f576db7cb1e5821bc))\r\n* **vendor.dreame:** Handle uploaded multi-map jsons ([01486b8](https://github.com/Hypfer/Valetudo/commit/01486b80292ddbafb9cae61f43ac19a0520e0a78))\r\n* **vendor.dreame:** Revert Fix status mapping ([8db8b6f](https://github.com/Hypfer/Valetudo/commit/8db8b6fd0dc22fc1b0cb23ec1052e1fa2e2ceae1))\r\n* **vendor.dreame:** Segments from rism might not apply in some situations ([e1161cf](https://github.com/Hypfer/Valetudo/commit/e1161cf6816db67306eff7ecf4935d36b2497347))\r\n* **vendor.dreame:** There actually is a difference between pause and stop ([6da5dc4](https://github.com/Hypfer/Valetudo/commit/6da5dc46a24b622b093af15024b729252b3c2e1d))\r\n* **vendor.roborock:** Add filename to map upload url ([90b7346](https://github.com/Hypfer/Valetudo/commit/90b73465159e65f89d94fce1096cf915b4903985))\r\n* **vendor.roborock:** Enable S7 Water Pump Control + No-Mop-Zones ([f699a55](https://github.com/Hypfer/Valetudo/commit/f699a558d49523f2683c08027538466c01b61ecc))\r\n* **vendor.roborock:** MapSnapshots are only available on Gen2 robots ([0752de2](https://github.com/Hypfer/Valetudo/commit/0752de2b862f697943171b4b56ba67ea0db3f203))\r\n* **vendor.roborock:** MapSnapshots IDs are strings in valetudo but numbers for roborock ([361dffa](https://github.com/Hypfer/Valetudo/commit/361dffacea59b76726ac93eb7a3296bb6905c763))\r\n* **vendor.roborock:** Multi-Map capable roborock robots use a different command for map resets ([2bbd86f](https://github.com/Hypfer/Valetudo/commit/2bbd86f9df27baeccb46580e3a24b08b02e28ab6))\r\n* **webserver:** Remove unused parameter ([d27e3b1](https://github.com/Hypfer/Valetudo/commit/d27e3b1f626e935dcc1e279d300abc4517f45517))\r\n* Fix missing git commit id ([40ca9cb](https://github.com/Hypfer/Valetudo/commit/40ca9cb55884153c4ad582fd377cff863666d9f2))\r\n* Fix OOM-issues caused by SSE connections ([a0371f4](https://github.com/Hypfer/Valetudo/commit/a0371f4909b58403bf88fabecf2969d400c5487c))\r\n* Further tweak forced garbage collection ([c70393a](https://github.com/Hypfer/Valetudo/commit/c70393a4f19e296642ab1dd4540a3f4a64f931b4))\r\n* Further tweak SSE settings ([8eae178](https://github.com/Hypfer/Valetudo/commit/8eae1786c9d85a10c3222144e1a9561141c10746))\r\n* Further tweak SSE settings ([40d16f5](https://github.com/Hypfer/Valetudo/commit/40d16f5332f746f0d589ac530007c170eaa5a024))\r\n* Further tweak SSE settings ([cb8e01e](https://github.com/Hypfer/Valetudo/commit/cb8e01e20b195146b901f405fd87b3e45b3d69b6))\r\n* Resetting the map should also clear the Map cached by Valetudo ([e70041f](https://github.com/Hypfer/Valetudo/commit/e70041fd0318b4f8389db7b78bb4dc6bb6a75a05))\r\n* **vendor.viomi:** Set correct env variables ([#979](https://github.com/Hypfer/Valetudo/issues/979)) ([5fd4a6a](https://github.com/Hypfer/Valetudo/commit/5fd4a6a618d6ea9b93991618a3f586ca4df76903))\r\n* **vendor.viomi:** Set correct ssh key location ([b15c707](https://github.com/Hypfer/Valetudo/commit/b15c707a8a7d9b344ba314a2109bc52531f0b395))\r\n* Try logging everything we can get about process memory before committing sudoku ([6578a99](https://github.com/Hypfer/Valetudo/commit/6578a99344a6d087450a0e4b45a630398fb3a544))\r\n* Tweak forced garbage collection ([d905864](https://github.com/Hypfer/Valetudo/commit/d905864f5e2b07579a0bcf6a13be649ec9e5c785))\r\n\r\n\r\n\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/46995769"
    }
  },
  {
    "version": "2021.06.0",
    "releaseTimestamp": "2021-06-24T18:42:47.000Z",
    "changelog": "<div align=\"center\">\r\n <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.06.0</h2></p>\r\n</div>\r\n\r\nThis release features Swagger UI for proper REST API Documentation.\r\nAlso bugfixes and stability + performance improvements like the changelog of every single android app you have installed.\r\n\r\n## Swagger UI\r\n\r\n![image](https://user-images.githubusercontent.com/974410/123315997-9f21c580-d52c-11eb-8271-3f5ffd81931b.png)\r\n\r\n\r\nIn a tedious and brain-melting process, OpenAPI documentation was added to Valetudo.\r\nBy navigating to `ROBOT_IP/swagger/` you now have an interactive overview for the REST API, which directly lets you interface with the robot.\r\nThe schemas made for this are also used by the backend to validate every incoming request.\r\n\r\nSince staring at JSON Schemas all day is a pretty mind-numbing task, I didn't manage to also add examples for all responses and requests.\r\n\r\nI did however add examples for the Timers Endpoint, meaning that it is now easier to use those again.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/123316039-ab0d8780-d52c-11eb-9c17-34f20c944c16.png)\r\n\r\nUI support of course coming soon.\r\n\r\n## Config file Schema Validation\r\n\r\nThe new schemas are also used to validate the configuration file loaded by Valetudo.\r\nIf any errors arise, Valetudo will backup the config and create a new one using the defaults.\r\nThis will prevent issues with Valetudo not starting due to invalid configuration data.\r\n\r\nThe log will tell you what exactly was wrong in your config and where you can find the backup.\r\n\r\n\r\n## Other noteworthy changes\r\n\r\n### NodeJS v16.4.0\r\n\r\nThe Runtime was upgraded to v16.4.0 which brings v8 9.1 including the new Sparkplug thingy, which may result in CPU performance improvements.\r\n\r\n### MQTT ignores retained messages\r\n\r\nA common rookie mistake is that command MQTT messages are sent with the retain flag causing the robot to receive them on every reconnect.\r\nThis effectively executed a cleanup on each reboot at 4am.\r\n\r\nTo combat this, Valetudo will now simply ignore all retained messages received and complain about them in the logfile.\r\n\r\n### System REST Endpoints\r\n\r\nThere are new REST Endpoints providing system statistics such as Memory or CPU usage.\r\n\r\n`/api/v2/system/host/info`\r\n```json\r\n{\r\n  \"hostname\": \"rockrobo\",\r\n  \"arch\": \"arm\",\r\n  \"mem\": {\r\n    \"total\": 522792960,\r\n    \"free\": 358219776,\r\n    \"valetudo_current\": 59215872,\r\n    \"valetudo_max\": 59699200\r\n  },\r\n  \"uptime\": 61036,\r\n  \"load\": [\r\n    0.255,\r\n    0.2725,\r\n    0.28\r\n  ]\r\n}\r\n```\r\n\r\n### Code Compression\r\n\r\nDue to the switch to `vercel/pkg` 5.3.0, Valetudo now uses the code compression feature, which results in smaller binaries.\r\n\r\n### Memory Usage\r\n\r\nMQTT Map compression is now streamed, which may or may not improve memory usage on 256mb ram robots.\r\n\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **mqtt:** Ignore received retained message to work around common user errors ([26d8a4c](https://github.com/Hypfer/Valetudo/commit/26d8a4cd4c36410afabfda6f9e87e08fd01e9a28))\r\n* **mqtt:** Stream map serialization to improve memory usage with large maps ([98b2757](https://github.com/Hypfer/Valetudo/commit/98b2757aec0af94392038577eead7749ef659e17))\r\n* **timers:** Add endpoint which returns timer actions supported by this robot ([fe1fa88](https://github.com/Hypfer/Valetudo/commit/fe1fa88d715e1002d3ee607ce9646b8d8b2cdb9d))\r\n* **timers:** add ValetudoGoToTimerAction ([#953](https://github.com/Hypfer/Valetudo/issues/953)) ([d8a523e](https://github.com/Hypfer/Valetudo/commit/d8a523e40138f679411d2b8c33db3057d5f6c8d8))\r\n* **vendor.roborock:** Add support for the Roborock S7 ([c9ccb4a](https://github.com/Hypfer/Valetudo/commit/c9ccb4a11dc546da82684c5f2a80e96847ff2639))\r\n* **webserver:** Add SystemRouter ([efc46e6](https://github.com/Hypfer/Valetudo/commit/efc46e69001a2533077b1e30fd1d8f6de910e263))\r\n* **webserver:** Normalize reported system load ([b384ac3](https://github.com/Hypfer/Valetudo/commit/b384ac3038857f3e8677bac5859b8c1de99f80be))\r\n* **webserver:** Streamed compression of some heavy requests ([0d7d836](https://github.com/Hypfer/Valetudo/commit/0d7d8364b98e950d186d961062b81fbfff5e920a))\r\n* **webserver:** Validate actual endpoint existence against openApi schema ([f7cee31](https://github.com/Hypfer/Valetudo/commit/f7cee31eb20cba824d3fd2ed47cdb73a242de3f9))\r\n* Swagger Docs ([7842d9e](https://github.com/Hypfer/Valetudo/commit/7842d9ec0957a9a45f6c83ab357a901884b11ba1)), closes [#892](https://github.com/Hypfer/Valetudo/issues/892)\r\n* Validate configuration file and create a new one on error ([39e4613](https://github.com/Hypfer/Valetudo/commit/39e46137872f6774d2ebaf1120a10d0cddfff45b))\r\n\r\n### Bug Fixes\r\n\r\n* **configuration:** Add migration for invalid mqtt port type ([1220aa5](https://github.com/Hypfer/Valetudo/commit/1220aa5622dbf200ef2be88612f1e503ec887328))\r\n* **miio:** Allow setting new wifi credentials when provisioned ([32a12cf](https://github.com/Hypfer/Valetudo/commit/32a12cf82c698b64b3cc037a869f058fb4588f26)), closes [#657](https://github.com/Hypfer/Valetudo/issues/657)\r\n* **mqtt:** Calling GoTo Presets should use regular strings and not json strings ([ec975aa](https://github.com/Hypfer/Valetudo/commit/ec975aaec40c9857e7b35622253128ef75be3fbe)), closes [#960](https://github.com/Hypfer/Valetudo/issues/960)\r\n* **mqtt:** Use semaphore to avoid reconfigure race condition ([5b4b377](https://github.com/Hypfer/Valetudo/commit/5b4b377f98c5030aa13f2133b5a220c3366fae57))\r\n* **ntpclient:** Reduce loglevel of more error codes to avoid confusion ([ec4ee08](https://github.com/Hypfer/Valetudo/commit/ec4ee082eaba88d51d8948ebc97c0cb6e4347ed1))\r\n* **ui:** Allow resetting map when PersistentMapControl is unavailable ([#954](https://github.com/Hypfer/Valetudo/issues/954)) ([bc8feb9](https://github.com/Hypfer/Valetudo/commit/bc8feb936d373757093b79ed40ccd8b7318e8f67))\r\n* **ui:** Hide defunct zones button ([ae7c059](https://github.com/Hypfer/Valetudo/commit/ae7c05948c9cf7252bfedd1fe935c65d69a986b3))\r\n* **vendor.dreame:** Handle some previously unhandled messages ([810a212](https://github.com/Hypfer/Valetudo/commit/810a21226bb1580ed2afae9e2a2fad2b6faa475d))\r\n* **webserver:** Fix SystemRouter units ([fd908f6](https://github.com/Hypfer/Valetudo/commit/fd908f6da756d3d5a6f8350e1a4f4041990a6cf9))\r\n* **webserver:** os.freemem() isn't what it appears to be ([80743f4](https://github.com/Hypfer/Valetudo/commit/80743f455dd20d2abc316260308b9d322c33e284))\r\n* **webserver:** Properly report memory info for kernels older than 3.14 but newer than 2.6 ([9000f51](https://github.com/Hypfer/Valetudo/commit/9000f51eaf818ca465ad0b2ef9f91ca421ac2da4))\r\n\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/45189083"
    }
  },
  {
    "version": "2021.05.0",
    "releaseTimestamp": "2021-05-26T11:04:43.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.05.0</h2></p>\r\n</div>\r\n\r\nThis release features mostly bugfixes, unfinished features and a hostile takeover.\r\n\r\n## MQTT Rewrite\r\n\r\nDue to the scale of the MQTT rewrite that happened with 2021.04.0, some new bugs were introduced, which have been fixed with this release.\r\n\r\nFurthermore, this release removes the migration logic of the old mqtt config format so if you're planning on upgrading from something other than 2021.04.0, make sure to upgrade to that before installing 2021.05.0.\r\n\r\nAs always, reading all the release notes is strongly recommended during upgrades.\r\n\r\n## Not-yet finished things\r\n\r\nNot everything in this section is already part of this release.\r\n\r\n### UI Rewrite\r\n\r\n@jomik is still working on the rewrite of the Valetudo UI. It's already looking fantastic:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/119648987-635ae980-be22-11eb-82c9-3b1c999303c4.png)\r\n![image](https://user-images.githubusercontent.com/974410/119649000-6655da00-be22-11eb-831a-cb816a3991be.png)\r\n\r\n\r\nIf you're a frontend dev, a design person etc., feel free to join in. :)\r\nWe'll definitely need some design input, custom icons and much more stuff.\r\n\r\n### Timers\r\n\r\nA simple scheduler feature has been added to the backend for setups where a full-blown home automation system isn't required.\r\nThese shall be understood as WIP and can currently only be controlled [via REST API calls](https://github.com/Hypfer/Valetudo/discussions/824#discussioncomment-761574).\r\n\r\n### Dreame Support\r\n\r\nPublic root coming soon, again.\r\n\r\nThe beta test has been expanded to more users. If you want to take part in that, make sure to join the [Telegram Dreame Usergroup](https://t.me/joinchat/2qGFUaQ2pV9hNzUy) and check out the pinned form.\r\nCurrently, the announcement of the Dreame W10 and Z10 is delaying the release of the rooting method.\r\n\r\n## Freenode hostile takeover\r\n\r\nAs you might've heard, Freenode, the FOSS IRC network has been taken over by the crown prince of korea, who decided to have some fun with it.\r\n\r\nToday, the #Valetudo Freenode channel was also taken over:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/119649150-97360f00-be22-11eb-9508-2dfb93ea39be.png)\r\n\r\n\r\nThere are other and much more popular victims of this:\r\n\r\n- https://mastodon.sdf.org/@kline/106299403921451814\r\n- https://news.ycombinator.com/item?id=27286628\r\n- https://twitter.com/fosdem/status/1397454352835653632\r\n\r\nI've left the network and strongly advice you to do the same.\r\n[https://libera.chat/](https://libera.chat/) is the continuation of Freenode with a different name, but the same Team that has been running Freenode for the last 20 years.\r\n\r\nFreenode on the other hand is just the same name but with completely different people.\r\n\r\nStick to the community. Not to the brand.\r\n\r\nFor more information, check out some of the resignation letters of the former freenode and current libera staff:\r\n\r\n- kline: https://www.kline.sh/\r\n- jess: https://gist.github.com/jesopo/45a3e9cdbe517dc55e6058eb43b00ed9\r\n- Md: https://blog.bofh.it/debian/id_461\r\n- niko: https://coevoet.fr/freenode.html\r\n- edk: https://gist.github.com/edk0/478fb4351bc3ba458288d6878032669d\r\n- emilsp: https://gist.github.com/pinkisemils/39d4ded8b1639b6f39dcab15618649f5\r\n- mniip: https://mniip.com/freenode.txt\r\n- Swant: https://swantzter.se/freenode-resignation/\r\n- JonathanD: https://gist.github.com/JonathanD82/6518b93708e0aaf4b8f92c8e7200816d\r\n\r\nThere's also a neat FAQ by @joepie91: https://gist.github.com/joepie91/df80d8d36cd9d1bde46ba018af497409\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **vendor.dreame:** Add iteration count to MapSegmentationCapability ([05b338f](https://github.com/Hypfer/Valetudo/commit/05b338f069feb7c311dcc11d7b50d91e310e79d3))\r\n* Timers ([7b8c37a](https://github.com/Hypfer/Valetudo/commit/7b8c37ad1006aec62e1f19e5aec83d54da94189d))\r\n* **ntpClient:** Keep track of the current state and enable configuration via REST ([e350eba](https://github.com/Hypfer/Valetudo/commit/e350eba43ab36076d406c02f933c7be108cc8e99))\r\n* **vendor.dreame:** 1C: Add/fix various Map & Volume capabilities ([#915](https://github.com/Hypfer/Valetudo/issues/915)) ([c88df12](https://github.com/Hypfer/Valetudo/commit/c88df12de41ec05797adeb4c5215bf4d18456c9b))\r\n* **vendor.roborock:** Add support for ordered segment cleanup with multiple iterations ([2541113](https://github.com/Hypfer/Valetudo/commit/25411138688454d43026d07c12e46b5eab5e9269))\r\n* **vendor.viomi:** Implement DND capability ([#877](https://github.com/Hypfer/Valetudo/issues/877)) ([dd05c51](https://github.com/Hypfer/Valetudo/commit/dd05c51f4dfa45ffdf973b95e6b4851e423a176c))\r\n\r\n### Bug Fixes\r\n\r\n* **miio:** Better map upload logline ([0e7ce7c](https://github.com/Hypfer/Valetudo/commit/0e7ce7c7486498c55dd0443dd9cb0251fde1dab2))\r\n* **mqtt:** Allow strings as segment IDs ([#891](https://github.com/Hypfer/Valetudo/issues/891)) ([3e30414](https://github.com/Hypfer/Valetudo/commit/3e304146980c8dc2a394a54e7346528ec5a07620)), closes [#889](https://github.com/Hypfer/Valetudo/issues/889)\r\n* **mqtt:** Always publish state ([6a041c6](https://github.com/Hypfer/Valetudo/commit/6a041c62cfff4d2b04eb48e15ee20373512838fe))\r\n* **mqtt:** Only migrate HAss topics if enabled ([#912](https://github.com/Hypfer/Valetudo/issues/912)) ([eb2edaf](https://github.com/Hypfer/Valetudo/commit/eb2edaf969a175648cb0f53405b1780f0ac799d2))\r\n* **mqtt:** Publish state for both hass and homie, as the hass device availability_topic is set to the same topic ([#860](https://github.com/Hypfer/Valetudo/issues/860)) ([219bc34](https://github.com/Hypfer/Valetudo/commit/219bc348e95d78ff7dd279c52d498401b5e9d28c))\r\n* **mqtt:** Remove unnecessary availability_topic ([#859](https://github.com/Hypfer/Valetudo/issues/859)) ([aa85205](https://github.com/Hypfer/Valetudo/commit/aa85205fe09007b4b411ef9de754513dda98a4a0)), closes [#858](https://github.com/Hypfer/Valetudo/issues/858)\r\n* **ntpClient:** Support disabling the ntpClient ([949d8e3](https://github.com/Hypfer/Valetudo/commit/949d8e306b5de34c3a3755532f269f009eb50c51)), closes [#925](https://github.com/Hypfer/Valetudo/issues/925)\r\n* **timers:** Copy-paste antipattern ([e331eda](https://github.com/Hypfer/Valetudo/commit/e331eda332e12a138cd1d7e8b8994208f714833a))\r\n* **timers:** Fix zoned scheduled cleanup ([34443b3](https://github.com/Hypfer/Valetudo/commit/34443b3bea4feac5c48844554cd9a816df6f60ff))\r\n* **ui:** DND should be rendered as localtime but stored as UTC ([fd79163](https://github.com/Hypfer/Valetudo/commit/fd79163c3e9328562346a789ad5cec6e73bfe52d))\r\n* **vendor.dreame:** Ignore uploaded multi-map data ([6f3dcc5](https://github.com/Hypfer/Valetudo/commit/6f3dcc5a9a2a39eed6dcc73f2f08d1f438b09cac))\r\n* **vendor.roborock:** Handle DND as UTC ([8fc9ea8](https://github.com/Hypfer/Valetudo/commit/8fc9ea88d81505259f53e0dad5be3ed0e05d5d6f))\r\n* **vendor.roborock:** Roborock only accepts int coordinates ([c7efd6a](https://github.com/Hypfer/Valetudo/commit/c7efd6af1379de2e94594c440c126b74a36a7962))\r\n* Print error message when failing to load config file ([#914](https://github.com/Hypfer/Valetudo/issues/914)) ([9ebda7e](https://github.com/Hypfer/Valetudo/commit/9ebda7eb52185c5d8474344f0e25a653003c1d87))\r\n* **vendor.roborock:** Remove invalid RoborockCombinedVirtualRestrictionsCapability from V1 robot ([5a2bae4](https://github.com/Hypfer/Valetudo/commit/5a2bae404dfebf5e641a3e490e50f7bd254f633b))\r\n* **vendor.viomi:** Fix system timezone in init script ([#876](https://github.com/Hypfer/Valetudo/issues/876)) ([908d5dd](https://github.com/Hypfer/Valetudo/commit/908d5ddc16b03dbe92e1aafe9e0d4f755312e3d4))\r\n* **vendor.viomi:** Syntax error in init script ([2d53b7c](https://github.com/Hypfer/Valetudo/commit/2d53b7cf8a4e25764795859f88f6b4bb24a291e1))\r\n* **vendor.viomi:** Viomi minor bugfixes ([#820](https://github.com/Hypfer/Valetudo/issues/820)) ([4742214](https://github.com/Hypfer/Valetudo/commit/47422140a77e4253606e1e0f360eaaaebb6831f7))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/43589051"
    }
  },
  {
    "version": "2021.04.0",
    "releaseTimestamp": "2021-04-25T17:40:22.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.04.0</h2></p>\r\n</div>\r\n\r\nThis release features a complete rewrite of the MQTT interface, which brings superior OpenHAB support by fully\r\nimplementing the Homie specification, Segment renaming, Water Usage Controls, No-Mop-Zones, UI improvements and better\r\nstability in low-mem environments such as the Roborock S5 Max\r\n\r\n## Newcomer Guide\r\n\r\nTo answer common questions newcomers or people that haven't actively been following the project may have, there's now\r\nthe [Valetudo Newcomer Guide Early 2021 Edition](https://valetudo.cloud/pages/general/newcomer_guide_early_2021.html) in the docs.\r\n\r\n## MQTT Rewrite\r\n\r\n@depau has spent countless hours completely rewriting the MQTT Interface of Valetudo.\r\nNote that this is a breaking change and will require additional attention from you on upgrade.\r\n\r\nWe're now fully [Homie-compatible](https://homieiot.github.io) which brings much better support for Home Automation systems other than Home Assistant such as [OpenHAB](https://www.openhab.org/) which has recently been completely overhauled.\r\nMake sure to check out [their new demo](https://demo.openhab.org/) as well as the [Valetudo OpenHAB integration docs](https://valetudo.cloud/pages/integrations/openhab-integration.html).\r\n\r\nIf you're using something else such as FHEM or ioBroker, the new Homie MQTT implementation should also be much easier to work with.\r\nDocumentation on the new MQTT schema can be found in the [MQTT Docs](https://valetudo.cloud/pages/integrations/mqtt.html).\r\n\r\nDavide also went the extra mile and wrote an excellent [developer documentation for the new MQTT feature](https://valetudo.cloud/pages/development/mqtt.html) which is a must-read if you want to contribute to that part of Valetudo.\r\n\r\n### Home Assistant MQTT Rewrite FAQ\r\n\r\nValetudo will try its best to auto-migrate your configuration file and Home Assistant configuration.\r\nHowever, the latter may not work 100% all the time. Therefore, here's an FAQ for Home Assistant users migrating to Valetudo 2021.04.0\r\n\r\nQ: Home Assistant now shows everything as unavailable.\r\nA: Refresh the page\r\n\r\nQ: The consumables do not update in Home Assistant\r\nA: Wait one minute, or open valetudo and navigate to the consumables page\r\n\r\nQ: ICBINV does not seem to be retrieving the map\r\nA: The map topic changed, it is now TOPIC_PREFIX/IDENTIFIER/MapData/map-data, update your ICBINV config and ICBINV to 2021.04.0\r\n\r\nQ: Some stuff is still not detected by Home Assistant\r\nA: Reset the autodiscovery configuration by performing the following:\r\n1. Go to the MQTT settings\r\n2. Disable MQTT, enable \"Delete autodiscovery on shutdown\" under \"Home Assistant Autodscovery\".\r\n3. Save MQTT configuration\r\n4. Check Hass to ensure everything has disappeared, refresh the page as needed.\r\n5. Enable MQTT, disable  \"Delete autodiscovery on shutdown\" under \"Home Assistant Autodscovery\".\r\n6. Save MQTT configuration\r\n\r\nQ: `vacuum.send_command` doesn't work anymore\r\nA: Yep. The docs will be updated shortly with information on how to achieve the same stuff now\r\n\r\n## Segment Renaming\r\n\r\nValetudo now supports (re-)naming segments and cleaning them from the UI Homepage in the same way you'd trigger a\r\nZonePreset cleanup.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/116003253-844ed580-a5fd-11eb-9ef1-4325a0104996.png)\r\n\r\n## Water Usage Control and No-Mop Zones\r\n\r\nIt is now possible to control the water grades of your robot using Valetudo, which is a completely new feature\r\nthat never appeared elsewhere before :^)\r\n\r\nFurthermore, no-mop-zones are back as well.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/116003434-38e8f700-a5fe-11eb-8273-39f8f713479d.png)\r\n![image](https://user-images.githubusercontent.com/974410/116003272-9d578680-a5fd-11eb-9c4d-8d954bec7913.png)\r\n\r\n\r\n## Lowmem enhancements\r\n\r\nAs it turns out, running nodejs in very resource-limited embedded environments such as vacuum robots isn't exactly\r\nthe intended core use-case of the runtime, which is why we seem to be pushing the limits especially on devices with\r\nonly 256mb ob ram such as the Roborock S5 Max.\r\n\r\nAnother surprising discovery is that Nodejs Buffers are not part of the configured heap, which is why even though we've\r\nset the maximum heap size to under 40mb, in some cases, the rss of Valetudo grew to over 100mb, which then caused some\r\nrobots to go out of memory.\r\n\r\nFor some reason, the garbage collector simply doesn't care about old and unused Buffers even if the memory pressure rises.\r\nTherefore, for now, we're forcing a manual garbage collection if the memory usage seems odd.\r\n\r\nThis significantly improved the stability on the S5 Max and is now enabled for all builds.\r\nStill, I'd recommend choosing the lowmem build for 256mb ram roborock robots.\r\n\r\n## UI\r\n\r\nStuff such as Virtual Walls will now snap to reasonable angles on creation so that you don't get virtual walls that are infuriatingly almost straight but not quite.\r\n\r\n## Musl\r\n\r\nThanks to recent changes in vercel/pkg, the nodejs base binaries used are now statically linked against musl instead of glibc,\r\nwhich apart from being neat enables us to drop the DNSHack.\r\n\r\nAlso, we've upgraded the runtime to Node v14.16.1\r\n\r\n## Dreame Support\r\n\r\nThe Dreame 1c support has been greatly improved thanks to the help of @frankZZ\r\n\r\nPublic root coming soon\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **core:** Collect our own garbage ([3c3df9a](https://github.com/Hypfer/Valetudo/commit/3c3df9a584cdb7193715b583fbb90c9dcd8591ca))\r\n* **core:** MapSegmentRenameCapability ([6371291](https://github.com/Hypfer/Valetudo/commit/63712911c5a81584fc6482ac94d587aa35e5bfbb))\r\n* **MockRobot:** add GoToLocationCapability and MockMap ([2957e25](https://github.com/Hypfer/Valetudo/commit/2957e25bb57c9f9c8f8c68dcf4691900b4e68544))\r\n* **MockRobot:** add MapResetCapability ([531498b](https://github.com/Hypfer/Valetudo/commit/531498b47327ddf4be6337806e68020eafa597eb))\r\n* **MockRobot:** Add MockCarpetModeControlCapability ([#759](https://github.com/Hypfer/Valetudo/issues/759)) ([5bd5fb7](https://github.com/Hypfer/Valetudo/commit/5bd5fb7a99988cc6f0db7d2ed2d39b16d756cca7))\r\n* **MockRobot:** Add MockConsumableMonitoringCapability ([6d8b8e0](https://github.com/Hypfer/Valetudo/commit/6d8b8e092ad31190c111c7a0b12f5acbcb319b5b))\r\n* **MockRobot:** Add MockDoNotDisturbCapability ([f85194c](https://github.com/Hypfer/Valetudo/commit/f85194c0192a8a0d5b6b0058f6250841eb08d89f))\r\n* **MockRobot:** Add MockWifiConfigurationCapability ([accba05](https://github.com/Hypfer/Valetudo/commit/accba051906cdb111e734bf1950484f918562e9c))\r\n* **MockRobot:** add PersistentMapControlCapability ([f91e8e7](https://github.com/Hypfer/Valetudo/commit/f91e8e7e38d0a14de7f22fd432ef14cb8dd5d09f))\r\n* **MockRobot:** Add speaker capabilities ([12d1a27](https://github.com/Hypfer/Valetudo/commit/12d1a27119fad31a9f4d3b56c3a73b9f0cde24f2))\r\n* **mqtt:** Add MapSegmentationCapabilityMqttHandle ([#842](https://github.com/Hypfer/Valetudo/issues/842)) ([0534888](https://github.com/Hypfer/Valetudo/commit/0534888b23295d031fac7358a1846a0355b7b504))\r\n* **mqtt:** Add vacuum error state description property ([#850](https://github.com/Hypfer/Valetudo/issues/850)) ([14793c7](https://github.com/Hypfer/Valetudo/commit/14793c7744aa38f83de5c8eab88b0abfebd1edb1)), closes [#816](https://github.com/Hypfer/Valetudo/issues/816)\r\n* **mqtt:** Await MQTT disconnect before proceeding with shutdown ([1c0410c](https://github.com/Hypfer/Valetudo/commit/1c0410c1d6fe0554609baaaa521ebe9d300fe5f3))\r\n* **mqtt:** Provide segment information ([f104189](https://github.com/Hypfer/Valetudo/commit/f1041890164d451d7ee9e6c8a991a8f360bd394c))\r\n* **mqtt:** Remove increase/decrease from intensity capability ([#843](https://github.com/Hypfer/Valetudo/issues/843)) ([e6fd6e4](https://github.com/Hypfer/Valetudo/commit/e6fd6e4534db0366078b7cd7797dc0f0051ade99))\r\n* **ui:** Add dialog for renaming segments ([#772](https://github.com/Hypfer/Valetudo/issues/772)) ([306b8ba](https://github.com/Hypfer/Valetudo/commit/306b8ba9c27331bb79f886b468b0edadd86c1e70))\r\n* **ui:** add Segments on home ([2129e22](https://github.com/Hypfer/Valetudo/commit/2129e2278362424f42eab7c2062094461911f720)), closes [#773](https://github.com/Hypfer/Valetudo/issues/773)\r\n* **ui:** capitalize robot states in UI ([#765](https://github.com/Hypfer/Valetudo/issues/765)) ([c988e69](https://github.com/Hypfer/Valetudo/commit/c988e6992d85b84a1d24c1f01b097d7734ac6603))\r\n* **ui:** Generate consumables list dynamically ([#764](https://github.com/Hypfer/Valetudo/issues/764)) ([05d658b](https://github.com/Hypfer/Valetudo/commit/05d658bc90fb8a4fee13a81caae4fb2a0fb5de8c))\r\n* **ui:** Snap zones and walls to grid and reasonable angles to implement [#796](https://github.com/Hypfer/Valetudo/issues/796) ([25836e8](https://github.com/Hypfer/Valetudo/commit/25836e87b70e9065d943daf1ce85478bee179074))\r\n* **ui:** Toggle button states depending on Robot Capabilities ([#769](https://github.com/Hypfer/Valetudo/issues/769)) ([cc66d52](https://github.com/Hypfer/Valetudo/commit/cc66d5292f1ba0306e8b5362b63860d177fb5b0f))\r\n* **ui:** Water Usage Control ([cf375ce](https://github.com/Hypfer/Valetudo/commit/cf375ceeb65ace4f0cbe99a7ef58d865426e6e07))\r\n* **vendor.dreame:** 1C voicepack install support ([#795](https://github.com/Hypfer/Valetudo/issues/795)) ([b72ca53](https://github.com/Hypfer/Valetudo/commit/b72ca53f99bfa94f693c1b9c36a904cc417c2533))\r\n* **vendor.dreame:** Add Dreame F9 ([4fe0ff7](https://github.com/Hypfer/Valetudo/commit/4fe0ff7fd952533a073cd51432626f99aeadd856))\r\n* **vendor.dreame:** Add more 1C variants ([9e2e194](https://github.com/Hypfer/Valetudo/commit/9e2e194bcdacc141fc87e5c49489eb669de9c8a9))\r\n* **vendor.dreame:** Add MOVA Z500 ([0107932](https://github.com/Hypfer/Valetudo/commit/01079324727b71acd17eb8d8b16a2547663179b3))\r\n* **vendor.dreame:** DreameCarpetModeControlCapability ([2d674d4](https://github.com/Hypfer/Valetudo/commit/2d674d4d6381f9ca7f146d71445e671f14195773))\r\n* **vendor.dreame:** DreameMapResetCapability ([f60fe24](https://github.com/Hypfer/Valetudo/commit/f60fe242ba8b2bba4560a7c91443ba0c07dbd133))\r\n* **vendor.dreame:** DreameWaterUsageControlCapability ([8be7cd4](https://github.com/Hypfer/Valetudo/commit/8be7cd437bcd2cb938ea5798f767b112c22f87b5))\r\n* **vendor.viomi:** Add viomi.vacuum.v6 to supported devices ([#849](https://github.com/Hypfer/Valetudo/issues/849)) ([a18633c](https://github.com/Hypfer/Valetudo/commit/a18633c97bb3897ecf60d6736b68ab9f9477a3ed)), closes [#848](https://github.com/Hypfer/Valetudo/issues/848)\r\n* **webserver:** Add X-Valetudo-Version header ([d494510](https://github.com/Hypfer/Valetudo/commit/d494510e0209f743e5f8bc8bef898a9e787bf9db))\r\n* Debug capability ([#813](https://github.com/Hypfer/Valetudo/issues/813)) ([4866475](https://github.com/Hypfer/Valetudo/commit/48664757035ebd0a6493c3de5433c02eb197800e))\r\n* Remove DNSHack since we're using musl now ([79194b6](https://github.com/Hypfer/Valetudo/commit/79194b690d27d4ba012536564ed35cad4d3df3b4))\r\n* SSE Endpoints for State and StateAttributes ([c90d426](https://github.com/Hypfer/Valetudo/commit/c90d426cb96c26b2326d64e2a7da27694ea08014))\r\n* **vendor.dreame:** 1C active zone & segments ([2281701](https://github.com/Hypfer/Valetudo/commit/22817015de62d93a9aaf46fb9fa4304d66603d6e))\r\n* **vendor.dreame:** DreameMapSegmentRenameCapability ([1470c53](https://github.com/Hypfer/Valetudo/commit/1470c539d3fb0425906b989f59adaad4b9efa739))\r\n* **vendor.dreame:** Implement/setup most capabilities of the 1C ([256b907](https://github.com/Hypfer/Valetudo/commit/256b9076a3727e3f85bfc8412e296e8009a42052))\r\n* **vendor.dreame:** Update 1C properties_changed handling ([83dddfe](https://github.com/Hypfer/Valetudo/commit/83dddfe402183456d50781435b154281d03acf1e))\r\n* **vendor.dreame:** Use currently configured water grade and fanspeed when starting a zone or segment cleanup ([200b13b](https://github.com/Hypfer/Valetudo/commit/200b13b5c8434375db486b93067278ddca490a42))\r\n* **vendor.roborock:** RoborockManualControlCapability ([59b9bd5](https://github.com/Hypfer/Valetudo/commit/59b9bd5e7a315c21f459613a9f09e8f50787ab7b))\r\n* **vendor.roborock:** RoborockMapSegmentRenameCapability ([4d6a1a4](https://github.com/Hypfer/Valetudo/commit/4d6a1a415c67c2d4e43f8220f7babe18e322e641))\r\n* **vendor.roborock:** RoborockWaterUsageControlCapability ([fdebd3c](https://github.com/Hypfer/Valetudo/commit/fdebd3c45df68797b353866dfd7a1e8684600a99))\r\n* **vendor.viomi:** Add MapResetCapability ([#785](https://github.com/Hypfer/Valetudo/issues/785)) ([696d76b](https://github.com/Hypfer/Valetudo/commit/696d76be682a905c809298c86032041243a2e1fe))\r\n* **vendor.viomi:** Add ViomiMapSegmentationCapability ([#762](https://github.com/Hypfer/Valetudo/issues/762)) ([1a9eef4](https://github.com/Hypfer/Valetudo/commit/1a9eef40b34fe991ed26989033daafdd8ace856d))\r\n* **vendor.viomi:** Add ViomiMapSegmentRenamenCapability ([0123f24](https://github.com/Hypfer/Valetudo/commit/0123f245bf6b7cedabaebf61da15f1959727c9e8))\r\n* **vendor.viomi:** Manual control capability ([#740](https://github.com/Hypfer/Valetudo/issues/740)) ([a5324e8](https://github.com/Hypfer/Valetudo/commit/a5324e8ece40709be7168730ef77978c3f971d94))\r\n* **vendor.viomi:** ViomiMapSegmentEditCapability ([#766](https://github.com/Hypfer/Valetudo/issues/766)) ([a210b0e](https://github.com/Hypfer/Valetudo/commit/a210b0edcadc29e7ab82e29258b2594fc622c53c))\r\n* no-mop zones ([f011023](https://github.com/Hypfer/Valetudo/commit/f0110231fe84f9ae7d7ed219bcece1bf387f2088))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **core:** Add name to ValetudoMapSegment ([e9da2cf](https://github.com/Hypfer/Valetudo/commit/e9da2cf5ea2cc408365fc96fb34430fcf73585d4))\r\n* **core:** Lowmem enhancements ([5787afa](https://github.com/Hypfer/Valetudo/commit/5787afa34d281e709dbe7e5f81af33e5623154e0))\r\n* **core:** Segment IDs should be strings ([97c832e](https://github.com/Hypfer/Valetudo/commit/97c832ea527665459ad9e3eb2c8f562f70a08478))\r\n* **miio:** Improve error message on missing keys in device.conf ([7ed177a](https://github.com/Hypfer/Valetudo/commit/7ed177a85ac50ec23a913c5265511e9adf839f8a))\r\n* **mqtt:** Await close event before considering MQTT closed ([1afa717](https://github.com/Hypfer/Valetudo/commit/1afa717d6e4815ba773200523324a8e835cc382d))\r\n* **mqtt:** Do not disconnect on cfg reload if not connected ([5c74342](https://github.com/Hypfer/Valetudo/commit/5c74342f94774333b42398c9a4373015bf9bbc4d))\r\n* **mqtt:** Handle nested reconfiguration ([#841](https://github.com/Hypfer/Valetudo/issues/841)) ([c0ff5ce](https://github.com/Hypfer/Valetudo/commit/c0ff5ce03fdcdf282f56adfabf3362bae5de38c6))\r\n* **mqtt:** Make BasicCtl actually home when HOME is sent ([8272dd5](https://github.com/Hypfer/Valetudo/commit/8272dd59e0fcbfd75ad75c0b992b56469cab2c53))\r\n* **mqtt:** Map zone presets to zones ([#839](https://github.com/Hypfer/Valetudo/issues/839)) ([8ac882f](https://github.com/Hypfer/Valetudo/commit/8ac882f75e3b4c67bc2a9192f28074e4609aaa58))\r\n* **mqtt:** Remove test leftovers from consumable monitoring ([#831](https://github.com/Hypfer/Valetudo/issues/831)) ([ec289a0](https://github.com/Hypfer/Valetudo/commit/ec289a08de38f4e24bfab61f2467cee9d99e2cba))\r\n* **ui:** instead of hiding settings based on capabilities at page load, unhide at page load ([#774](https://github.com/Hypfer/Valetudo/issues/774)) ([e5f0f4f](https://github.com/Hypfer/Valetudo/commit/e5f0f4fe2494ab7faf6825f54bfd38b8217d40e1))\r\n* **vendor.roborock:** do not send empty layers ([#809](https://github.com/Hypfer/Valetudo/issues/809)) ([a2e1c21](https://github.com/Hypfer/Valetudo/commit/a2e1c21bcc3dbf12a83fdaea84701b98d9387c17))\r\n* **vendor.roborock:** Don't store null to this.state.map on map parse failure ([ae4bf24](https://github.com/Hypfer/Valetudo/commit/ae4bf248d6c3848abae0a6ebc039aa2f0efc6bbc))\r\n* **vendor.roborock:** Fix segment rename ([0bed81a](https://github.com/Hypfer/Valetudo/commit/0bed81ab4f0ddccdad044ce805dda3af8736eb96))\r\n* **vendor.roborock:** Fix V1 capabilities ([6cdcc1e](https://github.com/Hypfer/Valetudo/commit/6cdcc1eb00a414d5f450c83f27f0267c082e7099))\r\n* **vendor.roborock:** Renaming map segments always requires the full list of names ([559d1ad](https://github.com/Hypfer/Valetudo/commit/559d1ada913e04258217134f3c7aa148d7eb7e21))\r\n* **vendor.roborock:** Roborock expects a number as the segmentId ([1e6db81](https://github.com/Hypfer/Valetudo/commit/1e6db81e71d43bf2060dec7ff90173a4cdc6e150))\r\n* **vendor.viomi:** Don't store paths with zero points ([77e7128](https://github.com/Hypfer/Valetudo/commit/77e712813191bc427306c80bf79f1b81f47202fd))\r\n* **vendor.viomi:** Fix \"Unknown water grade\" ([#784](https://github.com/Hypfer/Valetudo/issues/784)) ([04f2df4](https://github.com/Hypfer/Valetudo/commit/04f2df4c1cb546d195f3414c79557fcf0d320ae1))\r\n* **vendor.viomi:** Fix basic control functionality ([#782](https://github.com/Hypfer/Valetudo/issues/782)) ([a0fa7f4](https://github.com/Hypfer/Valetudo/commit/a0fa7f49f7f0779357c3ce61d354badd5bac07ed))\r\n* **vendor.viomi:** Fix last clean time ([#822](https://github.com/Hypfer/Valetudo/issues/822)) ([21b5876](https://github.com/Hypfer/Valetudo/commit/21b5876362939fc2e0d7ee7edbb4651411be39da))\r\n* **vendor.viomi:** Fix map issues (hopefully) ([#819](https://github.com/Hypfer/Valetudo/issues/819)) ([07a1c7a](https://github.com/Hypfer/Valetudo/commit/07a1c7ad78e3593b90e12ba0bb8286ed0c4f58e1))\r\n* **vendor.viomi:** Fix operation mode selection ([710758d](https://github.com/Hypfer/Valetudo/commit/710758d4840b06b3bff3bfb1e7dd521e48fa3d3b))\r\n* **vendor.viomi:** Fix water grade controlling fan speed instead ([#791](https://github.com/Hypfer/Valetudo/issues/791)) ([3f4d844](https://github.com/Hypfer/Valetudo/commit/3f4d844c2979527624623bb2ff67654a0961f768))\r\n* **vendor.viomi:** Increase timeout for set_timezone ([#806](https://github.com/Hypfer/Valetudo/issues/806)) ([a128a91](https://github.com/Hypfer/Valetudo/commit/a128a91499d94f0e75d17f87396571f6c889a7ac)), closes [#799](https://github.com/Hypfer/Valetudo/issues/799)\r\n* **vendor.viomi:** Raise default miIO timeout ([#817](https://github.com/Hypfer/Valetudo/issues/817)) ([5f6068d](https://github.com/Hypfer/Valetudo/commit/5f6068d7790a8f3f322f4825493608605ed80a63))\r\n* **vendor.viomi:** replace fanSpeeds with waterGrades ([#825](https://github.com/Hypfer/Valetudo/issues/825)) ([2b5d3e6](https://github.com/Hypfer/Valetudo/commit/2b5d3e69b9ea9a1ab966efc67652f55e638bf0f4))\r\n* **vendor.viomi:** Viomi segment edit fixes ([#821](https://github.com/Hypfer/Valetudo/issues/821)) ([5c8495c](https://github.com/Hypfer/Valetudo/commit/5c8495ce2eff247a667e87b2649c98ee13bddf28))\r\n* Improve state handling in MockConsumableMonitoringCapability ([1138c84](https://github.com/Hypfer/Valetudo/commit/1138c8466ca776960e0dc6030b1efe5f6e8343f2))\r\n* MapParsers should not return empty path map entities ([371ceea](https://github.com/Hypfer/Valetudo/commit/371ceea9e4e7b591b19b0dc3d4887feca3ab8692))\r\n* Typo in ConsumableStateAttribute ([7d64a1a](https://github.com/Hypfer/Valetudo/commit/7d64a1a90407d555cdd84eca6d1fae2ed828d5e2))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/41971628"
    }
  },
  {
    "version": "2021.03.0",
    "releaseTimestamp": "2021-03-15T18:15:42.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.03.0</h2></p>\r\n</div>\r\n\r\nThis release features segment editing, SVG path and icon rendering, and a cool new companion service.\r\n\r\n## Segment editing\r\n\r\nYep. It's finally here.<br/>\r\nStarting with this release, you can split and merge your Segments, which you might also refer to as Rooms.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/111201031-a565e480-85c2-11eb-8650-ec0b46d9b348.png)\r\n\r\n\r\nIf this was the only thing holding you back from switching back to Valetudo: Welcome back.\r\n\r\n## SVG Path + Icons\r\n\r\nThe map rendering was reworked. It's still a canvas but everything that isn't pixel-based is now drawn as an SVG, which results in greatly improved visual fidelity.\r\nSee for yourself:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/111201075-b31b6a00-85c2-11eb-894e-877a136a84e6.png)\r\n\r\n\r\nFurthermore, this might also improve performance. In any case, I'm quite happy with how good zooming in looks now.\r\n\r\n## Valeronoi\r\n\r\n@ccoors built a companion service which connects to Valetudo and generates a Wifi signal strength heatmap.<br/>\r\nYou should definitely check that out. It's great!\r\n\r\n![image](https://user-images.githubusercontent.com/974410/111201122-be6e9580-85c2-11eb-9d7c-3dcdcf7cd8f3.png)\r\n\r\n\r\nIts repo can be found here: [https://github.com/ccoors/Valeronoi](https://github.com/ccoors/Valeronoi)\r\n\r\nI'm looking forward to seeing more companion services appear in the near future.\r\n\r\n## More Valetudo Builds\r\n\r\nStarting with this release, there's more than one Valetudo binary available for download in the releases section.<br/>\r\nThe regular `valetudo` binary has been renamed to `valetudo-armv7` so just take that one if you're upgrading.\r\n\r\nThere's also a `valetudo-armv7-lowmem` with a slightly decreased heap size. I haven't testet that very much yet so feel free to do that\r\nespecially if your robot only has 256mb or less of ram available.\r\n\r\nAnd finally there's now a `valetudo-aarch64` binary to support robots with that cpu architecture.\r\n\r\nWhile doing that, I've also upgraded the Valetudo nodejs base binaries to `v14.16.0` which should include performance, stability and security improvements.\r\n\r\n## Misc\r\n\r\n### VoicePacks\r\n\r\n@depau added a way to install new VoicePacks. There's no UI support for that and the request required might vary from vendor to vendor.<br/>\r\nUsually, it should be sufficient to provide an URL to the VoicePack + its hash and it should install fine.\r\n\r\n\r\n### MockRobot\r\n\r\n@alexkn added a `MockRobot` to make development easier and enable you to contribute to Valetudo even if you don't have a robot around.\r\n\r\n### ID Button\r\n\r\nFurthermore, I've added an ID button to the Zone and Location Preset map edit view, which shows you the ID of the preset you're editing so that you can\r\nuse it via MQTT.\r\nIt's pretty much a hack but that's better than nothing \\_()_/\r\n\r\n### Git Commit UI Info\r\n\r\nThe info section of the UI will now also contain your currently running git commit id, which should make debugging a bit easier in certain situations.\r\n\r\n### Docs\r\n\r\nThe Docs at [valetudo.cloud](https://valetudo.cloud) have been improved and now feature an autogenerated overview of all supported robots\r\nplus a page that explains all available capabilities.\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **core:** Log and display git commit id ([2d94408](https://github.com/Hypfer/Valetudo/commit/2d9440832a0f0c5efa83e5a8d065907e1d9b89b2))\r\n* **MockRobot:** add BatteryStateAttribute ([584bfcb](https://github.com/Hypfer/Valetudo/commit/584bfcb1ba7e782d0697c36d4a3fd467451c9d6c))\r\n* **MockRobot:** add ModelName ([db643c6](https://github.com/Hypfer/Valetudo/commit/db643c687f9fb1d43a4a29b41ffe18af93542c78))\r\n* **MockRobot:** add returning state to BasicControlCapability ([721cd78](https://github.com/Hypfer/Valetudo/commit/721cd78b053ac72fdcbe01df83e7a741f0204a2b))\r\n* **MockRobot:** introduce MockRobot ([96c4bae](https://github.com/Hypfer/Valetudo/commit/96c4bae2750971d121e3165b9aff3cc6f76398ca))\r\n* **MockRobot:** MockLocateCapability ([#752](https://github.com/Hypfer/Valetudo/issues/752)) ([5c41d49](https://github.com/Hypfer/Valetudo/commit/5c41d499b2478b09007a1af1a395f3a946dcb2ea))\r\n* **ui:** Add info button which shows the id of a zone or location preset ([ea7cce4](https://github.com/Hypfer/Valetudo/commit/ea7cce4a27c54412a6818e4b969d294d0190493c))\r\n* **ui:** Draw path as SVG ([48e5d54](https://github.com/Hypfer/Valetudo/commit/48e5d54417fb0e11cb92ea82930ce81580f70743))\r\n* **ui:** Nice rounded paths ([59aaee3](https://github.com/Hypfer/Valetudo/commit/59aaee3bf9d2cdfd3823ef0f91566d17b388af1d))\r\n* **ui:** Render icons as SVGs ([12f2907](https://github.com/Hypfer/Valetudo/commit/12f290741bb16c05530294a934f8167069288675))\r\n* **ui:** Segment editing ([e306569](https://github.com/Hypfer/Valetudo/commit/e306569d2daaa6f8ab7cfe75d3cd4a99b37faa8b))\r\n* **vendor.dreame:** DreameVoicePackManagementCapability ([f9d6ab1](https://github.com/Hypfer/Valetudo/commit/f9d6ab13ad8939b5fbdb09372b2f8b3fc3ac5187))\r\n* **vendor.dreame:** Fully implemented segment joining + splitting ([82e4fe3](https://github.com/Hypfer/Valetudo/commit/82e4fe3609b706c7a38efd47086604d5e92c1f36))\r\n* **vendor.roborock:** Add support for the S4 Max ([#699](https://github.com/Hypfer/Valetudo/issues/699)) ([f7eb451](https://github.com/Hypfer/Valetudo/commit/f7eb45105751827d371661e78b44b5e2d8c190d6))\r\n* **vendor.roborock:** RoborockVoicePackManagementCapability ([d81befc](https://github.com/Hypfer/Valetudo/commit/d81befc121116864faad129a06327325bf3b8dd4))\r\n* **vendor.viomi:** Ensure timezone is UTC ([#732](https://github.com/Hypfer/Valetudo/issues/732)) ([bafa158](https://github.com/Hypfer/Valetudo/commit/bafa158814c3185cffbbaa9c9529227883f13071)), closes [#728](https://github.com/Hypfer/Valetudo/issues/728)\r\n* **vendor.viomi:** initial implementation of ViomiZoneCleaningCapability class ([#675](https://github.com/Hypfer/Valetudo/issues/675)) ([f760137](https://github.com/Hypfer/Valetudo/commit/f7601370353659ce8a35e6c2a942c48d4f614226))\r\n* **vendor.viomi:** Speaker control capabilities ([#738](https://github.com/Hypfer/Valetudo/issues/738)) ([630d2ab](https://github.com/Hypfer/Valetudo/commit/630d2ab4f7c52c5c26d306e2b4e34d518123e64d))\r\n* **vendor.viomi:** ViomiCarpetModeControlCapability ([#739](https://github.com/Hypfer/Valetudo/issues/739)) ([fe31438](https://github.com/Hypfer/Valetudo/commit/fe3143854ff94de1b11d5c86720b97dbeff44058))\r\n* **webserver:** Fully implemented MapSegmentationCapabilityRouter ([eda7dcd](https://github.com/Hypfer/Valetudo/commit/eda7dcd071ac6d5438fbd1124c5b78704a8dc2ed))\r\n* Add os.freemem() to debug memoryStats ([5c7dfc3](https://github.com/Hypfer/Valetudo/commit/5c7dfc37392467602acea038407a12ccb39244e3))\r\n* Add voice pack managemenet capability ([#725](https://github.com/Hypfer/Valetudo/issues/725)) ([c953e2b](https://github.com/Hypfer/Valetudo/commit/c953e2b558b7bce5eace00655c3fb2f3ad30b0d6))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **ui:** Fix map canvas size ([3c05e2d](https://github.com/Hypfer/Valetudo/commit/3c05e2d9917e222a777a9d86207712d3b798dbec))\r\n* Fix default map ([25eac7c](https://github.com/Hypfer/Valetudo/commit/25eac7c57eb6b761ac6124fe6278cc628aad24a0))\r\n* **dnshack:** Don't try resolving ip addresses ([b8c456d](https://github.com/Hypfer/Valetudo/commit/b8c456d20cfe27946390aa528a7c99ab0a02801d))\r\n* **logger:** Use the windows equivalent of /dev/null on windows machines ([fa8f909](https://github.com/Hypfer/Valetudo/commit/fa8f9097496111d4664600553538729e105d8858))\r\n* **miio:** Bind dummycloud after setting event listeners ([#741](https://github.com/Hypfer/Valetudo/issues/741)) ([2aba77e](https://github.com/Hypfer/Valetudo/commit/2aba77e1330690bb7b422e29a79951c06d62e671))\r\n* **miio:** Discard handshake packets with older stamps to avoid endless loops with 100% cpu ([e274cf1](https://github.com/Hypfer/Valetudo/commit/e274cf145b635e2cd421657da29e53e54c8e521a))\r\n* **miio:** Fix broken development token refresh ([9217f70](https://github.com/Hypfer/Valetudo/commit/9217f70702eec6fe5ba0b2e41382eaaf42482d08))\r\n* **miio:** Fix Valetudo crashing due to missing onMessage function ([4512fe0](https://github.com/Hypfer/Valetudo/commit/4512fe08a3c9bbb46aa734a625261fa8418ba6e1))\r\n* **miio:** Various fixes related to Valetudo crashing in some situations ([a62d7e3](https://github.com/Hypfer/Valetudo/commit/a62d7e35745180260d4a8a28d0b40332e7cf1f66))\r\n* **mqtt:** Log on command-less custom command json ([3fa8232](https://github.com/Hypfer/Valetudo/commit/3fa823212fe97cb62704f04c560bce365a5dfd23))\r\n* **ui:** Decouple svg path generation from rendering to eliminate flicker ([9ebee25](https://github.com/Hypfer/Valetudo/commit/9ebee2515df021ddffac52ae1ed537430e9239f1))\r\n* **ui:** do not cache API responses ([#698](https://github.com/Hypfer/Valetudo/issues/698)) ([6e3b462](https://github.com/Hypfer/Valetudo/commit/6e3b462a36db49819718d47d58cb708728477360))\r\n* **ui:** Fix copy-paste error ([4479777](https://github.com/Hypfer/Valetudo/commit/4479777743df99ce4f042f5f641ee6a22e09f292))\r\n* **ui:** Fix initial map offset ([#711](https://github.com/Hypfer/Valetudo/issues/711)) ([a408edc](https://github.com/Hypfer/Valetudo/commit/a408edce5139f4aa2d767d52da0bb527eec8160f))\r\n* **ui:** Fix log UI only working once ([#718](https://github.com/Hypfer/Valetudo/issues/718)) ([2d02570](https://github.com/Hypfer/Valetudo/commit/2d02570f0c85c078941e67020e5e02a89fa62894))\r\n* **ui:** Fix new zone placement ([036752a](https://github.com/Hypfer/Valetudo/commit/036752a58ae73fd7180d4c46ef0424d38b52dc48))\r\n* **ui:** Only show presets if the robot is capable of having those ([d996beb](https://github.com/Hypfer/Valetudo/commit/d996beb4291146e71c90971dc3654926ed72f698))\r\n* **ui:** Reduce path render resolution ([aa64016](https://github.com/Hypfer/Valetudo/commit/aa64016c29151499cad8f7fef11d8826e7cd58ad))\r\n* **ui:** Reduce path render solution and render charger + robot as locations ([1c4e4f3](https://github.com/Hypfer/Valetudo/commit/1c4e4f3374251d64f3c79689747050c469a02ad7))\r\n* **ui:** Remove old paths if they vanish from the map data ([eef055e](https://github.com/Hypfer/Valetudo/commit/eef055ed42b208deb1caaf0d2fe1b16cd48ca046))\r\n* **ui:** Various scaling-related issues ([fb92c16](https://github.com/Hypfer/Valetudo/commit/fb92c162cff7f6f42099781596cd82e9afeeca4d))\r\n* **vendor.dreame:** Maps are always persistent ([3630fa3](https://github.com/Hypfer/Valetudo/commit/3630fa36d3137516245b738ee0102721fb4f217c))\r\n* **vendor.roborock:** Fix map not being available on a fresh boot for another 60s ([f4c4c1a](https://github.com/Hypfer/Valetudo/commit/f4c4c1a0784b4930bd6913cd9da6f092e1f0aa03))\r\n* **vendor.roborock:** Fix S4 detection logic ([#729](https://github.com/Hypfer/Valetudo/issues/729)) ([75974a5](https://github.com/Hypfer/Valetudo/commit/75974a5be0735035193118594f0ee3362d3e2a43))\r\n* **vendor.roborock:** RoborockS4 actually needs the MultiMapPersistentMapControlCapability ([6279831](https://github.com/Hypfer/Valetudo/commit/6279831f16c60a8115c9a2849e1c1258d75e2477))\r\n* **vendor.viomi:** Use marketing model name for viomi.v8 ([#742](https://github.com/Hypfer/Valetudo/issues/742)) ([7987168](https://github.com/Hypfer/Valetudo/commit/79871685bec0b4afb89d6b8e41f13d5db4dd8042))\r\n* **vendor.viomi:** Wait a few seconds after cloud connected before fixing TZ ([#736](https://github.com/Hypfer/Valetudo/issues/736)) ([f9bfb00](https://github.com/Hypfer/Valetudo/commit/f9bfb001c68f20f9438ad7703f4bbb3dd9e84626))\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/39835836"
    }
  },
  {
    "version": "2021.02.0",
    "releaseTimestamp": "2021-02-16T22:37:28.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.02.0</h2></p>\r\n</div>\r\n\r\nThis release features Home Assistant MQTT Autoconfig for the Map Data, an NTP Client and more.\r\n\r\n## Map Autodiscovery\r\n\r\nThe Valetudo Map Data is now optionally (on by default) provided as embedded and compressed text of a PNG file. <br/>\r\nThis is not only easy due to the nature of the PNG file format but also 100% according to specs.\r\nWe're actually publishing a completely valid PNG to MQTT containing the full Map as a JSON.\r\n\r\nThis enables Valetudo to do Home Assistant Autoconfiguration for the Map as well since camera entities aren't persistent to the HA database and therefore no user interaction regarding the exclusion of the map entity from the recorder is needed.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/108130382-de886300-70af-11eb-9dca-146b677cad18.png)\r\n\r\n\r\nI'm quite happy with this approach because there's no added CPU load to Valetudo since we're just sandwiching the deflated Map JSON between other PNG chunks.\r\nFurthermore, providing the raw map data instead of an image enables better interactions with the map such as\r\n- better zooming\r\n- custom colors\r\n- custom icons\r\n- mouseover things\r\n- click-to-select things\r\n\r\netc.\r\n\r\n\r\nThe [lovelace-valetudo-map-card](https://github.com/TheLastProject/lovelace-valetudo-map-card) is required to extract and render\r\nthe map data from the camera image.\r\n\r\nIf you were already using the Valetudo Map in Home Assistant, you will need to revise your setup.<br/>\r\nNo worries though. It is much easier now :)\r\n\r\n## NTP Client\r\n\r\nDuring \"normal\" cloud operation, miio-based robots receive the time via the miio protocol. This of course resulted in\r\nthe robots syncing their time to their time, which doesn't make much sense and may even interfere with some features.\r\n\r\nAlso, not all robot firmwares contain a build of `ntpd` and cross-compiling can be hard.\r\n\r\nTherefore, there's now a simple NTP Client integrated into Valetudo, which by default fetches the time from `pool.ntp.org` on startup\r\nand every 8 hours after a successful sync.\r\n\r\nIt can be disabled via the configuration file and doesn't do anything if Valetudo isn't running in `embedded`-mode.\r\n\r\nOf course, you can also change the ntp server to a different one in the configuration file if you happen to own a\r\nstratum-0 cesium atomic clock or even a fritzbox with an integrated ntp server.\r\n\r\n## UI-Accessible Logs\r\n\r\nThanks to @ccoors, you will now find the contents of your Valetudo logfile under Settings > Info in the Web UI.\r\nNo need for SSH anymore.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/108130399-e516da80-70af-11eb-8b15-57649eac37af.png)\r\n\r\n\r\nIt is also possible to temporarily increase the Loglevel there until the next reboot.\r\n\r\n\r\nIf you're looking for stuff like the firmware version or your local token, the log viewer is the right place for you.\r\n\r\n## Misc\r\n\r\n@bensweet86 ported even more capabilities over to the new capabilities system. Starting with this release, Valetudo is now\r\nable to both control the volume and the carpet mode setting again.\r\n\r\nFurthermore, he also fixed a long outstanding bug regarding pinch to zoom on iOS devices.\r\n\r\n\r\n\r\nDreame support has been improved as well.\r\nPublic root for those is still TBA.\r\n\r\n\r\n\r\nThere were also quite a few changes regarding the cloud redirection in this release.\r\nPlease make sure to follow the official upgrade instructions so that you don't run into any issues.\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **logger:** Log config and logfile location to logfile ([0171a8d](https://github.com/Hypfer/Valetudo/commit/0171a8d1ba12c96045124d0e1f5b1b215655c314))\r\n* Add Valetudo log to UI ([#690](https://github.com/Hypfer/Valetudo/issues/690)) ([89320f4](https://github.com/Hypfer/Valetudo/commit/89320f45c4b7e49d8246f9b2508bdacd4c549efb))\r\n* Log the firmware version if embedded ([4bd09c8](https://github.com/Hypfer/Valetudo/commit/4bd09c8b8ad0d2f411630430a88dacd3e6230063))\r\n* **core:** Change the interface of the SpeakerVolumeControlCapability and add the SpeakerTestCapability ([56b0637](https://github.com/Hypfer/Valetudo/commit/56b06378a8c183d488eb503056bee39ff8872486))\r\n* **mqtt:** Home Assistant Autodiscovery for Maps by embedding the map data in a png ([83d1d13](https://github.com/Hypfer/Valetudo/commit/83d1d13bc47bb7a16f1a9ed8937ce616a0f2b5ec))\r\n* **vendor.dreame:** Consumable monitoring ([e986687](https://github.com/Hypfer/Valetudo/commit/e986687f649e0f3c061653aac9d362b74bde5065))\r\n* **vendor.dreame:** D9 error codes ([669f192](https://github.com/Hypfer/Valetudo/commit/669f19273eb9e849b578508adaa7e37f99d79fed))\r\n* **vendor.dreame:** Improve handling of RISM maps ([186abd3](https://github.com/Hypfer/Valetudo/commit/186abd34852d62b3ab418216a500bfbb72423b85))\r\n* **vendor.dreame:** Minor improvements for D9 Firmware 1072 ([ef949be](https://github.com/Hypfer/Valetudo/commit/ef949be485ba97bd8c65066ff5c3f427fbf35f6e))\r\n* **vendor.dreame:** Virtual Restrictions ([3f1f494](https://github.com/Hypfer/Valetudo/commit/3f1f4940c582534f6fb5d18442e21e1183498378))\r\n* **vendor.dreame:** Volume Control + Volume Test ([1509be3](https://github.com/Hypfer/Valetudo/commit/1509be361552f76148c4f38b3d7ec1da3c400735))\r\n* **vendor.roborock:** Roborock/Capability Carpet Mode ([#661](https://github.com/Hypfer/Valetudo/issues/661)) ([54ca606](https://github.com/Hypfer/Valetudo/commit/54ca6068dbe8f09cf8105fd11c50b9107c2b739f)), closes [#656](https://github.com/Hypfer/Valetudo/issues/656)\r\n* **vendor.roborock:** Volume Control + Volume Test ([4a47939](https://github.com/Hypfer/Valetudo/commit/4a47939ebea220e19ed9da3b4427c53da429e700))\r\n* NTPClient ([8b54c7d](https://github.com/Hypfer/Valetudo/commit/8b54c7d0066d7b4b306aaf1b096ce1027651998c))\r\n\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **logger:** Default loglevel should be info ([3e23678](https://github.com/Hypfer/Valetudo/commit/3e2367875b364d4ca63ea98548fbc3c2e841ee15))\r\n* **logger:** Do not log twice if logfile is the same as stdout redirection ([#691](https://github.com/Hypfer/Valetudo/issues/691)) ([2bd4c82](https://github.com/Hypfer/Valetudo/commit/2bd4c820a5f46e77383d9d489867494d4696fc09))\r\n* **logger:** Logger should log  ([58515d9](https://github.com/Hypfer/Valetudo/commit/58515d97559b 8bd2ab2ac12ddfbadd4fad576d9f))\r\n* **miio:** Don't get confused by the system clock doing weird things ([5e6d8df](https://github.com/Hypfer/Valetudo/commit/5e6d8df224d845da5218d0836f20f7eb4027d39c))\r\n* **miio:** http_dns: Block ott.io.mi.com requests ([#671](https://github.com/Hypfer/Valetudo/issues/671)) ([852683b](https://github.com/Hypfer/Valetudo/commit/852683b25815a05235b580a313a2464714786f4c))\r\n* **miio:** One failing message should not kill the process 20 minutes later ([e5fd0a5](https://github.com/Hypfer/Valetudo/commit/e5fd0a54ab1e040c2c82c60a4c5c310f4709fc6e))\r\n* **miio:** Set ServerSocket to disconnected on timeouts to prevent valetudo breaking on wifi issues ([e14935d](https://github.com/Hypfer/Valetudo/commit/e14935dfa9ef06a15871b3bd7683c55956b4db52))\r\n* **mqtt:** Fix home assistant vacuum.send_command functionality ([97ac35e](https://github.com/Hypfer/Valetudo/commit/97ac35e7e34fc7da3dbc3e4774f1f9ecbe7afe64))\r\n* **ntpClient:** Intercept dns lookup calls for our ntp server as well ([c7095a7](https://github.com/Hypfer/Valetudo/commit/c7095a7a340cfad293385a37f6f9dcf04a477e61))\r\n* **ui:** Fix for pinch zoom bug in IOS / Safari ([#683](https://github.com/Hypfer/Valetudo/issues/683)) ([3c0a644](https://github.com/Hypfer/Valetudo/commit/3c0a644da402f1e392fe7f088ba7fd3da4dafc69))\r\n* **ui:** SSE Map updates should use a relative path ([54bc2b7](https://github.com/Hypfer/Valetudo/commit/54bc2b71d99c0d2c411e807a2365107eb7949b36))\r\n* **vendor.dreame:** Don't store empty MapLayers ([1230c08](https://github.com/Hypfer/Valetudo/commit/1230c082b50f9264a27219f4f8e211de54541caf))\r\n* **vendor.dreame:** Proper angles ([43aa8c6](https://github.com/Hypfer/Valetudo/commit/43aa8c60ded5ed1bf52fdfce406c6bb0933f1cc1))\r\n* **vendor.dreame:** Properly parse map with correct rotation, offsets etc ([5e037c2](https://github.com/Hypfer/Valetudo/commit/5e037c22dfb27be9f3cdfa50b6d18911998da913))\r\n* **vendor.roborock:** calculation of max elements for virtual restrictions ([#681](https://github.com/Hypfer/Valetudo/issues/681)) ([2e4421b](https://github.com/Hypfer/Valetudo/commit/2e4421b0e27adc563a40ab9c8d2e3b804128ce57))\r\n* **vendor.viomi:** consumables command fix for viaomi.v8 ([#677](https://github.com/Hypfer/Valetudo/issues/677)) ([bef609e](https://github.com/Hypfer/Valetudo/commit/bef609efbe772632b270c67efb660ef2b8f06c0f))\r\n* **vendor.viomi:** Resolve [#672](https://github.com/Hypfer/Valetudo/issues/672): Fix viomi fan speed control ([#673](https://github.com/Hypfer/Valetudo/issues/673)) ([be0efca](https://github.com/Hypfer/Valetudo/commit/be0efca344ea7fe53858b9a28c7097ad4c99dea1))\r\n* **vendor.viomi:** Various fixes for 2020.01.1 ([a38987a](https://github.com/Hypfer/Valetudo/commit/a38987affba30f37e0cd09a67627a51adf695679)), closes [#641](https://github.com/Hypfer/Valetudo/issues/641)\r\n* **webserver:** Fix handleHttpDnsRequest scope ([8226e4a](https://github.com/Hypfer/Valetudo/commit/8226e4ad3e840539f13a358d817ec1b9217a2085))\r\n* **webserver:** Rate-limit logfile access ([8fd53a5](https://github.com/Hypfer/Valetudo/commit/8fd53a5237bc847708b7ee631da4afbd8fe7b950))\r\n\r\n\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/38135830"
    }
  },
  {
    "version": "2021.01.1",
    "releaseTimestamp": "2021-01-27T09:10:00.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>2021.01.1</h2></p>\r\n</div>\r\n\r\n**Be advised: This release will break (almost) everything that you're currently using.**<br/>\r\n\r\nConfig format, HTTP API and MQTT have changed significantly in this release.<br/>\r\nYou will need to recreate your Zone presets as well as your Home Assistant Robot entity.\r\n\r\nMake sure to disable any Timers you might've configured before upgrading, since there's no way to delete/configure them in this release anymore!\r\n\r\nAlso, note that this release comes with fewer features than the previous, because not everything has been ported to the new structures yet.\r\n\r\n## Core rewrite (Capabilities)\r\n\r\nTo support a growing number of Vacuum Robots with different feature sets made by different Vendors, the core infrastructure\r\nof Valetudo was completely rewritten.\r\n\r\nNow, instead of having robots that inherit from other robots, there are so-called `capabilities` as an abstraction of features.<br/>\r\nThere's always a generic base class for each feature (e.g. `GoToLocationCapability`) which is extended by multiple vendor-specific\r\nimplementations (e.g. `RoborockGoToLocationCapability`, `ViomiGoToLocationCapability` etc).\r\n\r\nThis approach completely encapsulates vendor-specific implementation details and makes them invisible for e.g. the webinterface or other\r\nusers of the HTTP API which has also been rewritten.\r\n\r\nOverall, I'm quite happy with how it turned out. Time will tell whether this abstraction was generic enough to deal with\r\nall possible vendor-specific differences.\r\n\r\n## New HTTP REST Interface\r\n\r\nAs mentioned, the REST interface was rewritten and is now an official way of communicating with Valetudo.<br/>\r\n\r\nAll endpoints are dynamically generated according to which capabilities are available for the robot implementation Valetudo is using.\r\nFor example basic controls such as \"start\", \"stop\" or \"home\" are done via a PUT request to `/api/v2/robot/capabilities/BasicControlCapability`.\r\n\r\nTo find out more about all possible endpoints for your Valetudo instance, a meta-endpoint has also been added.<br/>\r\nAt `/api/v2/` you will get JSON containing all endpoints as well as their accepted methods.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/103436664-9061f200-4c1e-11eb-8541-5c8ed6ccc4c2.png)\r\n\r\n## New MQTT Interface\r\n\r\nThe MQTT interface was also rewritten to support different subsets of capabilities.\r\nInstead of having a single topic, which contains all the information available, data is now split up onto different topics\r\nbased on capabilities.\r\n\r\nThis also means that you will have multiple entities for your robot in Home Assistant:\r\n\r\n![image](https://user-images.githubusercontent.com/974410/103436641-44af4880-4c1e-11eb-8a9f-019d17398359.png)\r\n\r\nFurthermore, Wi-Fi information is now also available over MQTT so in theory, one could build a microservice which subscribes\r\nto both map and Wi-Fi data updates and build a Wi-Fi heatmap of their home by mapping the measurements to the position in the map.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/103436651-5f81bd00-4c1e-11eb-99f9-9efe6875d5b3.png)\r\n\r\n\r\nNote that the default identifier changed from `rockrobo` to `robot`, since Valetudo is not just dealing with Roborock anymore.<br/>\r\nTherefore when reconfiguring this release, you may want to change that back to the old value if your setup relies on it.\r\n\r\n## New Config Schema + Location\r\n\r\nTo support different robots with different folder structures (some of them being read-only), the configuration location\r\nhad to be made configurable, which is a chicken/egg problem, because the information on where to find the configuration\r\nwould be configured within the configuration.\r\n\r\nTo solve this, Valetudo is now using the environment variable `VALETUDO_CONFIG_PATH` and defaults to `os.tmpdir()` if it isn't set.\r\n\r\nDue to the fact that the configuration schema also changed significantly, **you will need to reconfigure Valetudo on upgrade**.\r\n\r\nYou will also need to update your means of running valetudo to include this ENV variable since otherwise your configuration will vanish on each reboot.\r\nThis can be done either by building a new firmware image or copying the changes required from these commits\r\n\r\n[Roborock](https://github.com/zvldz/vacuum/commit/5981577aa8e8f75c4fbea7045bf4484066881b55)\r\n\r\n[Viomi](https://github.com/Hypfer/Valetudo/commit/923f941e76e2e41be7a714e47f3a08428d09cfd4)\r\n\r\n## Dreame Support\r\n\r\nWith the launch of the Dreame D9, there's now a promising successor to the Roborock S5 regarding both pricing and ease of installation.\r\nThis release already contains support for basic controls, Map Rendering, Segment Cleaning and Zoned Cleaning.\r\n\r\nRooting instructions will follow soon-ish. :)\r\n\r\nIt looks like this code should also be adaptable to the F9. We'll see about that if/when I get my hands on one\r\n\r\n## Misc\r\n\r\n**Viomi note:** If you're upgrading on a Viomi, make sure to change the cloud IP used for redirection to `203.0.113.1` which is now hardcoded.<br/>\r\nThe docs have been updated to reflect that.\r\n\r\nValetudo is now using the CalVer versioning scheme, because it better fits the constantly changing scope of the project.\r\n\r\nI'd like to especially thank @depau for his port of the Viomi robot to the new infrastructure using only the half-finished capabilities branch\r\nand no documentation whatsoever as a reference.\r\n\r\nFurthermore, thanks to @bensweet86 for porting more capabilities to the new framework.\r\n\r\n\r\n## Autogenerated changelog\r\n\r\n### Features\r\n\r\n* **mqtt:** Publish ValetudoGoToLocations & ValetudoZonePresets ([76a9c52](https://github.com/Hypfer/Valetudo/commit/76a9c5234dfbcce864d70d1d6db781af86d6a98b))\r\n* **ui:** Bring back consumable monitoring & resetting for now ([fde2ffd](https://github.com/Hypfer/Valetudo/commit/fde2ffd8d3c7b5869f221870774a2032232d6c54))\r\n* **vacuum.roborock:** Add support for no-mopping zones on S5 Max and S6 ([#630](https://github.com/Hypfer/Valetudo/issues/630)) ([61902ed](https://github.com/Hypfer/Valetudo/commit/61902edd8b185d116dd27a02827866e3defd01b1)\r\n)\r\n* **vacuum.roborock:** Re-added support for S6 Pure ([0226cd5](https://github.com/Hypfer/Valetudo/commit/0226cd56a6f245e307944dab623d28bda8fcc288))\r\n* **vacuum.viomi:** Virtual Walls & No-Go Areas ([96462ac](https://github.com/Hypfer/Valetudo/commit/96462ac752b025a3385e31d4ea0cfbea268b207c))\r\n* **vendor.dreame:** Basic Dreame D9 support ([7c5e231](https://github.com/Hypfer/Valetudo/commit/7c5e231326bc8ca454e303b31c647f14f6773cd8))\r\n* **vendor.dreame:** Re-add support for 1c as well as more dreame capabilities ([cd76abe](https://github.com/Hypfer/Valetudo/commit/cd76abe952cda43fd260eda2b217aff677b98d29))\r\n* **vendor.roborock:** Do not disturb capability ([#659](https://github.com/Hypfer/Valetudo/issues/659)) ([4b3ed97](https://github.com/Hypfer/Valetudo/commit/4b3ed974d064b788f470c9439a719a3f3ed95cb9))\r\n* **vendor.roborock:** Use the lo alias approach for more robots ([58a2618](https://github.com/Hypfer/Valetudo/commit/58a26186f34e5331fe5373e231e97f403e15e147))\r\n* Add properties to capability ([7114fcc](https://github.com/Hypfer/Valetudo/commit/7114fccb502305e3176b350973f1ba0825e98845))\r\n* Configure authorized_keys location via ENV variable ([d06520d](https://github.com/Hypfer/Valetudo/commit/d06520da114f45778527e54446eed70df38e66ba))\r\n* Viomi capabilities port ([8486f04](https://github.com/Hypfer/Valetudo/commit/8486f04fdd9176af6e4e7be684bb3eecebaa39e1))\r\n\r\n### Bug Fixes\r\n\r\n* **miio:** Only report a new token from handshake if it is actually new ([b373703](https://github.com/Hypfer/Valetudo/commit/b37370349514fea07fc8b27b89637a44e6df668e))\r\n* Fix map layer dimensions calculation for empty layers ([216c347](https://github.com/Hypfer/Valetudo/commit/216c3474e7680b90859b47e2ea5308ced8d1c7ff))\r\n* **ui:** fix [#565](https://github.com/Hypfer/Valetudo/issues/565) ui not working with safari and basic auth ([252c22d](https://github.com/Hypfer/Valetudo/commit/252c22dc9d457aa69bdbee0829930aa156430a9b))\r\n* **vendor.dreame:** Fix map parser tests ([a81b8e9](https://github.com/Hypfer/Valetudo/commit/a81b8e94a6db0c39b0881bbb29122ca62f5a2247))\r\n* **vendor.roborock:** Use lo alias cloud redirection approach for S6 & S5Max with miio_client 3.5.8 ([71bc1f8](https://github.com/Hypfer/Valetudo/commit/71bc1f8b91b47503a45b3771c3217655cc30a7fd))\r\n* Set VALETUDO_CONFIG_PATH variable for Upstart ([#648](https://github.com/Hypfer/Valetudo/issues/648)) ([f75b70d](https://github.com/Hypfer/Valetudo/commit/f75b70d7f7d3092f724555090db99aea4bccf6d9))\r\n* **mqtt:** missing / in set_fan_speed topic ([26ceb95](https://github.com/Hypfer/Valetudo/commit/26ceb95a71154396d14adfb01b6fb1d198fa3490))\r\n* **vacuum.roborock:** Fix broken cloud connectivity on newer roborock vacuums caused by missing region ([28483ab](https://github.com/Hypfer/Valetudo/commit/28483abd4431cf0d38953aefeb3995e9d45ea2b8))\r\n* **vacuum.viomi:** Added model names for viomi.v8 ([20d86c3](https://github.com/Hypfer/Valetudo/commit/20d86c3c005ac78d36bab29a78946e17f163f2c3))\r\n* **vacuum.viomi:** Fix fan speed state parsing ([3ca7450](https://github.com/Hypfer/Valetudo/commit/3ca745054d3c159023edb632e198126e89d7494a))\r\n* **vacuum.viomi:** Fix invalid property access ([6da2822](https://github.com/Hypfer/Valetudo/commit/6da282201172b3fb5efa1969aac6192d5ead5842))\r\n* **vacuum.viomi:** Segments + Docs ([#600](https://github.com/Hypfer/Valetudo/issues/600)) ([89a5485](https://github.com/Hypfer/Valetudo/commit/89a5485f17e7ac68e7b8d97ae9a8381d2f0a7767))\r\n* Improved dnshack to catch all problematic dns.lookup requests ([8609612](https://github.com/Hypfer/Valetudo/commit/8609612e03bc756194982d35b4389d27557842ac))\r\n\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/36957518"
    }
  },
  {
    "version": "0.6.1",
    "releaseTimestamp": "2020-07-30T10:51:41.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>0.6.1</h2></p>\r\n</div>\r\n\r\nThis is merely a small fix release.\r\n\r\nWith 0.6.1, valetudo doesn't segfault anymore when using a domain name as the mqtt host.\r\nFurthermore, zones are now back to being cleaned once instead of ten times.\r\n\r\nIf you've arrived at this release and haven't seen the [0.6.0 release notes](https://github.com/Hypfer/Valetudo/releases/tag/0.6.0) yet, I strongly encourage you to do so now.\r\n\r\n\r\nAutogenerated changelog:\r\n\r\n### Features\r\n\r\n* **mqtt:** Added sw_version to mqtt autodiscovery to fix [#568](https://github.com/Hypfer/Valetudo/issues/568) ([a23d5af](https://github.com/Hypfer/Valetudo/commit/a23d5af95b7986c21e3487eb5e2d4f93c16c8ba3))\r\n\r\n### Bug Fixes\r\n\r\n* **mqtt:** Fix segfault on mqtt hostname resolution ([b2410ff](https://github.com/Hypfer/Valetudo/commit/b2410ff5eda5a67f02ff5fcad7ef7c30e498674c))\r\n* **mqtt:** Fixed [#571](https://github.com/Hypfer/Valetudo/issues/571) mqtt pause status ([8b06203](https://github.com/Hypfer/Valetudo/commit/8b06203de22871c47be97bc8e353118796636853))\r\n* **ui:** Fix mqtt settings checkboxes ([039b741](https://github.com/Hypfer/Valetudo/commit/039b7411325b74c2b4abbe58a91134fd1d1b9982))\r\n* **ui:** Restore context after drawing active zone ([4f7ec2c](https://github.com/Hypfer/Valetudo/commit/4f7ec2c44e8da163bf30c097df26a3df37380f04))\r\n* **vacuum.roborock:** Don't multiply iterations by 10 to fix [#573](https://github.com/Hypfer/Valetudo/issues/573) ([f3cc935](https://github.com/Hypfer/Valetudo/commit/f3cc9354d6da3149a69ef5476c922d97df0eb8a3))\r\n* override dns.lookup to mitigate static nodejs segfaults ([41f3e98](https://github.com/Hypfer/Valetudo/commit/41f3e981a590e76261e7d57ccff8d97b3d4b94ad))",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/29111413"
    }
  },
  {
    "version": "0.6.0",
    "releaseTimestamp": "2020-07-26T17:15:02.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>0.6.0</h2></p>\r\n</div>\r\n\r\n## New Data Format\r\nI've finally found the time to rework the Map Data format as well as the robot state format.\r\nBoth previously being heavily influenced by roborock, the new and improved formats are a huge step for easier adaption\r\nof Valetudo to new Vacuums as well as implementation of new features.\r\n\r\nIn fact it has already proven itself in other work that has been done for this release and decreased memory pressure quite a bit.\r\n\r\nThis change is also of course a **breaking change**.\r\nMake sure to update any dependant applications/integrations/etc. as well.\r\n\r\n\r\n## (Initial) Support for many more Vacuums + a new Vendor\r\nThe list of _technically_ supported roborock vacuums has grown quite a bit.\r\nEspecially since Dennis released his guide on how to root the S6 which you can find [here](https://www.youtube.com/playlist?list=PL9PoaNtZCJRZc61c792VCr_I6jQK_IdSb).\r\n\r\nFurthermore, Valetudo has also received initial support for a dreame-made xiaomi vacuum robot: **Xiaomi MiJia 1C**\r\n\r\nThere's no map parsing yet though. Contributions much appreciated.\r\n\r\nPlease note that there's no dreame rooting guide available yet.\r\nThese release notes will be updated when it becomes available.\r\n\r\n\r\n## Segment Cleaning via the Web and MQTT\r\nOwners of room-cleaning capable roborock vacuums can now use Valetudo to do so.\r\n\r\nSimply select the segments you want to clean and start the cleanup like you would start a zoned cleanup.\r\nCurrently cleaned segments are denoted by a rotated icon.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/88485125-f3ff3980-cf73-11ea-87f2-dbe85508c5e1.png)\r\n\r\nIf you zoom in on a segment marker, it will display both it's segment id as well as the segments' area in `m`.\r\nThe latter also being a benefit of the new Map Data format.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/88485127-fd88a180-cf73-11ea-819c-cdd60b3b062c.png)\r\n\r\nSegment cleaning is of course also available via MQTT.\r\nCheck out the updated Home Assistant docs for an example on how to use it.\r\n\r\nSince this is a generic implementation, support for other vacuum vendors will follow.\r\nYou just need to open a PR for that.\r\n\r\n### UI enhancements\r\nDynamic zones now display their size in meters which is also a helpful addition if you quickly want to measure something without leaving your desk.\r\n\r\n![image](https://user-images.githubusercontent.com/974410/88485140-109b7180-cf74-11ea-82cf-23da553ae201.png)\r\n\r\nFurthermore, it is now impossible for you to break the map by zooming out too far.\r\n\r\n\r\n## Misc\r\n* The map renderer has been updated by @aa-ko to always color adjacent segments in a different color thanks to math\r\n* MQTT supports client certificate authentication thanks to @mqtt-fan\r\n\r\nand of course there's the autogenerated changelog:\r\n\r\n### Features\r\n\r\n* Segment cleanup via WebUI + MQTT ([f14f6cc](https://github.com/Hypfer/Valetudo/commit/f14f6cc253766e11f9a95dfe6cbff7cfafc73e70))\r\n* **entities.state:** Added Charging/Charged/Discharging status to BatteryStateAttribute ([97b5cdf](https://github.com/Hypfer/Valetudo/commit/97b5cdfd93bc4f562752a0a890f1b972b620119c))\r\n* **mqtt:** add support for client certificate ([#549](https://github.com/Hypfer/Valetudo/issues/549)) ([33f94ec](https://github.com/Hypfer/Valetudo/commit/33f94ec6614d15876b5e1f77446500001185b317))\r\n* **roborock:** Experimental support for even more roborock vacuums ([2450ceb](https://github.com/Hypfer/Valetudo/commit/2450ceb3f5cb2653ee32dd3d5ef0fbf2c7e69645))\r\n* **ui:** Added zone size display, proper icon/text scaling and limited scaling ([6b61ca8](https://github.com/Hypfer/Valetudo/commit/6b61ca816f377c07c784cb9075be43e838ecb405))\r\n* **ui:** Use math (four color theorem) to properly color segments ([d462f65](https://github.com/Hypfer/Valetudo/commit/d462f65e8fe57de43daf098f295d987a11990f9d))\r\n* **vacuum.dreame:** Initial basic support for the dreame.vacuum.mc1808 ([f73c7c6](https://github.com/Hypfer/Valetudo/commit/f73c7c61dfe786131704fa90fd93e632263b982d))\r\n* **vacuum.viomi:** add support for viomi.vacuum.v8 + mop enhancements ([#543](https://github.com/Hypfer/Valetudo/issues/543)) ([17bb01e](https://github.com/Hypfer/Valetudo/commit/17bb01efe088a494563f6037076ade6e13c8c553)), closes [#541](https://github.com/Hypfer/Valetudo/issues/541) [#538](https://github.com/Hypfer/Valetudo/issues/538) [#548](https://github.com/Hypfer/Valetudo/issues/548)\r\n* Experimental support(?) for S6 MaxV ([88de212](https://github.com/Hypfer/Valetudo/commit/88de212274872eca0ca97c3b0dfadb70d2a4baa5))\r\n\r\n\r\n### Bug Fixes\r\n\r\n* **entities.map:** Fixed MapLayer area calculation ([ac86c84](https://github.com/Hypfer/Valetudo/commit/ac86c84c8fa75408b52067306f7e0c4a201e9725))\r\n* **mqtt:** Check DNS resolution before connecting to mqtt broker to fix [#563](https://github.com/Hypfer/Valetudo/issues/563) ([38a0af8](https://github.com/Hypfer/Valetudo/commit/38a0af82db66428b8a6e7340dfaac394bbfcb2ac))\r\n* **ui:** Default to colorIndex 0 if solver can't find the segment in its graph ([e1565d0](https://github.com/Hypfer/Valetudo/commit/e1565d073642c87c084d93c56e031ebbec1160bd))\r\n* **ui:** Fix map coloring ([#567](https://github.com/Hypfer/Valetudo/issues/567)) ([890120c](https://github.com/Hypfer/Valetudo/commit/890120c76930bb8941459a7e0d1baa0af8577d83))\r\n* **ui:** Fixed zone dimensions ([0ca13e3](https://github.com/Hypfer/Valetudo/commit/0ca13e328d6e4943a444f750eb35365748dd5523))\r\n* **vacuum.roborock:** Changed set_lab_status payload for S6 to fix [#540](https://github.com/Hypfer/Valetudo/issues/540) ([19e141e](https://github.com/Hypfer/Valetudo/commit/19e141efc0b6e9f4798a9bff2482feaa10f3772f))\r\n* **vacuum.roborock:** Fix map parsing failing for maps with no image data ([f187906](https://github.com/Hypfer/Valetudo/commit/f1879064b15ea978df32a12f8a23b346ba2e3e39))\r\n* **vacuum.viomi:** Hackishly fixed map parsing for viomi v6 + fan speed settings for all viomi ([ffbb8e7](https://github.com/Hypfer/Valetudo/commit/ffbb8e75ffc4ce06bab6baa6f7328877cf66659b))\r\n* **vacuum.viomi:** Hackishly fixed path + angle ([fdd80d2](https://github.com/Hypfer/Valetudo/commit/fdd80d24c577a66ecb358f838e675126abd0c084))\r\n\r\n\r\n",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/28964045"
    }
  },
  {
    "version": "0.5.3",
    "releaseTimestamp": "2020-06-14T14:04:32.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>0.5.3</h2></p>\r\n</div>\r\n\r\nWith this release, Valetudo is upgraded to a stripped NodeJS 14.4.0 runtime, which brings both smaller binary size as well as enhanced performance.\r\n\r\nFurthermore, the long awaited cleaning of multiple zones via the Web Interface is finally here.\r\n\r\nIf you had root access to your Roborock S6/T6/S4/T4 or M1S, you could now use Valetudo as well.\r\nThere will be a guide on how to do that in the near future. Be aware, that no new features beyond those which are already available on the S5 are supported yet.\r\n\r\nIf you're a Valetudo developer, your life has become a lot easier with 0.5.3.\r\nRobot Model, Webserver Port and all the relevant settings are now configured via the config.json. No more messing around with ENV variables.\r\n\r\n\r\nHere's the autogenerated changelog:\r\n\r\n### Features\r\n\r\n* Initial Support for Roborock T/S4 and M1S ([24579f7](https://github.com/Hypfer/Valetudo/commit/24579f7acd98e276f4a85344919c4e8a8d356381))\r\n* Try to write a backup in case we're overwriting an invalid configuration file. ([#537](https://github.com/Hypfer/Valetudo/issues/537)) ([e738491](https://github.com/Hypfer/Valetudo/commit/e7384917354efa7e1d1b730b746966d4e46d87f2))\r\n* **ui:** Allow select of multiple zones for zone clean ([#535](https://github.com/Hypfer/Valetudo/issues/535)) ([1a29155](https://github.com/Hypfer/Valetudo/commit/1a29155094cdd76e02c5cbea28739d4637d90c00))\r\n* Added debug config option to continuously log memory usage ([d96eb15](https://github.com/Hypfer/Valetudo/commit/d96eb15c8f299ff49d98f9d6661c6f44225bc633))\r\n* Added option to fully configure model information via the config file ([#497](https://github.com/Hypfer/Valetudo/issues/497)) ([e241c1d](https://github.com/Hypfer/Valetudo/commit/e241c1d9b0dd1870f759fd8ebd1f1e7ec1f7cf61))\r\n* Initial support for S6 T6 and S5 Max ([f417b4d](https://github.com/Hypfer/Valetudo/commit/f417b4de3f27b0664552471c05adb220592f5c51))\r\n\r\n### Bug Fixes\r\n\r\n* **mqtt:** Removed unnecessary availability topic mitigation ([b76ce14](https://github.com/Hypfer/Valetudo/commit/b76ce144b4a3eb920a1dbab1991c83cf87ee7967))\r\n* Always assume embedded operation unless specified otherwise ([#536](https://github.com/Hypfer/Valetudo/issues/536)) ([7585f86](https://github.com/Hypfer/Valetudo/commit/7585f86e9fb1ec196b4b710454e1414673482081))\r\n* Removed useless app_get_locale functionality to fix [#532](https://github.com/Hypfer/Valetudo/issues/532) ([ffc06d6](https://github.com/Hypfer/Valetudo/commit/ffc06d65ba788cfbc3aee33b8e3d9d9e3fe647f9))\r\n* Simplify embedded logic now that 'auto' is gone. [#536](https://github.com/Hypfer/Valetudo/issues/536) ([b9097a6](https://github.com/Hypfer/Valetudo/commit/b9097a6f128aa947e4bb4a05fb3d79453f0f9e71))\r\n* **mqtt:** Update availability topic on each attribute topic update to fix false offline status ([af69673](https://github.com/Hypfer/Valetudo/commit/af696739d3119fbd84b1e9ba20b50b3fedce7a12))\r\n* **ui:** Fix [#527](https://github.com/Hypfer/Valetudo/issues/527) not working close and cancel buttons in timer settings ([e2ea1ce](https://github.com/Hypfer/Valetudo/commit/e2ea1ce212c4f85bba492dc273c6b7e75f4768b8))\r\n* **ui:** Hide forbidden zones editor menu item on gen 1 ([#382](https://github.com/Hypfer/Valetudo/issues/382)) ([32e9416](https://github.com/Hypfer/Valetudo/commit/32e94168fb3141fb49721be6019e0611690f3292))",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/27531929"
    }
  },
  {
    "version": "0.5.2",
    "releaseTimestamp": "2020-05-28T14:15:20.000Z",
    "changelog": "<div align=\"center\">\r\n    <img src=\"https://github.com/Hypfer/Valetudo/blob/master/assets/logo/valetudo_logo_with_name.svg\" width=\"800\" alt=\"valetudo\">\r\n    <p align=\"center\"><h2>0.5.2</h2></p>\r\n</div>\r\n\r\nThis release contains a new and reworked Iconset for the map view as well as support for displaying detected rooms.\r\n\r\nFurthermore, these are the first release notes which feature semi-autogenerated changelogs utilizing [Conventional Commits](https://www.conventionalcommits.org)\r\n### Features\r\n\r\n* **mqtt:** Add availability as last will ([b196625](https://github.com/Hypfer/Valetudo/commit/b196625ac73e4932324b2bd2cf487790d6758711))\r\n* **ui:** Display Model information in Info Page ([8db6ca2](https://github.com/Hypfer/Valetudo/commit/8db6ca271aa63eeded999a377bcd02c94fa6dc16))\r\n* Always log Stacktrace on unclean exit code ([e2a542c](https://github.com/Hypfer/Valetudo/commit/e2a542c95a4abd147b3bb7f1c151247334347d1b))\r\n* **vacuum.roborock:** Add backup map restore to vacuum class ([2b76965](https://github.com/Hypfer/Valetudo/commit/2b7696565b02615a2aaeb73b6bf4bd1bca7885d4))\r\n* **vacuum.roborock:** added more events without handler ([3bbdd80](https://github.com/Hypfer/Valetudo/commit/3bbdd80f99339d8a8efb638f9ae1326399a0dd00))\r\n* log process exit code + debug log process exit stacktrace ([afd7e5a](https://github.com/Hypfer/Valetudo/commit/afd7e5a95781c7429d0d5b4ee2240fc3e26dfd89))\r\n* **mqtt:** added time and area information to mqtt attributes ([9eaf848](https://github.com/Hypfer/Valetudo/commit/9eaf848ef2f25d17ac8e19702abc24bf6ce19c90))\r\n* **ui:** Added and reworked icons, fixed rendering bugs and fully enabled map dark mode ([4c181ae](https://github.com/Hypfer/Valetudo/commit/4c181aee7f9f41a1881267a5a477b1ff499c4875))\r\n* new robot + charger icon ([964b935](https://github.com/Hypfer/Valetudo/commit/964b935a21e5af62e87ec84e32a751e99106b90f))\r\n* Parse and render segments ([386c344](https://github.com/Hypfer/Valetudo/commit/386c344160e5ad17e1d9503121d3ae87abb302b0))\r\n* **mqtt:** split broker_url in multiple fields ([c41f6da](https://github.com/Hypfer/Valetudo/commit/c41f6da874373b36bc670507d24ee488e5252ee8))\r\n* Upgrade MQTT to 4.0.0 ([#518](https://github.com/Hypfer/Valetudo/issues/518)) ([6063775](https://github.com/Hypfer/Valetudo/commit/606377569cfa31eb968e69536baa07617332213b))\r\n\r\n### Bug Fixes\r\n\r\n* **api:** remove passwords from /api/get_config ([18261bb](https://github.com/Hypfer/Valetudo/commit/18261bb1680cc28a80526869c2c2a95974f9072c))\r\n* **ui:** Fixed virtual wall placement ([6724e55](https://github.com/Hypfer/Valetudo/commit/6724e5556f3350c1c3cc6d4d5f09a9e08e8f2a6b))\r\n* **ui:** Removed misleading firmware version which was actually the miio_client version ([ac757b2](https://github.com/Hypfer/Valetudo/commit/ac757b2ba126509c7c61eb7d3aa987b9ea17f95c))\r\n* **vacuum:** missing roborock onStatusChange implementation ([cd42a7e](https://github.com/Hypfer/Valetudo/commit/cd42a7ed50c5b29d586470461f1c1afd9555419f))\r\n* **vacuum.roborock:** getCurrentStatus should return a promise ([dd63d75](https://github.com/Hypfer/Valetudo/commit/dd63d75cf2c15bbc7e65e459da7b865be2a3dffd))\r\n* **vacuum.roborock:** Limit maximum amount of virtual walls according to firmware limits ([6787826](https://github.com/Hypfer/Valetudo/commit/67878263132d3138b2eeb3820ed9c69349d08aea))",
    "metaData": {
      "githubReleaseUrl": "https://api.github.com/repos/Hypfer/Valetudo/releases/26992913"
    }
  }
]